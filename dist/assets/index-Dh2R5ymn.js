function Gp(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Jp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var ud={exports:{}},Hi={},cd={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys=Symbol.for("react.element"),Qp=Symbol.for("react.portal"),Yp=Symbol.for("react.fragment"),Xp=Symbol.for("react.strict_mode"),Zp=Symbol.for("react.profiler"),em=Symbol.for("react.provider"),tm=Symbol.for("react.context"),rm=Symbol.for("react.forward_ref"),nm=Symbol.for("react.suspense"),sm=Symbol.for("react.memo"),im=Symbol.for("react.lazy"),vu=Symbol.iterator;function am(t){return t===null||typeof t!="object"?null:(t=vu&&t[vu]||t["@@iterator"],typeof t=="function"?t:null)}var dd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hd=Object.assign,fd={};function dn(t,e,r){this.props=t,this.context=e,this.refs=fd,this.updater=r||dd}dn.prototype.isReactComponent={};dn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};dn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pd(){}pd.prototype=dn.prototype;function ol(t,e,r){this.props=t,this.context=e,this.refs=fd,this.updater=r||dd}var ll=ol.prototype=new pd;ll.constructor=ol;hd(ll,dn.prototype);ll.isPureReactComponent=!0;var xu=Array.isArray,md=Object.prototype.hasOwnProperty,ul={current:null},gd={key:!0,ref:!0,__self:!0,__source:!0};function yd(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)md.call(e,n)&&!gd.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ys,type:t,key:i,ref:a,props:s,_owner:ul.current}}function om(t,e){return{$$typeof:ys,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cl(t){return typeof t=="object"&&t!==null&&t.$$typeof===ys}function lm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var wu=/\/+/g;function fa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lm(""+t.key):e.toString(36)}function ei(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ys:case Qp:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+fa(a,0):n,xu(s)?(r="",t!=null&&(r=t.replace(wu,"$&/")+"/"),ei(s,e,r,"",function(c){return c})):s!=null&&(cl(s)&&(s=om(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(wu,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",xu(t))for(var l=0;l<t.length;l++){i=t[l];var u=n+fa(i,l);a+=ei(i,e,r,u,s)}else if(u=am(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=n+fa(i,l++),a+=ei(i,e,r,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Es(t,e,r){if(t==null)return t;var n=[],s=0;return ei(t,n,"","",function(i){return e.call(r,i,s++)}),n}function um(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pe={current:null},ti={transition:null},cm={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:ti,ReactCurrentOwner:ul};function vd(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:Es,forEach:function(t,e,r){Es(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Es(t,function(){e++}),e},toArray:function(t){return Es(t,function(e){return e})||[]},only:function(t){if(!cl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=dn;q.Fragment=Yp;q.Profiler=Zp;q.PureComponent=ol;q.StrictMode=Xp;q.Suspense=nm;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cm;q.act=vd;q.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=hd({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=ul.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)md.call(e,u)&&!gd.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:ys,type:t.type,key:s,ref:i,props:n,_owner:a}};q.createContext=function(t){return t={$$typeof:tm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:em,_context:t},t.Consumer=t};q.createElement=yd;q.createFactory=function(t){var e=yd.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:rm,render:t}};q.isValidElement=cl;q.lazy=function(t){return{$$typeof:im,_payload:{_status:-1,_result:t},_init:um}};q.memo=function(t,e){return{$$typeof:sm,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=ti.transition;ti.transition={};try{t()}finally{ti.transition=e}};q.unstable_act=vd;q.useCallback=function(t,e){return Pe.current.useCallback(t,e)};q.useContext=function(t){return Pe.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return Pe.current.useDeferredValue(t)};q.useEffect=function(t,e){return Pe.current.useEffect(t,e)};q.useId=function(){return Pe.current.useId()};q.useImperativeHandle=function(t,e,r){return Pe.current.useImperativeHandle(t,e,r)};q.useInsertionEffect=function(t,e){return Pe.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return Pe.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return Pe.current.useMemo(t,e)};q.useReducer=function(t,e,r){return Pe.current.useReducer(t,e,r)};q.useRef=function(t){return Pe.current.useRef(t)};q.useState=function(t){return Pe.current.useState(t)};q.useSyncExternalStore=function(t,e,r){return Pe.current.useSyncExternalStore(t,e,r)};q.useTransition=function(){return Pe.current.useTransition()};q.version="18.3.1";cd.exports=q;var x=cd.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm=x,hm=Symbol.for("react.element"),fm=Symbol.for("react.fragment"),pm=Object.prototype.hasOwnProperty,mm=dm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gm={key:!0,ref:!0,__self:!0,__source:!0};function xd(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)pm.call(e,n)&&!gm.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:hm,type:t,key:i,ref:a,props:s,_owner:mm.current}}Hi.Fragment=fm;Hi.jsx=xd;Hi.jsxs=xd;ud.exports=Hi;var o=ud.exports,wd={exports:{}},We={},bd={exports:{}},_d={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,D){var V=O.length;O.push(D);e:for(;0<V;){var Q=V-1>>>1,X=O[Q];if(0<s(X,D))O[Q]=D,O[V]=X,V=Q;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var D=O[0],V=O.pop();if(V!==D){O[0]=V;e:for(var Q=0,X=O.length,I=X>>>1;Q<I;){var K=2*(Q+1)-1,fe=O[K],qe=K+1,nr=O[qe];if(0>s(fe,V))qe<X&&0>s(nr,fe)?(O[Q]=nr,O[qe]=V,Q=qe):(O[Q]=fe,O[K]=V,Q=K);else if(qe<X&&0>s(nr,V))O[Q]=nr,O[qe]=V,Q=qe;else break e}}return D}function s(O,D){var V=O.sortIndex-D.sortIndex;return V!==0?V:O.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,h=null,p=3,y=!1,v=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(O){for(var D=r(c);D!==null;){if(D.callback===null)n(c);else if(D.startTime<=O)n(c),D.sortIndex=D.expirationTime,e(u,D);else break;D=r(c)}}function _(O){if(w=!1,m(O),!v)if(r(u)!==null)v=!0,R(j);else{var D=r(c);D!==null&&z(_,D.startTime-O)}}function j(O,D){v=!1,w&&(w=!1,g(E),E=-1),y=!0;var V=p;try{for(m(D),h=r(u);h!==null&&(!(h.expirationTime>D)||O&&!B());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,p=h.priorityLevel;var X=Q(h.expirationTime<=D);D=t.unstable_now(),typeof X=="function"?h.callback=X:h===r(u)&&n(u),m(D)}else n(u);h=r(u)}if(h!==null)var I=!0;else{var K=r(c);K!==null&&z(_,K.startTime-D),I=!1}return I}finally{h=null,p=V,y=!1}}var S=!1,N=null,E=-1,C=5,k=-1;function B(){return!(t.unstable_now()-k<C)}function L(){if(N!==null){var O=t.unstable_now();k=O;var D=!0;try{D=N(!0,O)}finally{D?A():(S=!1,N=null)}}else S=!1}var A;if(typeof f=="function")A=function(){f(L)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,T=H.port2;H.port1.onmessage=L,A=function(){T.postMessage(null)}}else A=function(){b(L,0)};function R(O){N=O,S||(S=!0,A())}function z(O,D){E=b(function(){O(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,R(j))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var D=3;break;default:D=p}var V=p;p=D;try{return O()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,D){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var V=p;p=O;try{return D()}finally{p=V}},t.unstable_scheduleCallback=function(O,D,V){var Q=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Q+V:Q):V=Q,O){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=V+X,O={id:d++,callback:D,priorityLevel:O,startTime:V,expirationTime:X,sortIndex:-1},V>Q?(O.sortIndex=V,e(c,O),r(u)===null&&O===r(c)&&(w?(g(E),E=-1):w=!0,z(_,V-Q))):(O.sortIndex=X,e(u,O),v||y||(v=!0,R(j))),O},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(O){var D=p;return function(){var V=p;p=D;try{return O.apply(this,arguments)}finally{p=V}}}})(_d);bd.exports=_d;var ym=bd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm=x,Ve=ym;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jd=new Set,Jn={};function Nr(t,e){tn(t,e),tn(t+"Capture",e)}function tn(t,e){for(Jn[t]=e,t=0;t<e.length;t++)jd.add(e[t])}var Nt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qa=Object.prototype.hasOwnProperty,xm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bu={},_u={};function wm(t){return Qa.call(_u,t)?!0:Qa.call(bu,t)?!1:xm.test(t)?_u[t]=!0:(bu[t]=!0,!1)}function bm(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _m(t,e,r,n){if(e===null||typeof e>"u"||bm(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Oe(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var _e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_e[t]=new Oe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_e[e]=new Oe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_e[t]=new Oe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_e[t]=new Oe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_e[t]=new Oe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_e[t]=new Oe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_e[t]=new Oe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_e[t]=new Oe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_e[t]=new Oe(t,5,!1,t.toLowerCase(),null,!1,!1)});var dl=/[\-:]([a-z])/g;function hl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dl,hl);_e[e]=new Oe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dl,hl);_e[e]=new Oe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dl,hl);_e[e]=new Oe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_e[t]=new Oe(t,1,!1,t.toLowerCase(),null,!1,!1)});_e.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_e[t]=new Oe(t,1,!1,t.toLowerCase(),null,!0,!0)});function fl(t,e,r,n){var s=_e.hasOwnProperty(e)?_e[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_m(e,r,s,n)&&(r=null),n||s===null?wm(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Pt=vm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cs=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Ur=Symbol.for("react.fragment"),pl=Symbol.for("react.strict_mode"),Ya=Symbol.for("react.profiler"),Sd=Symbol.for("react.provider"),kd=Symbol.for("react.context"),ml=Symbol.for("react.forward_ref"),Xa=Symbol.for("react.suspense"),Za=Symbol.for("react.suspense_list"),gl=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),Nd=Symbol.for("react.offscreen"),ju=Symbol.iterator;function Sn(t){return t===null||typeof t!="object"?null:(t=ju&&t[ju]||t["@@iterator"],typeof t=="function"?t:null)}var le=Object.assign,pa;function An(t){if(pa===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);pa=e&&e[1]||""}return`
`+pa+t}var ma=!1;function ga(t,e){if(!t||ma)return"";ma=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{ma=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?An(t):""}function jm(t){switch(t.tag){case 5:return An(t.type);case 16:return An("Lazy");case 13:return An("Suspense");case 19:return An("SuspenseList");case 0:case 2:case 15:return t=ga(t.type,!1),t;case 11:return t=ga(t.type.render,!1),t;case 1:return t=ga(t.type,!0),t;default:return""}}function eo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ur:return"Fragment";case $r:return"Portal";case Ya:return"Profiler";case pl:return"StrictMode";case Xa:return"Suspense";case Za:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kd:return(t.displayName||"Context")+".Consumer";case Sd:return(t._context.displayName||"Context")+".Provider";case ml:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gl:return e=t.displayName||null,e!==null?e:eo(t.type)||"Memo";case Lt:e=t._payload,t=t._init;try{return eo(t(e))}catch{}}return null}function Sm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eo(e);case 8:return e===pl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ed(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function km(t){var e=Ed(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rs(t){t._valueTracker||(t._valueTracker=km(t))}function Cd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Ed(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function mi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function to(t,e){var r=e.checked;return le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Su(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Qt(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rd(t,e){e=e.checked,e!=null&&fl(t,"checked",e,!1)}function ro(t,e){Rd(t,e);var r=Qt(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?no(t,e.type,r):e.hasOwnProperty("defaultValue")&&no(t,e.type,Qt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ku(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function no(t,e,r){(e!=="number"||mi(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var In=Array.isArray;function Gr(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Qt(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function so(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nu(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(P(92));if(In(r)){if(1<r.length)throw Error(P(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Qt(r)}}function Td(t,e){var r=Qt(e.value),n=Qt(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Eu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function io(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ts,Od=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ts=Ts||document.createElement("div"),Ts.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ts.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qn(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nm=["Webkit","ms","Moz","O"];Object.keys(Dn).forEach(function(t){Nm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dn[e]=Dn[t]})});function Ad(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Dn.hasOwnProperty(t)&&Dn[t]?(""+e).trim():e+"px"}function Id(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Ad(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Em=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ao(t,e){if(e){if(Em[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function oo(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lo=null;function yl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uo=null,Jr=null,Qr=null;function Cu(t){if(t=ws(t)){if(typeof uo!="function")throw Error(P(280));var e=t.stateNode;e&&(e=Qi(e),uo(t.stateNode,t.type,e))}}function Ld(t){Jr?Qr?Qr.push(t):Qr=[t]:Jr=t}function $d(){if(Jr){var t=Jr,e=Qr;if(Qr=Jr=null,Cu(t),e)for(t=0;t<e.length;t++)Cu(e[t])}}function Ud(t,e){return t(e)}function Dd(){}var ya=!1;function Bd(t,e,r){if(ya)return t(e,r);ya=!0;try{return Ud(t,e,r)}finally{ya=!1,(Jr!==null||Qr!==null)&&(Dd(),$d())}}function Yn(t,e){var r=t.stateNode;if(r===null)return null;var n=Qi(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(P(231,e,typeof r));return r}var co=!1;if(Nt)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){co=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{co=!1}function Cm(t,e,r,n,s,i,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var Bn=!1,gi=null,yi=!1,ho=null,Rm={onError:function(t){Bn=!0,gi=t}};function Tm(t,e,r,n,s,i,a,l,u){Bn=!1,gi=null,Cm.apply(Rm,arguments)}function Pm(t,e,r,n,s,i,a,l,u){if(Tm.apply(this,arguments),Bn){if(Bn){var c=gi;Bn=!1,gi=null}else throw Error(P(198));yi||(yi=!0,ho=c)}}function Er(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Md(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ru(t){if(Er(t)!==t)throw Error(P(188))}function Om(t){var e=t.alternate;if(!e){if(e=Er(t),e===null)throw Error(P(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ru(s),t;if(i===n)return Ru(s),e;i=i.sibling}throw Error(P(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?t:e}function Fd(t){return t=Om(t),t!==null?zd(t):null}function zd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zd(t);if(e!==null)return e;t=t.sibling}return null}var Vd=Ve.unstable_scheduleCallback,Tu=Ve.unstable_cancelCallback,Am=Ve.unstable_shouldYield,Im=Ve.unstable_requestPaint,ce=Ve.unstable_now,Lm=Ve.unstable_getCurrentPriorityLevel,vl=Ve.unstable_ImmediatePriority,Wd=Ve.unstable_UserBlockingPriority,vi=Ve.unstable_NormalPriority,$m=Ve.unstable_LowPriority,Hd=Ve.unstable_IdlePriority,qi=null,yt=null;function Um(t){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(qi,t,void 0,(t.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:Mm,Dm=Math.log,Bm=Math.LN2;function Mm(t){return t>>>=0,t===0?32:31-(Dm(t)/Bm|0)|0}var Ps=64,Os=4194304;function Ln(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xi(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Ln(l):(i&=a,i!==0&&(n=Ln(i)))}else a=r&~s,a!==0?n=Ln(a):i!==0&&(n=Ln(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ot(e),s=1<<r,n|=t[r],e&=~s;return n}function Fm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zm(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-ot(i),l=1<<a,u=s[a];u===-1?(!(l&r)||l&n)&&(s[a]=Fm(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function fo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qd(){var t=Ps;return Ps<<=1,!(Ps&4194240)&&(Ps=64),t}function va(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function vs(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ot(e),t[e]=r}function Vm(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-ot(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function xl(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ot(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Y=0;function Kd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gd,wl,Jd,Qd,Yd,po=!1,As=[],zt=null,Vt=null,Wt=null,Xn=new Map,Zn=new Map,Ut=[],Wm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pu(t,e){switch(t){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":Vt=null;break;case"mouseover":case"mouseout":Wt=null;break;case"pointerover":case"pointerout":Xn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zn.delete(e.pointerId)}}function Nn(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ws(e),e!==null&&wl(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Hm(t,e,r,n,s){switch(e){case"focusin":return zt=Nn(zt,t,e,r,n,s),!0;case"dragenter":return Vt=Nn(Vt,t,e,r,n,s),!0;case"mouseover":return Wt=Nn(Wt,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Xn.set(i,Nn(Xn.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Zn.set(i,Nn(Zn.get(i)||null,t,e,r,n,s)),!0}return!1}function Xd(t){var e=hr(t.target);if(e!==null){var r=Er(e);if(r!==null){if(e=r.tag,e===13){if(e=Md(r),e!==null){t.blockedOn=e,Yd(t.priority,function(){Jd(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ri(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=mo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);lo=n,r.target.dispatchEvent(n),lo=null}else return e=ws(r),e!==null&&wl(e),t.blockedOn=r,!1;e.shift()}return!0}function Ou(t,e,r){ri(t)&&r.delete(e)}function qm(){po=!1,zt!==null&&ri(zt)&&(zt=null),Vt!==null&&ri(Vt)&&(Vt=null),Wt!==null&&ri(Wt)&&(Wt=null),Xn.forEach(Ou),Zn.forEach(Ou)}function En(t,e){t.blockedOn===e&&(t.blockedOn=null,po||(po=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,qm)))}function es(t){function e(s){return En(s,t)}if(0<As.length){En(As[0],t);for(var r=1;r<As.length;r++){var n=As[r];n.blockedOn===t&&(n.blockedOn=null)}}for(zt!==null&&En(zt,t),Vt!==null&&En(Vt,t),Wt!==null&&En(Wt,t),Xn.forEach(e),Zn.forEach(e),r=0;r<Ut.length;r++)n=Ut[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ut.length&&(r=Ut[0],r.blockedOn===null);)Xd(r),r.blockedOn===null&&Ut.shift()}var Yr=Pt.ReactCurrentBatchConfig,wi=!0;function Km(t,e,r,n){var s=Y,i=Yr.transition;Yr.transition=null;try{Y=1,bl(t,e,r,n)}finally{Y=s,Yr.transition=i}}function Gm(t,e,r,n){var s=Y,i=Yr.transition;Yr.transition=null;try{Y=4,bl(t,e,r,n)}finally{Y=s,Yr.transition=i}}function bl(t,e,r,n){if(wi){var s=mo(t,e,r,n);if(s===null)Ca(t,e,n,bi,r),Pu(t,n);else if(Hm(s,t,e,r,n))n.stopPropagation();else if(Pu(t,n),e&4&&-1<Wm.indexOf(t)){for(;s!==null;){var i=ws(s);if(i!==null&&Gd(i),i=mo(t,e,r,n),i===null&&Ca(t,e,n,bi,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ca(t,e,n,null,r)}}var bi=null;function mo(t,e,r,n){if(bi=null,t=yl(n),t=hr(t),t!==null)if(e=Er(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Md(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bi=t,null}function Zd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lm()){case vl:return 1;case Wd:return 4;case vi:case $m:return 16;case Hd:return 536870912;default:return 16}default:return 16}}var Mt=null,_l=null,ni=null;function eh(){if(ni)return ni;var t,e=_l,r=e.length,n,s="value"in Mt?Mt.value:Mt.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return ni=s.slice(t,1<n?1-n:void 0)}function si(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Is(){return!0}function Au(){return!1}function He(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Is:Au,this.isPropagationStopped=Au,this}return le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),e}var hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jl=He(hn),xs=le({},hn,{view:0,detail:0}),Jm=He(xs),xa,wa,Cn,Ki=le({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cn&&(Cn&&t.type==="mousemove"?(xa=t.screenX-Cn.screenX,wa=t.screenY-Cn.screenY):wa=xa=0,Cn=t),xa)},movementY:function(t){return"movementY"in t?t.movementY:wa}}),Iu=He(Ki),Qm=le({},Ki,{dataTransfer:0}),Ym=He(Qm),Xm=le({},xs,{relatedTarget:0}),ba=He(Xm),Zm=le({},hn,{animationName:0,elapsedTime:0,pseudoElement:0}),eg=He(Zm),tg=le({},hn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rg=He(tg),ng=le({},hn,{data:0}),Lu=He(ng),sg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ig={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ag={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function og(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ag[t])?!!e[t]:!1}function Sl(){return og}var lg=le({},xs,{key:function(t){if(t.key){var e=sg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=si(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ig[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sl,charCode:function(t){return t.type==="keypress"?si(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?si(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ug=He(lg),cg=le({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$u=He(cg),dg=le({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sl}),hg=He(dg),fg=le({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),pg=He(fg),mg=le({},Ki,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gg=He(mg),yg=[9,13,27,32],kl=Nt&&"CompositionEvent"in window,Mn=null;Nt&&"documentMode"in document&&(Mn=document.documentMode);var vg=Nt&&"TextEvent"in window&&!Mn,th=Nt&&(!kl||Mn&&8<Mn&&11>=Mn),Uu=" ",Du=!1;function rh(t,e){switch(t){case"keyup":return yg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dr=!1;function xg(t,e){switch(t){case"compositionend":return nh(e);case"keypress":return e.which!==32?null:(Du=!0,Uu);case"textInput":return t=e.data,t===Uu&&Du?null:t;default:return null}}function wg(t,e){if(Dr)return t==="compositionend"||!kl&&rh(t,e)?(t=eh(),ni=_l=Mt=null,Dr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return th&&e.locale!=="ko"?null:e.data;default:return null}}var bg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bg[t.type]:e==="textarea"}function sh(t,e,r,n){Ld(n),e=_i(e,"onChange"),0<e.length&&(r=new jl("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Fn=null,ts=null;function _g(t){mh(t,0)}function Gi(t){var e=Fr(t);if(Cd(e))return t}function jg(t,e){if(t==="change")return e}var ih=!1;if(Nt){var _a;if(Nt){var ja="oninput"in document;if(!ja){var Mu=document.createElement("div");Mu.setAttribute("oninput","return;"),ja=typeof Mu.oninput=="function"}_a=ja}else _a=!1;ih=_a&&(!document.documentMode||9<document.documentMode)}function Fu(){Fn&&(Fn.detachEvent("onpropertychange",ah),ts=Fn=null)}function ah(t){if(t.propertyName==="value"&&Gi(ts)){var e=[];sh(e,ts,t,yl(t)),Bd(_g,e)}}function Sg(t,e,r){t==="focusin"?(Fu(),Fn=e,ts=r,Fn.attachEvent("onpropertychange",ah)):t==="focusout"&&Fu()}function kg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gi(ts)}function Ng(t,e){if(t==="click")return Gi(e)}function Eg(t,e){if(t==="input"||t==="change")return Gi(e)}function Cg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ut=typeof Object.is=="function"?Object.is:Cg;function rs(t,e){if(ut(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Qa.call(e,s)||!ut(t[s],e[s]))return!1}return!0}function zu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vu(t,e){var r=zu(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zu(r)}}function oh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lh(){for(var t=window,e=mi();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=mi(t.document)}return e}function Nl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rg(t){var e=lh(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&oh(r.ownerDocument.documentElement,r)){if(n!==null&&Nl(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Vu(r,i);var a=Vu(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tg=Nt&&"documentMode"in document&&11>=document.documentMode,Br=null,go=null,zn=null,yo=!1;function Wu(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yo||Br==null||Br!==mi(n)||(n=Br,"selectionStart"in n&&Nl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),zn&&rs(zn,n)||(zn=n,n=_i(go,"onSelect"),0<n.length&&(e=new jl("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Br)))}function Ls(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Mr={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionend:Ls("Transition","TransitionEnd")},Sa={},uh={};Nt&&(uh=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function Ji(t){if(Sa[t])return Sa[t];if(!Mr[t])return t;var e=Mr[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in uh)return Sa[t]=e[r];return t}var ch=Ji("animationend"),dh=Ji("animationiteration"),hh=Ji("animationstart"),fh=Ji("transitionend"),ph=new Map,Hu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xt(t,e){ph.set(t,e),Nr(e,[t])}for(var ka=0;ka<Hu.length;ka++){var Na=Hu[ka],Pg=Na.toLowerCase(),Og=Na[0].toUpperCase()+Na.slice(1);Xt(Pg,"on"+Og)}Xt(ch,"onAnimationEnd");Xt(dh,"onAnimationIteration");Xt(hh,"onAnimationStart");Xt("dblclick","onDoubleClick");Xt("focusin","onFocus");Xt("focusout","onBlur");Xt(fh,"onTransitionEnd");tn("onMouseEnter",["mouseout","mouseover"]);tn("onMouseLeave",["mouseout","mouseover"]);tn("onPointerEnter",["pointerout","pointerover"]);tn("onPointerLeave",["pointerout","pointerover"]);Nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $n="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ag=new Set("cancel close invalid load scroll toggle".split(" ").concat($n));function qu(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Pm(n,e,void 0,t),t.currentTarget=null}function mh(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;qu(s,l,c),i=u}else for(a=0;a<n.length;a++){if(l=n[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;qu(s,l,c),i=u}}}if(yi)throw t=ho,yi=!1,ho=null,t}function te(t,e){var r=e[_o];r===void 0&&(r=e[_o]=new Set);var n=t+"__bubble";r.has(n)||(gh(e,t,2,!1),r.add(n))}function Ea(t,e,r){var n=0;e&&(n|=4),gh(r,t,n,e)}var $s="_reactListening"+Math.random().toString(36).slice(2);function ns(t){if(!t[$s]){t[$s]=!0,jd.forEach(function(r){r!=="selectionchange"&&(Ag.has(r)||Ea(r,!1,t),Ea(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$s]||(e[$s]=!0,Ea("selectionchange",!1,e))}}function gh(t,e,r,n){switch(Zd(e)){case 1:var s=Km;break;case 4:s=Gm;break;default:s=bl}r=s.bind(null,e,r,t),s=void 0,!co||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Ca(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=hr(l),a===null)return;if(u=a.tag,u===5||u===6){n=i=a;continue e}l=l.parentNode}}n=n.return}Bd(function(){var c=i,d=yl(r),h=[];e:{var p=ph.get(t);if(p!==void 0){var y=jl,v=t;switch(t){case"keypress":if(si(r)===0)break e;case"keydown":case"keyup":y=ug;break;case"focusin":v="focus",y=ba;break;case"focusout":v="blur",y=ba;break;case"beforeblur":case"afterblur":y=ba;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Ym;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=hg;break;case ch:case dh:case hh:y=eg;break;case fh:y=pg;break;case"scroll":y=Jm;break;case"wheel":y=gg;break;case"copy":case"cut":case"paste":y=rg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=$u}var w=(e&4)!==0,b=!w&&t==="scroll",g=w?p!==null?p+"Capture":null:p;w=[];for(var f=c,m;f!==null;){m=f;var _=m.stateNode;if(m.tag===5&&_!==null&&(m=_,g!==null&&(_=Yn(f,g),_!=null&&w.push(ss(f,_,m)))),b)break;f=f.return}0<w.length&&(p=new y(p,v,null,r,d),h.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&r!==lo&&(v=r.relatedTarget||r.fromElement)&&(hr(v)||v[Et]))break e;if((y||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,y?(v=r.relatedTarget||r.toElement,y=c,v=v?hr(v):null,v!==null&&(b=Er(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=c),y!==v)){if(w=Iu,_="onMouseLeave",g="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(w=$u,_="onPointerLeave",g="onPointerEnter",f="pointer"),b=y==null?p:Fr(y),m=v==null?p:Fr(v),p=new w(_,f+"leave",y,r,d),p.target=b,p.relatedTarget=m,_=null,hr(d)===c&&(w=new w(g,f+"enter",v,r,d),w.target=m,w.relatedTarget=b,_=w),b=_,y&&v)t:{for(w=y,g=v,f=0,m=w;m;m=Cr(m))f++;for(m=0,_=g;_;_=Cr(_))m++;for(;0<f-m;)w=Cr(w),f--;for(;0<m-f;)g=Cr(g),m--;for(;f--;){if(w===g||g!==null&&w===g.alternate)break t;w=Cr(w),g=Cr(g)}w=null}else w=null;y!==null&&Ku(h,p,y,w,!1),v!==null&&b!==null&&Ku(h,b,v,w,!0)}}e:{if(p=c?Fr(c):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var j=jg;else if(Bu(p))if(ih)j=Eg;else{j=kg;var S=Sg}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=Ng);if(j&&(j=j(t,c))){sh(h,j,r,d);break e}S&&S(t,p,c),t==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&no(p,"number",p.value)}switch(S=c?Fr(c):window,t){case"focusin":(Bu(S)||S.contentEditable==="true")&&(Br=S,go=c,zn=null);break;case"focusout":zn=go=Br=null;break;case"mousedown":yo=!0;break;case"contextmenu":case"mouseup":case"dragend":yo=!1,Wu(h,r,d);break;case"selectionchange":if(Tg)break;case"keydown":case"keyup":Wu(h,r,d)}var N;if(kl)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Dr?rh(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(th&&r.locale!=="ko"&&(Dr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Dr&&(N=eh()):(Mt=d,_l="value"in Mt?Mt.value:Mt.textContent,Dr=!0)),S=_i(c,E),0<S.length&&(E=new Lu(E,t,null,r,d),h.push({event:E,listeners:S}),N?E.data=N:(N=nh(r),N!==null&&(E.data=N)))),(N=vg?xg(t,r):wg(t,r))&&(c=_i(c,"onBeforeInput"),0<c.length&&(d=new Lu("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=N))}mh(h,e)})}function ss(t,e,r){return{instance:t,listener:e,currentTarget:r}}function _i(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Yn(t,r),i!=null&&n.unshift(ss(t,i,s)),i=Yn(t,e),i!=null&&n.push(ss(t,i,s))),t=t.return}return n}function Cr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ku(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&c!==null&&(l=c,s?(u=Yn(r,i),u!=null&&a.unshift(ss(r,u,l))):s||(u=Yn(r,i),u!=null&&a.push(ss(r,u,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Ig=/\r\n?/g,Lg=/\u0000|\uFFFD/g;function Gu(t){return(typeof t=="string"?t:""+t).replace(Ig,`
`).replace(Lg,"")}function Us(t,e,r){if(e=Gu(e),Gu(t)!==e&&r)throw Error(P(425))}function ji(){}var vo=null,xo=null;function wo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bo=typeof setTimeout=="function"?setTimeout:void 0,$g=typeof clearTimeout=="function"?clearTimeout:void 0,Ju=typeof Promise=="function"?Promise:void 0,Ug=typeof queueMicrotask=="function"?queueMicrotask:typeof Ju<"u"?function(t){return Ju.resolve(null).then(t).catch(Dg)}:bo;function Dg(t){setTimeout(function(){throw t})}function Ra(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),es(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);es(e)}function Ht(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var fn=Math.random().toString(36).slice(2),gt="__reactFiber$"+fn,is="__reactProps$"+fn,Et="__reactContainer$"+fn,_o="__reactEvents$"+fn,Bg="__reactListeners$"+fn,Mg="__reactHandles$"+fn;function hr(t){var e=t[gt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Et]||r[gt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Qu(t);t!==null;){if(r=t[gt])return r;t=Qu(t)}return e}t=r,r=t.parentNode}return null}function ws(t){return t=t[gt]||t[Et],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function Qi(t){return t[is]||null}var jo=[],zr=-1;function Zt(t){return{current:t}}function re(t){0>zr||(t.current=jo[zr],jo[zr]=null,zr--)}function ee(t,e){zr++,jo[zr]=t.current,t.current=e}var Yt={},Ee=Zt(Yt),Le=Zt(!1),vr=Yt;function rn(t,e){var r=t.type.contextTypes;if(!r)return Yt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $e(t){return t=t.childContextTypes,t!=null}function Si(){re(Le),re(Ee)}function Yu(t,e,r){if(Ee.current!==Yt)throw Error(P(168));ee(Ee,e),ee(Le,r)}function yh(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(P(108,Sm(t)||"Unknown",s));return le({},r,n)}function ki(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yt,vr=Ee.current,ee(Ee,t),ee(Le,Le.current),!0}function Xu(t,e,r){var n=t.stateNode;if(!n)throw Error(P(169));r?(t=yh(t,e,vr),n.__reactInternalMemoizedMergedChildContext=t,re(Le),re(Ee),ee(Ee,t)):re(Le),ee(Le,r)}var bt=null,Yi=!1,Ta=!1;function vh(t){bt===null?bt=[t]:bt.push(t)}function Fg(t){Yi=!0,vh(t)}function er(){if(!Ta&&bt!==null){Ta=!0;var t=0,e=Y;try{var r=bt;for(Y=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}bt=null,Yi=!1}catch(s){throw bt!==null&&(bt=bt.slice(t+1)),Vd(vl,er),s}finally{Y=e,Ta=!1}}return null}var Vr=[],Wr=0,Ni=null,Ei=0,Ge=[],Je=0,xr=null,_t=1,jt="";function ar(t,e){Vr[Wr++]=Ei,Vr[Wr++]=Ni,Ni=t,Ei=e}function xh(t,e,r){Ge[Je++]=_t,Ge[Je++]=jt,Ge[Je++]=xr,xr=t;var n=_t;t=jt;var s=32-ot(n)-1;n&=~(1<<s),r+=1;var i=32-ot(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,_t=1<<32-ot(e)+s|r<<s|n,jt=i+t}else _t=1<<i|r<<s|n,jt=t}function El(t){t.return!==null&&(ar(t,1),xh(t,1,0))}function Cl(t){for(;t===Ni;)Ni=Vr[--Wr],Vr[Wr]=null,Ei=Vr[--Wr],Vr[Wr]=null;for(;t===xr;)xr=Ge[--Je],Ge[Je]=null,jt=Ge[--Je],Ge[Je]=null,_t=Ge[--Je],Ge[Je]=null}var ze=null,Fe=null,ne=!1,at=null;function wh(t,e){var r=Qe(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Zu(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ze=t,Fe=Ht(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ze=t,Fe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=xr!==null?{id:_t,overflow:jt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Qe(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ze=t,Fe=null,!0):!1;default:return!1}}function So(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ko(t){if(ne){var e=Fe;if(e){var r=e;if(!Zu(t,e)){if(So(t))throw Error(P(418));e=Ht(r.nextSibling);var n=ze;e&&Zu(t,e)?wh(n,r):(t.flags=t.flags&-4097|2,ne=!1,ze=t)}}else{if(So(t))throw Error(P(418));t.flags=t.flags&-4097|2,ne=!1,ze=t}}}function ec(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ze=t}function Ds(t){if(t!==ze)return!1;if(!ne)return ec(t),ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wo(t.type,t.memoizedProps)),e&&(e=Fe)){if(So(t))throw bh(),Error(P(418));for(;e;)wh(t,e),e=Ht(e.nextSibling)}if(ec(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Fe=Ht(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Fe=null}}else Fe=ze?Ht(t.stateNode.nextSibling):null;return!0}function bh(){for(var t=Fe;t;)t=Ht(t.nextSibling)}function nn(){Fe=ze=null,ne=!1}function Rl(t){at===null?at=[t]:at.push(t)}var zg=Pt.ReactCurrentBatchConfig;function Rn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,t))}return t}function Bs(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tc(t){var e=t._init;return e(t._payload)}function _h(t){function e(g,f){if(t){var m=g.deletions;m===null?(g.deletions=[f],g.flags|=16):m.push(f)}}function r(g,f){if(!t)return null;for(;f!==null;)e(g,f),f=f.sibling;return null}function n(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function s(g,f){return g=Jt(g,f),g.index=0,g.sibling=null,g}function i(g,f,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<f?(g.flags|=2,f):m):(g.flags|=2,f)):(g.flags|=1048576,f)}function a(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,f,m,_){return f===null||f.tag!==6?(f=Ua(m,g.mode,_),f.return=g,f):(f=s(f,m),f.return=g,f)}function u(g,f,m,_){var j=m.type;return j===Ur?d(g,f,m.props.children,_,m.key):f!==null&&(f.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Lt&&tc(j)===f.type)?(_=s(f,m.props),_.ref=Rn(g,f,m),_.return=g,_):(_=di(m.type,m.key,m.props,null,g.mode,_),_.ref=Rn(g,f,m),_.return=g,_)}function c(g,f,m,_){return f===null||f.tag!==4||f.stateNode.containerInfo!==m.containerInfo||f.stateNode.implementation!==m.implementation?(f=Da(m,g.mode,_),f.return=g,f):(f=s(f,m.children||[]),f.return=g,f)}function d(g,f,m,_,j){return f===null||f.tag!==7?(f=yr(m,g.mode,_,j),f.return=g,f):(f=s(f,m),f.return=g,f)}function h(g,f,m){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Ua(""+f,g.mode,m),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Cs:return m=di(f.type,f.key,f.props,null,g.mode,m),m.ref=Rn(g,null,f),m.return=g,m;case $r:return f=Da(f,g.mode,m),f.return=g,f;case Lt:var _=f._init;return h(g,_(f._payload),m)}if(In(f)||Sn(f))return f=yr(f,g.mode,m,null),f.return=g,f;Bs(g,f)}return null}function p(g,f,m,_){var j=f!==null?f.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return j!==null?null:l(g,f,""+m,_);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Cs:return m.key===j?u(g,f,m,_):null;case $r:return m.key===j?c(g,f,m,_):null;case Lt:return j=m._init,p(g,f,j(m._payload),_)}if(In(m)||Sn(m))return j!==null?null:d(g,f,m,_,null);Bs(g,m)}return null}function y(g,f,m,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(m)||null,l(f,g,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Cs:return g=g.get(_.key===null?m:_.key)||null,u(f,g,_,j);case $r:return g=g.get(_.key===null?m:_.key)||null,c(f,g,_,j);case Lt:var S=_._init;return y(g,f,m,S(_._payload),j)}if(In(_)||Sn(_))return g=g.get(m)||null,d(f,g,_,j,null);Bs(f,_)}return null}function v(g,f,m,_){for(var j=null,S=null,N=f,E=f=0,C=null;N!==null&&E<m.length;E++){N.index>E?(C=N,N=null):C=N.sibling;var k=p(g,N,m[E],_);if(k===null){N===null&&(N=C);break}t&&N&&k.alternate===null&&e(g,N),f=i(k,f,E),S===null?j=k:S.sibling=k,S=k,N=C}if(E===m.length)return r(g,N),ne&&ar(g,E),j;if(N===null){for(;E<m.length;E++)N=h(g,m[E],_),N!==null&&(f=i(N,f,E),S===null?j=N:S.sibling=N,S=N);return ne&&ar(g,E),j}for(N=n(g,N);E<m.length;E++)C=y(N,g,E,m[E],_),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?E:C.key),f=i(C,f,E),S===null?j=C:S.sibling=C,S=C);return t&&N.forEach(function(B){return e(g,B)}),ne&&ar(g,E),j}function w(g,f,m,_){var j=Sn(m);if(typeof j!="function")throw Error(P(150));if(m=j.call(m),m==null)throw Error(P(151));for(var S=j=null,N=f,E=f=0,C=null,k=m.next();N!==null&&!k.done;E++,k=m.next()){N.index>E?(C=N,N=null):C=N.sibling;var B=p(g,N,k.value,_);if(B===null){N===null&&(N=C);break}t&&N&&B.alternate===null&&e(g,N),f=i(B,f,E),S===null?j=B:S.sibling=B,S=B,N=C}if(k.done)return r(g,N),ne&&ar(g,E),j;if(N===null){for(;!k.done;E++,k=m.next())k=h(g,k.value,_),k!==null&&(f=i(k,f,E),S===null?j=k:S.sibling=k,S=k);return ne&&ar(g,E),j}for(N=n(g,N);!k.done;E++,k=m.next())k=y(N,g,E,k.value,_),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?E:k.key),f=i(k,f,E),S===null?j=k:S.sibling=k,S=k);return t&&N.forEach(function(L){return e(g,L)}),ne&&ar(g,E),j}function b(g,f,m,_){if(typeof m=="object"&&m!==null&&m.type===Ur&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Cs:e:{for(var j=m.key,S=f;S!==null;){if(S.key===j){if(j=m.type,j===Ur){if(S.tag===7){r(g,S.sibling),f=s(S,m.props.children),f.return=g,g=f;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Lt&&tc(j)===S.type){r(g,S.sibling),f=s(S,m.props),f.ref=Rn(g,S,m),f.return=g,g=f;break e}r(g,S);break}else e(g,S);S=S.sibling}m.type===Ur?(f=yr(m.props.children,g.mode,_,m.key),f.return=g,g=f):(_=di(m.type,m.key,m.props,null,g.mode,_),_.ref=Rn(g,f,m),_.return=g,g=_)}return a(g);case $r:e:{for(S=m.key;f!==null;){if(f.key===S)if(f.tag===4&&f.stateNode.containerInfo===m.containerInfo&&f.stateNode.implementation===m.implementation){r(g,f.sibling),f=s(f,m.children||[]),f.return=g,g=f;break e}else{r(g,f);break}else e(g,f);f=f.sibling}f=Da(m,g.mode,_),f.return=g,g=f}return a(g);case Lt:return S=m._init,b(g,f,S(m._payload),_)}if(In(m))return v(g,f,m,_);if(Sn(m))return w(g,f,m,_);Bs(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,f!==null&&f.tag===6?(r(g,f.sibling),f=s(f,m),f.return=g,g=f):(r(g,f),f=Ua(m,g.mode,_),f.return=g,g=f),a(g)):r(g,f)}return b}var sn=_h(!0),jh=_h(!1),Ci=Zt(null),Ri=null,Hr=null,Tl=null;function Pl(){Tl=Hr=Ri=null}function Ol(t){var e=Ci.current;re(Ci),t._currentValue=e}function No(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Xr(t,e){Ri=t,Tl=Hr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ie=!0),t.firstContext=null)}function Xe(t){var e=t._currentValue;if(Tl!==t)if(t={context:t,memoizedValue:e,next:null},Hr===null){if(Ri===null)throw Error(P(308));Hr=t,Ri.dependencies={lanes:0,firstContext:t}}else Hr=Hr.next=t;return e}var fr=null;function Al(t){fr===null?fr=[t]:fr.push(t)}function Sh(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Al(e)):(r.next=s.next,s.next=r),e.interleaved=r,Ct(t,n)}function Ct(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var $t=!1;function Il(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function St(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qt(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,G&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Ct(t,r)}return s=n.interleaved,s===null?(e.next=e,Al(n)):(e.next=s.next,s.next=e),n.interleaved=e,Ct(t,r)}function ii(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,xl(t,r)}}function rc(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ti(t,e,r,n){var s=t.updateQueue;$t=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?i=c:a.next=c,a=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;a=0,d=c=u=null,l=i;do{var p=l.lane,y=l.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,w=l;switch(p=e,y=r,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(y,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,p=typeof v=="function"?v.call(y,h,p):v,p==null)break e;h=le({},h,p);break e;case 2:$t=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else y={eventTime:y,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=y,u=h):d=d.next=y,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);br|=a,t.lanes=a,t.memoizedState=h}}function nc(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(P(191,s));s.call(n)}}}var bs={},vt=Zt(bs),as=Zt(bs),os=Zt(bs);function pr(t){if(t===bs)throw Error(P(174));return t}function Ll(t,e){switch(ee(os,e),ee(as,t),ee(vt,bs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:io(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=io(e,t)}re(vt),ee(vt,e)}function an(){re(vt),re(as),re(os)}function Nh(t){pr(os.current);var e=pr(vt.current),r=io(e,t.type);e!==r&&(ee(as,t),ee(vt,r))}function $l(t){as.current===t&&(re(vt),re(as))}var ae=Zt(0);function Pi(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pa=[];function Ul(){for(var t=0;t<Pa.length;t++)Pa[t]._workInProgressVersionPrimary=null;Pa.length=0}var ai=Pt.ReactCurrentDispatcher,Oa=Pt.ReactCurrentBatchConfig,wr=0,oe=null,me=null,ye=null,Oi=!1,Vn=!1,ls=0,Vg=0;function je(){throw Error(P(321))}function Dl(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ut(t[r],e[r]))return!1;return!0}function Bl(t,e,r,n,s,i){if(wr=i,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ai.current=t===null||t.memoizedState===null?Kg:Gg,t=r(n,s),Vn){i=0;do{if(Vn=!1,ls=0,25<=i)throw Error(P(301));i+=1,ye=me=null,e.updateQueue=null,ai.current=Jg,t=r(n,s)}while(Vn)}if(ai.current=Ai,e=me!==null&&me.next!==null,wr=0,ye=me=oe=null,Oi=!1,e)throw Error(P(300));return t}function Ml(){var t=ls!==0;return ls=0,t}function mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?oe.memoizedState=ye=t:ye=ye.next=t,ye}function Ze(){if(me===null){var t=oe.alternate;t=t!==null?t.memoizedState:null}else t=me.next;var e=ye===null?oe.memoizedState:ye.next;if(e!==null)ye=e,me=t;else{if(t===null)throw Error(P(310));me=t,t={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},ye===null?oe.memoizedState=ye=t:ye=ye.next=t}return ye}function us(t,e){return typeof e=="function"?e(t):e}function Aa(t){var e=Ze(),r=e.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=t;var n=me,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,u=null,c=i;do{var d=c.lane;if((wr&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,a=n):u=u.next=h,oe.lanes|=d,br|=d}c=c.next}while(c!==null&&c!==i);u===null?a=n:u.next=l,ut(n,e.memoizedState)||(Ie=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,oe.lanes|=i,br|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ia(t){var e=Ze(),r=e.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);ut(i,e.memoizedState)||(Ie=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function Eh(){}function Ch(t,e){var r=oe,n=Ze(),s=e(),i=!ut(n.memoizedState,s);if(i&&(n.memoizedState=s,Ie=!0),n=n.queue,Fl(Ph.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||ye!==null&&ye.memoizedState.tag&1){if(r.flags|=2048,cs(9,Th.bind(null,r,n,s,e),void 0,null),ve===null)throw Error(P(349));wr&30||Rh(r,e,s)}return s}function Rh(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Th(t,e,r,n){e.value=r,e.getSnapshot=n,Oh(e)&&Ah(t)}function Ph(t,e,r){return r(function(){Oh(e)&&Ah(t)})}function Oh(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ut(t,r)}catch{return!0}}function Ah(t){var e=Ct(t,1);e!==null&&lt(e,t,1,-1)}function sc(t){var e=mt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:t},e.queue=t,t=t.dispatch=qg.bind(null,oe,t),[e.memoizedState,t]}function cs(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Ih(){return Ze().memoizedState}function oi(t,e,r,n){var s=mt();oe.flags|=t,s.memoizedState=cs(1|e,r,void 0,n===void 0?null:n)}function Xi(t,e,r,n){var s=Ze();n=n===void 0?null:n;var i=void 0;if(me!==null){var a=me.memoizedState;if(i=a.destroy,n!==null&&Dl(n,a.deps)){s.memoizedState=cs(e,r,i,n);return}}oe.flags|=t,s.memoizedState=cs(1|e,r,i,n)}function ic(t,e){return oi(8390656,8,t,e)}function Fl(t,e){return Xi(2048,8,t,e)}function Lh(t,e){return Xi(4,2,t,e)}function $h(t,e){return Xi(4,4,t,e)}function Uh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dh(t,e,r){return r=r!=null?r.concat([t]):null,Xi(4,4,Uh.bind(null,e,t),r)}function zl(){}function Bh(t,e){var r=Ze();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Dl(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Mh(t,e){var r=Ze();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Dl(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Fh(t,e,r){return wr&21?(ut(r,e)||(r=qd(),oe.lanes|=r,br|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ie=!0),t.memoizedState=r)}function Wg(t,e){var r=Y;Y=r!==0&&4>r?r:4,t(!0);var n=Oa.transition;Oa.transition={};try{t(!1),e()}finally{Y=r,Oa.transition=n}}function zh(){return Ze().memoizedState}function Hg(t,e,r){var n=Gt(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Vh(t))Wh(e,r);else if(r=Sh(t,e,r,n),r!==null){var s=Te();lt(r,t,n,s),Hh(r,e,n)}}function qg(t,e,r){var n=Gt(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Vh(t))Wh(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,ut(l,a)){var u=e.interleaved;u===null?(s.next=s,Al(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=Sh(t,e,s,n),r!==null&&(s=Te(),lt(r,t,n,s),Hh(r,e,n))}}function Vh(t){var e=t.alternate;return t===oe||e!==null&&e===oe}function Wh(t,e){Vn=Oi=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Hh(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,xl(t,r)}}var Ai={readContext:Xe,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},Kg={readContext:Xe,useCallback:function(t,e){return mt().memoizedState=[t,e===void 0?null:e],t},useContext:Xe,useEffect:ic,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,oi(4194308,4,Uh.bind(null,e,t),r)},useLayoutEffect:function(t,e){return oi(4194308,4,t,e)},useInsertionEffect:function(t,e){return oi(4,2,t,e)},useMemo:function(t,e){var r=mt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=mt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Hg.bind(null,oe,t),[n.memoizedState,t]},useRef:function(t){var e=mt();return t={current:t},e.memoizedState=t},useState:sc,useDebugValue:zl,useDeferredValue:function(t){return mt().memoizedState=t},useTransition:function(){var t=sc(!1),e=t[0];return t=Wg.bind(null,t[1]),mt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=oe,s=mt();if(ne){if(r===void 0)throw Error(P(407));r=r()}else{if(r=e(),ve===null)throw Error(P(349));wr&30||Rh(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,ic(Ph.bind(null,n,i,t),[t]),n.flags|=2048,cs(9,Th.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=mt(),e=ve.identifierPrefix;if(ne){var r=jt,n=_t;r=(n&~(1<<32-ot(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ls++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Vg++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gg={readContext:Xe,useCallback:Bh,useContext:Xe,useEffect:Fl,useImperativeHandle:Dh,useInsertionEffect:Lh,useLayoutEffect:$h,useMemo:Mh,useReducer:Aa,useRef:Ih,useState:function(){return Aa(us)},useDebugValue:zl,useDeferredValue:function(t){var e=Ze();return Fh(e,me.memoizedState,t)},useTransition:function(){var t=Aa(us)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:Eh,useSyncExternalStore:Ch,useId:zh,unstable_isNewReconciler:!1},Jg={readContext:Xe,useCallback:Bh,useContext:Xe,useEffect:Fl,useImperativeHandle:Dh,useInsertionEffect:Lh,useLayoutEffect:$h,useMemo:Mh,useReducer:Ia,useRef:Ih,useState:function(){return Ia(us)},useDebugValue:zl,useDeferredValue:function(t){var e=Ze();return me===null?e.memoizedState=t:Fh(e,me.memoizedState,t)},useTransition:function(){var t=Ia(us)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:Eh,useSyncExternalStore:Ch,useId:zh,unstable_isNewReconciler:!1};function nt(t,e){if(t&&t.defaultProps){e=le({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Eo(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:le({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Zi={isMounted:function(t){return(t=t._reactInternals)?Er(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Te(),s=Gt(t),i=St(n,s);i.payload=e,r!=null&&(i.callback=r),e=qt(t,i,s),e!==null&&(lt(e,t,s,n),ii(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Te(),s=Gt(t),i=St(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=qt(t,i,s),e!==null&&(lt(e,t,s,n),ii(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Te(),n=Gt(t),s=St(r,n);s.tag=2,e!=null&&(s.callback=e),e=qt(t,s,n),e!==null&&(lt(e,t,n,r),ii(e,t,n))}};function ac(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!rs(r,n)||!rs(s,i):!0}function qh(t,e,r){var n=!1,s=Yt,i=e.contextType;return typeof i=="object"&&i!==null?i=Xe(i):(s=$e(e)?vr:Ee.current,n=e.contextTypes,i=(n=n!=null)?rn(t,s):Yt),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zi,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function oc(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Zi.enqueueReplaceState(e,e.state,null)}function Co(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Il(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xe(i):(i=$e(e)?vr:Ee.current,s.context=rn(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Eo(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Zi.enqueueReplaceState(s,s.state,null),Ti(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function on(t,e){try{var r="",n=e;do r+=jm(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function La(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Ro(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Qg=typeof WeakMap=="function"?WeakMap:Map;function Kh(t,e,r){r=St(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Li||(Li=!0,Bo=n),Ro(t,e)},r}function Gh(t,e,r){r=St(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Ro(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ro(t,e),typeof n!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function lc(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Qg;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=c0.bind(null,t,e,r),e.then(t,t))}function uc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cc(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=St(-1,1),e.tag=2,qt(r,e,1))),r.lanes|=1),t)}var Yg=Pt.ReactCurrentOwner,Ie=!1;function Ce(t,e,r,n){e.child=t===null?jh(e,null,r,n):sn(e,t.child,r,n)}function dc(t,e,r,n,s){r=r.render;var i=e.ref;return Xr(e,s),n=Bl(t,e,r,n,i,s),r=Ml(),t!==null&&!Ie?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Rt(t,e,s)):(ne&&r&&El(e),e.flags|=1,Ce(t,e,n,s),e.child)}function hc(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Ql(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Jh(t,e,i,n,s)):(t=di(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:rs,r(a,n)&&t.ref===e.ref)return Rt(t,e,s)}return e.flags|=1,t=Jt(i,n),t.ref=e.ref,t.return=e,e.child=t}function Jh(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(rs(i,n)&&t.ref===e.ref)if(Ie=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Ie=!0);else return e.lanes=t.lanes,Rt(t,e,s)}return To(t,e,r,n,s)}function Qh(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(Kr,De),De|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ee(Kr,De),De|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ee(Kr,De),De|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,ee(Kr,De),De|=n;return Ce(t,e,s,r),e.child}function Yh(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function To(t,e,r,n,s){var i=$e(r)?vr:Ee.current;return i=rn(e,i),Xr(e,s),r=Bl(t,e,r,n,i,s),n=Ml(),t!==null&&!Ie?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Rt(t,e,s)):(ne&&n&&El(e),e.flags|=1,Ce(t,e,r,s),e.child)}function fc(t,e,r,n,s){if($e(r)){var i=!0;ki(e)}else i=!1;if(Xr(e,s),e.stateNode===null)li(t,e),qh(e,r,n),Co(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Xe(c):(c=$e(r)?vr:Ee.current,c=rn(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||u!==c)&&oc(e,a,n,c),$t=!1;var p=e.memoizedState;a.state=p,Ti(e,n,a,s),u=e.memoizedState,l!==n||p!==u||Le.current||$t?(typeof d=="function"&&(Eo(e,r,d,n),u=e.memoizedState),(l=$t||ac(e,r,l,n,p,u,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=c,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,kh(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:nt(e.type,l),a.props=c,h=e.pendingProps,p=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Xe(u):(u=$e(r)?vr:Ee.current,u=rn(e,u));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||p!==u)&&oc(e,a,n,u),$t=!1,p=e.memoizedState,a.state=p,Ti(e,n,a,s);var v=e.memoizedState;l!==h||p!==v||Le.current||$t?(typeof y=="function"&&(Eo(e,r,y,n),v=e.memoizedState),(c=$t||ac(e,r,c,n,p,v,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=u,n=c):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return Po(t,e,r,n,i,s)}function Po(t,e,r,n,s,i){Yh(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&Xu(e,r,!1),Rt(t,e,i);n=e.stateNode,Yg.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=sn(e,t.child,null,i),e.child=sn(e,null,l,i)):Ce(t,e,l,i),e.memoizedState=n.state,s&&Xu(e,r,!0),e.child}function Xh(t){var e=t.stateNode;e.pendingContext?Yu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yu(t,e.context,!1),Ll(t,e.containerInfo)}function pc(t,e,r,n,s){return nn(),Rl(s),e.flags|=256,Ce(t,e,r,n),e.child}var Oo={dehydrated:null,treeContext:null,retryLane:0};function Ao(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zh(t,e,r){var n=e.pendingProps,s=ae.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ee(ae,s&1),t===null)return ko(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ra(a,n,0,null),t=yr(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ao(r),e.memoizedState=Oo,t):Vl(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Xg(t,e,a,n,l,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=Jt(s,u),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Jt(l,i):(i=yr(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?Ao(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=Oo,n}return i=t.child,t=i.sibling,n=Jt(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Vl(t,e){return e=ra({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ms(t,e,r,n){return n!==null&&Rl(n),sn(e,t.child,null,r),t=Vl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xg(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=La(Error(P(422))),Ms(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=ra({mode:"visible",children:n.children},s,0,null),i=yr(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&sn(e,t.child,null,a),e.child.memoizedState=Ao(a),e.memoizedState=Oo,i);if(!(e.mode&1))return Ms(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(P(419)),n=La(i,n,void 0),Ms(t,e,a,n)}if(l=(a&t.childLanes)!==0,Ie||l){if(n=ve,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ct(t,s),lt(n,t,s,-1))}return Jl(),n=La(Error(P(421))),Ms(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=d0.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fe=Ht(s.nextSibling),ze=e,ne=!0,at=null,t!==null&&(Ge[Je++]=_t,Ge[Je++]=jt,Ge[Je++]=xr,_t=t.id,jt=t.overflow,xr=e),e=Vl(e,n.children),e.flags|=4096,e)}function mc(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),No(t.return,e,r)}function $a(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function ef(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Ce(t,e,n.children,r),n=ae.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mc(t,r,e);else if(t.tag===19)mc(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ee(ae,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Pi(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),$a(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pi(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}$a(e,!0,r,null,i);break;case"together":$a(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function li(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),br|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,r=Jt(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Jt(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Zg(t,e,r){switch(e.tag){case 3:Xh(e),nn();break;case 5:Nh(e);break;case 1:$e(e.type)&&ki(e);break;case 4:Ll(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;ee(Ci,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ee(ae,ae.current&1),e.flags|=128,null):r&e.child.childLanes?Zh(t,e,r):(ee(ae,ae.current&1),t=Rt(t,e,r),t!==null?t.sibling:null);ee(ae,ae.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return ef(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ee(ae,ae.current),n)break;return null;case 22:case 23:return e.lanes=0,Qh(t,e,r)}return Rt(t,e,r)}var tf,Io,rf,nf;tf=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Io=function(){};rf=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,pr(vt.current);var i=null;switch(r){case"input":s=to(t,s),n=to(t,n),i=[];break;case"select":s=le({},s,{value:void 0}),n=le({},n,{value:void 0}),i=[];break;case"textarea":s=so(t,s),n=so(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ji)}ao(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jn.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var u=n[c];if(l=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(i||(i=[]),i.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jn.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&te("scroll",t),i||l===u||(i=[])):(i=i||[]).push(c,u))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};nf=function(t,e,r,n){r!==n&&(e.flags|=4)};function Tn(t,e){if(!ne)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Se(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function e0(t,e,r){var n=e.pendingProps;switch(Cl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(e),null;case 1:return $e(e.type)&&Si(),Se(e),null;case 3:return n=e.stateNode,an(),re(Le),re(Ee),Ul(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ds(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,at!==null&&(zo(at),at=null))),Io(t,e),Se(e),null;case 5:$l(e);var s=pr(os.current);if(r=e.type,t!==null&&e.stateNode!=null)rf(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(P(166));return Se(e),null}if(t=pr(vt.current),Ds(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[gt]=e,n[is]=i,t=(e.mode&1)!==0,r){case"dialog":te("cancel",n),te("close",n);break;case"iframe":case"object":case"embed":te("load",n);break;case"video":case"audio":for(s=0;s<$n.length;s++)te($n[s],n);break;case"source":te("error",n);break;case"img":case"image":case"link":te("error",n),te("load",n);break;case"details":te("toggle",n);break;case"input":Su(n,i),te("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},te("invalid",n);break;case"textarea":Nu(n,i),te("invalid",n)}ao(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Us(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Us(n.textContent,l,t),s=["children",""+l]):Jn.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&te("scroll",n)}switch(r){case"input":Rs(n),ku(n,i,!0);break;case"textarea":Rs(n),Eu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ji)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pd(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[gt]=e,t[is]=n,tf(t,e,!1,!1),e.stateNode=t;e:{switch(a=oo(r,n),r){case"dialog":te("cancel",t),te("close",t),s=n;break;case"iframe":case"object":case"embed":te("load",t),s=n;break;case"video":case"audio":for(s=0;s<$n.length;s++)te($n[s],t);s=n;break;case"source":te("error",t),s=n;break;case"img":case"image":case"link":te("error",t),te("load",t),s=n;break;case"details":te("toggle",t),s=n;break;case"input":Su(t,n),s=to(t,n),te("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=le({},n,{value:void 0}),te("invalid",t);break;case"textarea":Nu(t,n),s=so(t,n),te("invalid",t);break;default:s=n}ao(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Id(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Od(t,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Qn(t,u):typeof u=="number"&&Qn(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Jn.hasOwnProperty(i)?u!=null&&i==="onScroll"&&te("scroll",t):u!=null&&fl(t,i,u,a))}switch(r){case"input":Rs(t),ku(t,n,!1);break;case"textarea":Rs(t),Eu(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Qt(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Gr(t,!!n.multiple,i,!1):n.defaultValue!=null&&Gr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ji)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Se(e),null;case 6:if(t&&e.stateNode!=null)nf(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(P(166));if(r=pr(os.current),pr(vt.current),Ds(e)){if(n=e.stateNode,r=e.memoizedProps,n[gt]=e,(i=n.nodeValue!==r)&&(t=ze,t!==null))switch(t.tag){case 3:Us(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Us(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[gt]=e,e.stateNode=n}return Se(e),null;case 13:if(re(ae),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ne&&Fe!==null&&e.mode&1&&!(e.flags&128))bh(),nn(),e.flags|=98560,i=!1;else if(i=Ds(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(P(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[gt]=e}else nn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Se(e),i=!1}else at!==null&&(zo(at),at=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ae.current&1?ge===0&&(ge=3):Jl())),e.updateQueue!==null&&(e.flags|=4),Se(e),null);case 4:return an(),Io(t,e),t===null&&ns(e.stateNode.containerInfo),Se(e),null;case 10:return Ol(e.type._context),Se(e),null;case 17:return $e(e.type)&&Si(),Se(e),null;case 19:if(re(ae),i=e.memoizedState,i===null)return Se(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)Tn(i,!1);else{if(ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Pi(t),a!==null){for(e.flags|=128,Tn(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ee(ae,ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&ce()>ln&&(e.flags|=128,n=!0,Tn(i,!1),e.lanes=4194304)}else{if(!n)if(t=Pi(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Tn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ne)return Se(e),null}else 2*ce()-i.renderingStartTime>ln&&r!==1073741824&&(e.flags|=128,n=!0,Tn(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ce(),e.sibling=null,r=ae.current,ee(ae,n?r&1|2:r&1),e):(Se(e),null);case 22:case 23:return Gl(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?De&1073741824&&(Se(e),e.subtreeFlags&6&&(e.flags|=8192)):Se(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function t0(t,e){switch(Cl(e),e.tag){case 1:return $e(e.type)&&Si(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return an(),re(Le),re(Ee),Ul(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $l(e),null;case 13:if(re(ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));nn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return re(ae),null;case 4:return an(),null;case 10:return Ol(e.type._context),null;case 22:case 23:return Gl(),null;case 24:return null;default:return null}}var Fs=!1,ke=!1,r0=typeof WeakSet=="function"?WeakSet:Set,$=null;function qr(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ue(t,e,n)}else r.current=null}function Lo(t,e,r){try{r()}catch(n){ue(t,e,n)}}var gc=!1;function n0(t,e){if(vo=wi,t=lh(),Nl(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var y;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==i||n!==0&&h.nodeType!==3||(u=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(y=h.firstChild)!==null;)p=h,h=y;for(;;){if(h===t)break t;if(p===r&&++c===s&&(l=a),p===i&&++d===n&&(u=a),(y=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=y}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(xo={focusedElem:t,selectionRange:r},wi=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,b=v.memoizedState,g=e.stateNode,f=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:nt(e.type,w),b);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(_){ue(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return v=gc,gc=!1,v}function Wn(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Lo(e,r,i)}s=s.next}while(s!==n)}}function ea(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function $o(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function sf(t){var e=t.alternate;e!==null&&(t.alternate=null,sf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gt],delete e[is],delete e[_o],delete e[Bg],delete e[Mg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function af(t){return t.tag===5||t.tag===3||t.tag===4}function yc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||af(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uo(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ji));else if(n!==4&&(t=t.child,t!==null))for(Uo(t,e,r),t=t.sibling;t!==null;)Uo(t,e,r),t=t.sibling}function Do(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Do(t,e,r),t=t.sibling;t!==null;)Do(t,e,r),t=t.sibling}var we=null,it=!1;function At(t,e,r){for(r=r.child;r!==null;)of(t,e,r),r=r.sibling}function of(t,e,r){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(qi,r)}catch{}switch(r.tag){case 5:ke||qr(r,e);case 6:var n=we,s=it;we=null,At(t,e,r),we=n,it=s,we!==null&&(it?(t=we,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):we.removeChild(r.stateNode));break;case 18:we!==null&&(it?(t=we,r=r.stateNode,t.nodeType===8?Ra(t.parentNode,r):t.nodeType===1&&Ra(t,r),es(t)):Ra(we,r.stateNode));break;case 4:n=we,s=it,we=r.stateNode.containerInfo,it=!0,At(t,e,r),we=n,it=s;break;case 0:case 11:case 14:case 15:if(!ke&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Lo(r,e,a),s=s.next}while(s!==n)}At(t,e,r);break;case 1:if(!ke&&(qr(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ue(r,e,l)}At(t,e,r);break;case 21:At(t,e,r);break;case 22:r.mode&1?(ke=(n=ke)||r.memoizedState!==null,At(t,e,r),ke=n):At(t,e,r);break;default:At(t,e,r)}}function vc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new r0),e.forEach(function(n){var s=h0.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function et(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:we=l.stateNode,it=!1;break e;case 3:we=l.stateNode.containerInfo,it=!0;break e;case 4:we=l.stateNode.containerInfo,it=!0;break e}l=l.return}if(we===null)throw Error(P(160));of(i,a,s),we=null,it=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){ue(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lf(e,t),e=e.sibling}function lf(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(et(e,t),ft(t),n&4){try{Wn(3,t,t.return),ea(3,t)}catch(w){ue(t,t.return,w)}try{Wn(5,t,t.return)}catch(w){ue(t,t.return,w)}}break;case 1:et(e,t),ft(t),n&512&&r!==null&&qr(r,r.return);break;case 5:if(et(e,t),ft(t),n&512&&r!==null&&qr(r,r.return),t.flags&32){var s=t.stateNode;try{Qn(s,"")}catch(w){ue(t,t.return,w)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Rd(s,i),oo(l,a);var c=oo(l,i);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];d==="style"?Id(s,h):d==="dangerouslySetInnerHTML"?Od(s,h):d==="children"?Qn(s,h):fl(s,d,h,c)}switch(l){case"input":ro(s,i);break;case"textarea":Td(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Gr(s,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?Gr(s,!!i.multiple,i.defaultValue,!0):Gr(s,!!i.multiple,i.multiple?[]:"",!1))}s[is]=i}catch(w){ue(t,t.return,w)}}break;case 6:if(et(e,t),ft(t),n&4){if(t.stateNode===null)throw Error(P(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){ue(t,t.return,w)}}break;case 3:if(et(e,t),ft(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{es(e.containerInfo)}catch(w){ue(t,t.return,w)}break;case 4:et(e,t),ft(t);break;case 13:et(e,t),ft(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ql=ce())),n&4&&vc(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(ke=(c=ke)||d,et(e,t),ke=c):et(e,t),ft(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(h=$=d;$!==null;){switch(p=$,y=p.child,p.tag){case 0:case 11:case 14:case 15:Wn(4,p,p.return);break;case 1:qr(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){ue(n,r,w)}}break;case 5:qr(p,p.return);break;case 22:if(p.memoizedState!==null){wc(h);continue}}y!==null?(y.return=p,$=y):wc(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,u=h.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ad("display",a))}catch(w){ue(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){ue(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:et(e,t),ft(t),n&4&&vc(t);break;case 21:break;default:et(e,t),ft(t)}}function ft(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(af(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Qn(s,""),n.flags&=-33);var i=yc(t);Do(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=yc(t);Uo(t,l,a);break;default:throw Error(P(161))}}catch(u){ue(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function s0(t,e,r){$=t,uf(t)}function uf(t,e,r){for(var n=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Fs;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ke;l=Fs;var c=ke;if(Fs=a,(ke=u)&&!c)for($=s;$!==null;)a=$,u=a.child,a.tag===22&&a.memoizedState!==null?bc(s):u!==null?(u.return=a,$=u):bc(s);for(;i!==null;)$=i,uf(i),i=i.sibling;$=s,Fs=l,ke=c}xc(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):xc(t)}}function xc(t){for(;$!==null;){var e=$;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ke||ea(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ke)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:nt(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&nc(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}nc(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&es(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}ke||e.flags&512&&$o(e)}catch(p){ue(e,e.return,p)}}if(e===t){$=null;break}if(r=e.sibling,r!==null){r.return=e.return,$=r;break}$=e.return}}function wc(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var r=e.sibling;if(r!==null){r.return=e.return,$=r;break}$=e.return}}function bc(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ea(4,e)}catch(u){ue(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){ue(e,s,u)}}var i=e.return;try{$o(e)}catch(u){ue(e,i,u)}break;case 5:var a=e.return;try{$o(e)}catch(u){ue(e,a,u)}}}catch(u){ue(e,e.return,u)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var i0=Math.ceil,Ii=Pt.ReactCurrentDispatcher,Wl=Pt.ReactCurrentOwner,Ye=Pt.ReactCurrentBatchConfig,G=0,ve=null,he=null,be=0,De=0,Kr=Zt(0),ge=0,ds=null,br=0,ta=0,Hl=0,Hn=null,Ae=null,ql=0,ln=1/0,xt=null,Li=!1,Bo=null,Kt=null,zs=!1,Ft=null,$i=0,qn=0,Mo=null,ui=-1,ci=0;function Te(){return G&6?ce():ui!==-1?ui:ui=ce()}function Gt(t){return t.mode&1?G&2&&be!==0?be&-be:zg.transition!==null?(ci===0&&(ci=qd()),ci):(t=Y,t!==0||(t=window.event,t=t===void 0?16:Zd(t.type)),t):1}function lt(t,e,r,n){if(50<qn)throw qn=0,Mo=null,Error(P(185));vs(t,r,n),(!(G&2)||t!==ve)&&(t===ve&&(!(G&2)&&(ta|=r),ge===4&&Dt(t,be)),Ue(t,n),r===1&&G===0&&!(e.mode&1)&&(ln=ce()+500,Yi&&er()))}function Ue(t,e){var r=t.callbackNode;zm(t,e);var n=xi(t,t===ve?be:0);if(n===0)r!==null&&Tu(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Tu(r),e===1)t.tag===0?Fg(_c.bind(null,t)):vh(_c.bind(null,t)),Ug(function(){!(G&6)&&er()}),r=null;else{switch(Kd(n)){case 1:r=vl;break;case 4:r=Wd;break;case 16:r=vi;break;case 536870912:r=Hd;break;default:r=vi}r=yf(r,cf.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function cf(t,e){if(ui=-1,ci=0,G&6)throw Error(P(327));var r=t.callbackNode;if(Zr()&&t.callbackNode!==r)return null;var n=xi(t,t===ve?be:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ui(t,n);else{e=n;var s=G;G|=2;var i=hf();(ve!==t||be!==e)&&(xt=null,ln=ce()+500,gr(t,e));do try{l0();break}catch(l){df(t,l)}while(!0);Pl(),Ii.current=i,G=s,he!==null?e=0:(ve=null,be=0,e=ge)}if(e!==0){if(e===2&&(s=fo(t),s!==0&&(n=s,e=Fo(t,s))),e===1)throw r=ds,gr(t,0),Dt(t,n),Ue(t,ce()),r;if(e===6)Dt(t,n);else{if(s=t.current.alternate,!(n&30)&&!a0(s)&&(e=Ui(t,n),e===2&&(i=fo(t),i!==0&&(n=i,e=Fo(t,i))),e===1))throw r=ds,gr(t,0),Dt(t,n),Ue(t,ce()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(P(345));case 2:or(t,Ae,xt);break;case 3:if(Dt(t,n),(n&130023424)===n&&(e=ql+500-ce(),10<e)){if(xi(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Te(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bo(or.bind(null,t,Ae,xt),e);break}or(t,Ae,xt);break;case 4:if(Dt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-ot(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=ce()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*i0(n/1960))-n,10<n){t.timeoutHandle=bo(or.bind(null,t,Ae,xt),n);break}or(t,Ae,xt);break;case 5:or(t,Ae,xt);break;default:throw Error(P(329))}}}return Ue(t,ce()),t.callbackNode===r?cf.bind(null,t):null}function Fo(t,e){var r=Hn;return t.current.memoizedState.isDehydrated&&(gr(t,e).flags|=256),t=Ui(t,e),t!==2&&(e=Ae,Ae=r,e!==null&&zo(e)),t}function zo(t){Ae===null?Ae=t:Ae.push.apply(Ae,t)}function a0(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ut(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dt(t,e){for(e&=~Hl,e&=~ta,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ot(e),n=1<<r;t[r]=-1,e&=~n}}function _c(t){if(G&6)throw Error(P(327));Zr();var e=xi(t,0);if(!(e&1))return Ue(t,ce()),null;var r=Ui(t,e);if(t.tag!==0&&r===2){var n=fo(t);n!==0&&(e=n,r=Fo(t,n))}if(r===1)throw r=ds,gr(t,0),Dt(t,e),Ue(t,ce()),r;if(r===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,or(t,Ae,xt),Ue(t,ce()),null}function Kl(t,e){var r=G;G|=1;try{return t(e)}finally{G=r,G===0&&(ln=ce()+500,Yi&&er())}}function _r(t){Ft!==null&&Ft.tag===0&&!(G&6)&&Zr();var e=G;G|=1;var r=Ye.transition,n=Y;try{if(Ye.transition=null,Y=1,t)return t()}finally{Y=n,Ye.transition=r,G=e,!(G&6)&&er()}}function Gl(){De=Kr.current,re(Kr)}function gr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,$g(r)),he!==null)for(r=he.return;r!==null;){var n=r;switch(Cl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Si();break;case 3:an(),re(Le),re(Ee),Ul();break;case 5:$l(n);break;case 4:an();break;case 13:re(ae);break;case 19:re(ae);break;case 10:Ol(n.type._context);break;case 22:case 23:Gl()}r=r.return}if(ve=t,he=t=Jt(t.current,null),be=De=e,ge=0,ds=null,Hl=ta=br=0,Ae=Hn=null,fr!==null){for(e=0;e<fr.length;e++)if(r=fr[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}fr=null}return t}function df(t,e){do{var r=he;try{if(Pl(),ai.current=Ai,Oi){for(var n=oe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Oi=!1}if(wr=0,ye=me=oe=null,Vn=!1,ls=0,Wl.current=null,r===null||r.return===null){ge=1,ds=e,he=null;break}e:{var i=t,a=r.return,l=r,u=e;if(e=be,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=uc(a);if(y!==null){y.flags&=-257,cc(y,a,l,i,e),y.mode&1&&lc(i,c,e),e=y,u=c;var v=e.updateQueue;if(v===null){var w=new Set;w.add(u),e.updateQueue=w}else v.add(u);break e}else{if(!(e&1)){lc(i,c,e),Jl();break e}u=Error(P(426))}}else if(ne&&l.mode&1){var b=uc(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),cc(b,a,l,i,e),Rl(on(u,l));break e}}i=u=on(u,l),ge!==4&&(ge=2),Hn===null?Hn=[i]:Hn.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Kh(i,u,e);rc(i,g);break e;case 1:l=u;var f=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Kt===null||!Kt.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=Gh(i,l,e);rc(i,_);break e}}i=i.return}while(i!==null)}pf(r)}catch(j){e=j,he===r&&r!==null&&(he=r=r.return);continue}break}while(!0)}function hf(){var t=Ii.current;return Ii.current=Ai,t===null?Ai:t}function Jl(){(ge===0||ge===3||ge===2)&&(ge=4),ve===null||!(br&268435455)&&!(ta&268435455)||Dt(ve,be)}function Ui(t,e){var r=G;G|=2;var n=hf();(ve!==t||be!==e)&&(xt=null,gr(t,e));do try{o0();break}catch(s){df(t,s)}while(!0);if(Pl(),G=r,Ii.current=n,he!==null)throw Error(P(261));return ve=null,be=0,ge}function o0(){for(;he!==null;)ff(he)}function l0(){for(;he!==null&&!Am();)ff(he)}function ff(t){var e=gf(t.alternate,t,De);t.memoizedProps=t.pendingProps,e===null?pf(t):he=e,Wl.current=null}function pf(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=t0(r,e),r!==null){r.flags&=32767,he=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ge=6,he=null;return}}else if(r=e0(r,e,De),r!==null){he=r;return}if(e=e.sibling,e!==null){he=e;return}he=e=t}while(e!==null);ge===0&&(ge=5)}function or(t,e,r){var n=Y,s=Ye.transition;try{Ye.transition=null,Y=1,u0(t,e,r,n)}finally{Ye.transition=s,Y=n}return null}function u0(t,e,r,n){do Zr();while(Ft!==null);if(G&6)throw Error(P(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Vm(t,i),t===ve&&(he=ve=null,be=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||zs||(zs=!0,yf(vi,function(){return Zr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ye.transition,Ye.transition=null;var a=Y;Y=1;var l=G;G|=4,Wl.current=null,n0(t,r),lf(r,t),Rg(xo),wi=!!vo,xo=vo=null,t.current=r,s0(r),Im(),G=l,Y=a,Ye.transition=i}else t.current=r;if(zs&&(zs=!1,Ft=t,$i=s),i=t.pendingLanes,i===0&&(Kt=null),Um(r.stateNode),Ue(t,ce()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Li)throw Li=!1,t=Bo,Bo=null,t;return $i&1&&t.tag!==0&&Zr(),i=t.pendingLanes,i&1?t===Mo?qn++:(qn=0,Mo=t):qn=0,er(),null}function Zr(){if(Ft!==null){var t=Kd($i),e=Ye.transition,r=Y;try{if(Ye.transition=null,Y=16>t?16:t,Ft===null)var n=!1;else{if(t=Ft,Ft=null,$i=0,G&6)throw Error(P(331));var s=G;for(G|=4,$=t.current;$!==null;){var i=$,a=i.child;if($.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for($=c;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:Wn(8,d,i)}var h=d.child;if(h!==null)h.return=d,$=h;else for(;$!==null;){d=$;var p=d.sibling,y=d.return;if(sf(d),d===c){$=null;break}if(p!==null){p.return=y,$=p;break}$=y}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}$=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,$=a;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wn(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,$=g;break e}$=i.return}}var f=t.current;for($=f;$!==null;){a=$;var m=a.child;if(a.subtreeFlags&2064&&m!==null)m.return=a,$=m;else e:for(a=f;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ea(9,l)}}catch(j){ue(l,l.return,j)}if(l===a){$=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,$=_;break e}$=l.return}}if(G=s,er(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(qi,t)}catch{}n=!0}return n}finally{Y=r,Ye.transition=e}}return!1}function jc(t,e,r){e=on(r,e),e=Kh(t,e,1),t=qt(t,e,1),e=Te(),t!==null&&(vs(t,1,e),Ue(t,e))}function ue(t,e,r){if(t.tag===3)jc(t,t,r);else for(;e!==null;){if(e.tag===3){jc(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Kt===null||!Kt.has(n))){t=on(r,t),t=Gh(e,t,1),e=qt(e,t,1),t=Te(),e!==null&&(vs(e,1,t),Ue(e,t));break}}e=e.return}}function c0(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Te(),t.pingedLanes|=t.suspendedLanes&r,ve===t&&(be&r)===r&&(ge===4||ge===3&&(be&130023424)===be&&500>ce()-ql?gr(t,0):Hl|=r),Ue(t,e)}function mf(t,e){e===0&&(t.mode&1?(e=Os,Os<<=1,!(Os&130023424)&&(Os=4194304)):e=1);var r=Te();t=Ct(t,e),t!==null&&(vs(t,e,r),Ue(t,r))}function d0(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),mf(t,r)}function h0(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(e),mf(t,r)}var gf;gf=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Le.current)Ie=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ie=!1,Zg(t,e,r);Ie=!!(t.flags&131072)}else Ie=!1,ne&&e.flags&1048576&&xh(e,Ei,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;li(t,e),t=e.pendingProps;var s=rn(e,Ee.current);Xr(e,r),s=Bl(null,e,n,t,s,r);var i=Ml();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$e(n)?(i=!0,ki(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Il(e),s.updater=Zi,e.stateNode=s,s._reactInternals=e,Co(e,n,t,r),e=Po(null,e,n,!0,i,r)):(e.tag=0,ne&&i&&El(e),Ce(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(li(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=p0(n),t=nt(n,t),s){case 0:e=To(null,e,n,t,r);break e;case 1:e=fc(null,e,n,t,r);break e;case 11:e=dc(null,e,n,t,r);break e;case 14:e=hc(null,e,n,nt(n.type,t),r);break e}throw Error(P(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:nt(n,s),To(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:nt(n,s),fc(t,e,n,s,r);case 3:e:{if(Xh(e),t===null)throw Error(P(387));n=e.pendingProps,i=e.memoizedState,s=i.element,kh(t,e),Ti(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=on(Error(P(423)),e),e=pc(t,e,n,r,s);break e}else if(n!==s){s=on(Error(P(424)),e),e=pc(t,e,n,r,s);break e}else for(Fe=Ht(e.stateNode.containerInfo.firstChild),ze=e,ne=!0,at=null,r=jh(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(nn(),n===s){e=Rt(t,e,r);break e}Ce(t,e,n,r)}e=e.child}return e;case 5:return Nh(e),t===null&&ko(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,wo(n,s)?a=null:i!==null&&wo(n,i)&&(e.flags|=32),Yh(t,e),Ce(t,e,a,r),e.child;case 6:return t===null&&ko(e),null;case 13:return Zh(t,e,r);case 4:return Ll(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=sn(e,null,n,r):Ce(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:nt(n,s),dc(t,e,n,s,r);case 7:return Ce(t,e,e.pendingProps,r),e.child;case 8:return Ce(t,e,e.pendingProps.children,r),e.child;case 12:return Ce(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,ee(Ci,n._currentValue),n._currentValue=a,i!==null)if(ut(i.value,a)){if(i.children===s.children&&!Le.current){e=Rt(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=St(-1,r&-r),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),No(i.return,r,e),l.lanes|=r;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(P(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),No(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ce(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Xr(e,r),s=Xe(s),n=n(s),e.flags|=1,Ce(t,e,n,r),e.child;case 14:return n=e.type,s=nt(n,e.pendingProps),s=nt(n.type,s),hc(t,e,n,s,r);case 15:return Jh(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:nt(n,s),li(t,e),e.tag=1,$e(n)?(t=!0,ki(e)):t=!1,Xr(e,r),qh(e,n,s),Co(e,n,s,r),Po(null,e,n,!0,t,r);case 19:return ef(t,e,r);case 22:return Qh(t,e,r)}throw Error(P(156,e.tag))};function yf(t,e){return Vd(t,e)}function f0(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(t,e,r,n){return new f0(t,e,r,n)}function Ql(t){return t=t.prototype,!(!t||!t.isReactComponent)}function p0(t){if(typeof t=="function")return Ql(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ml)return 11;if(t===gl)return 14}return 2}function Jt(t,e){var r=t.alternate;return r===null?(r=Qe(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function di(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")Ql(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ur:return yr(r.children,s,i,e);case pl:a=8,s|=8;break;case Ya:return t=Qe(12,r,e,s|2),t.elementType=Ya,t.lanes=i,t;case Xa:return t=Qe(13,r,e,s),t.elementType=Xa,t.lanes=i,t;case Za:return t=Qe(19,r,e,s),t.elementType=Za,t.lanes=i,t;case Nd:return ra(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sd:a=10;break e;case kd:a=9;break e;case ml:a=11;break e;case gl:a=14;break e;case Lt:a=16,n=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=Qe(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function yr(t,e,r,n){return t=Qe(7,t,n,e),t.lanes=r,t}function ra(t,e,r,n){return t=Qe(22,t,n,e),t.elementType=Nd,t.lanes=r,t.stateNode={isHidden:!1},t}function Ua(t,e,r){return t=Qe(6,t,null,e),t.lanes=r,t}function Da(t,e,r){return e=Qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function m0(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=va(0),this.expirationTimes=va(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=va(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yl(t,e,r,n,s,i,a,l,u){return t=new m0(t,e,r,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Qe(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Il(i),t}function g0(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function vf(t){if(!t)return Yt;t=t._reactInternals;e:{if(Er(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($e(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var r=t.type;if($e(r))return yh(t,r,e)}return e}function xf(t,e,r,n,s,i,a,l,u){return t=Yl(r,n,!0,t,s,i,a,l,u),t.context=vf(null),r=t.current,n=Te(),s=Gt(r),i=St(n,s),i.callback=e??null,qt(r,i,s),t.current.lanes=s,vs(t,s,n),Ue(t,n),t}function na(t,e,r,n){var s=e.current,i=Te(),a=Gt(s);return r=vf(r),e.context===null?e.context=r:e.pendingContext=r,e=St(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=qt(s,e,a),t!==null&&(lt(t,s,a,i),ii(t,s,a)),a}function Di(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Xl(t,e){Sc(t,e),(t=t.alternate)&&Sc(t,e)}function y0(){return null}var wf=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zl(t){this._internalRoot=t}sa.prototype.render=Zl.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));na(t,e,null,null)};sa.prototype.unmount=Zl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_r(function(){na(null,t,null,null)}),e[Et]=null}};function sa(t){this._internalRoot=t}sa.prototype.unstable_scheduleHydration=function(t){if(t){var e=Qd();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ut.length&&e!==0&&e<Ut[r].priority;r++);Ut.splice(r,0,t),r===0&&Xd(t)}};function eu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ia(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kc(){}function v0(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=Di(a);i.call(c)}}var a=xf(e,n,t,0,null,!1,!1,"",kc);return t._reactRootContainer=a,t[Et]=a.current,ns(t.nodeType===8?t.parentNode:t),_r(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var c=Di(u);l.call(c)}}var u=Yl(t,0,!1,null,null,!1,!1,"",kc);return t._reactRootContainer=u,t[Et]=u.current,ns(t.nodeType===8?t.parentNode:t),_r(function(){na(e,u,r,n)}),u}function aa(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Di(a);l.call(u)}}na(e,a,t,s)}else a=v0(r,e,t,s,n);return Di(a)}Gd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ln(e.pendingLanes);r!==0&&(xl(e,r|1),Ue(e,ce()),!(G&6)&&(ln=ce()+500,er()))}break;case 13:_r(function(){var n=Ct(t,1);if(n!==null){var s=Te();lt(n,t,1,s)}}),Xl(t,1)}};wl=function(t){if(t.tag===13){var e=Ct(t,134217728);if(e!==null){var r=Te();lt(e,t,134217728,r)}Xl(t,134217728)}};Jd=function(t){if(t.tag===13){var e=Gt(t),r=Ct(t,e);if(r!==null){var n=Te();lt(r,t,e,n)}Xl(t,e)}};Qd=function(){return Y};Yd=function(t,e){var r=Y;try{return Y=t,e()}finally{Y=r}};uo=function(t,e,r){switch(e){case"input":if(ro(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Qi(n);if(!s)throw Error(P(90));Cd(n),ro(n,s)}}}break;case"textarea":Td(t,r);break;case"select":e=r.value,e!=null&&Gr(t,!!r.multiple,e,!1)}};Ud=Kl;Dd=_r;var x0={usingClientEntryPoint:!1,Events:[ws,Fr,Qi,Ld,$d,Kl]},Pn={findFiberByHostInstance:hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w0={bundleType:Pn.bundleType,version:Pn.version,rendererPackageName:Pn.rendererPackageName,rendererConfig:Pn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fd(t),t===null?null:t.stateNode},findFiberByHostInstance:Pn.findFiberByHostInstance||y0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vs.isDisabled&&Vs.supportsFiber)try{qi=Vs.inject(w0),yt=Vs}catch{}}We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x0;We.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eu(e))throw Error(P(200));return g0(t,e,null,r)};We.createRoot=function(t,e){if(!eu(t))throw Error(P(299));var r=!1,n="",s=wf;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Yl(t,1,!1,null,null,r,!1,n,s),t[Et]=e.current,ns(t.nodeType===8?t.parentNode:t),new Zl(e)};We.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=Fd(e),t=t===null?null:t.stateNode,t};We.flushSync=function(t){return _r(t)};We.hydrate=function(t,e,r){if(!ia(e))throw Error(P(200));return aa(null,t,e,!0,r)};We.hydrateRoot=function(t,e,r){if(!eu(t))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=wf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=xf(e,null,t,1,r??null,s,!1,i,a),t[Et]=e.current,ns(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new sa(e)};We.render=function(t,e,r){if(!ia(e))throw Error(P(200));return aa(null,t,e,!1,r)};We.unmountComponentAtNode=function(t){if(!ia(t))throw Error(P(40));return t._reactRootContainer?(_r(function(){aa(null,null,t,!1,function(){t._reactRootContainer=null,t[Et]=null})}),!0):!1};We.unstable_batchedUpdates=Kl;We.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ia(r))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return aa(t,e,r,!1,n)};We.version="18.3.1-next-f1338f8080-20240426";function bf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bf)}catch(t){console.error(t)}}bf(),wd.exports=We;var b0=wd.exports,_f,Nc=b0;_f=Nc.createRoot,Nc.hydrateRoot;/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ec="popstate";function _0(t={}){function e(n,s){let{pathname:i,search:a,hash:l}=n.location;return Vo("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:hs(s)}return S0(e,r,null,t)}function se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ct(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function j0(){return Math.random().toString(36).substring(2,10)}function Cc(t,e){return{usr:t.state,key:t.key,idx:e}}function Vo(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?pn(e):e,state:r,key:e&&e.key||n||j0()}}function hs({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function pn(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function S0(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l="POP",u=null,c=d();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function d(){return(a.state||{idx:null}).idx}function h(){l="POP";let b=d(),g=b==null?null:b-c;c=b,u&&u({action:l,location:w.location,delta:g})}function p(b,g){l="PUSH";let f=Vo(w.location,b,g);c=d()+1;let m=Cc(f,c),_=w.createHref(f);try{a.pushState(m,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(_)}i&&u&&u({action:l,location:w.location,delta:1})}function y(b,g){l="REPLACE";let f=Vo(w.location,b,g);c=d();let m=Cc(f,c),_=w.createHref(f);a.replaceState(m,"",_),i&&u&&u({action:l,location:w.location,delta:0})}function v(b){return k0(b)}let w={get action(){return l},get location(){return t(s,a)},listen(b){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Ec,h),u=b,()=>{s.removeEventListener(Ec,h),u=null}},createHref(b){return e(s,b)},createURL:v,encodeLocation(b){let g=v(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:y,go(b){return a.go(b)}};return w}function k0(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),se(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:hs(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function jf(t,e,r="/"){return N0(t,e,r,!1)}function N0(t,e,r,n){let s=typeof e=="string"?pn(e):e,i=Tt(s.pathname||"/",r);if(i==null)return null;let a=Sf(t);E0(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=D0(i);l=$0(a[u],c,n)}return l}function Sf(t,e=[],r=[],n="",s=!1){let i=(a,l,u=s,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&u)return;se(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let h=kt([n,d.relativePath]),p=r.concat(d);a.children&&a.children.length>0&&(se(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Sf(a.children,e,p,h,u)),!(a.path==null&&!a.index)&&e.push({path:h,score:I0(h,a.index),routesMeta:p})};return t.forEach((a,l)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,l);else for(let c of kf(a.path))i(a,l,!0,c)}),e}function kf(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=kf(n.join("/")),l=[];return l.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function E0(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:L0(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var C0=/^:[\w-]+$/,R0=3,T0=2,P0=1,O0=10,A0=-2,Rc=t=>t==="*";function I0(t,e){let r=t.split("/"),n=r.length;return r.some(Rc)&&(n+=A0),e&&(n+=T0),r.filter(s=>!Rc(s)).reduce((s,i)=>s+(C0.test(i)?R0:i===""?P0:O0),n)}function L0(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function $0(t,e,r=!1){let{routesMeta:n}=t,s={},i="/",a=[];for(let l=0;l<n.length;++l){let u=n[l],c=l===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Bi({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),p=u.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=Bi({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:kt([i,h.pathname]),pathnameBase:z0(kt([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=kt([i,h.pathnameBase]))}return a}function Bi(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=U0(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((c,{paramName:d,isOptional:h},p)=>{if(d==="*"){let v=l[p]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const y=l[p];return h&&!y?c[d]=void 0:c[d]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function U0(t,e=!1,r=!0){ct(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function D0(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ct(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Tt(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function B0(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?pn(t):t;return{pathname:r?r.startsWith("/")?r:M0(r,e):e,search:V0(n),hash:W0(s)}}function M0(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ba(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function F0(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function tu(t){let e=F0(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function ru(t,e,r,n=!1){let s;typeof t=="string"?s=pn(t):(s={...t},se(!s.pathname||!s.pathname.includes("?"),Ba("?","pathname","search",s)),se(!s.pathname||!s.pathname.includes("#"),Ba("#","pathname","hash",s)),se(!s.search||!s.search.includes("#"),Ba("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let h=e.length-1;if(!n&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}l=h>=0?e[h]:"/"}let u=B0(s,l),c=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}var kt=t=>t.join("/").replace(/\/\/+/g,"/"),z0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),V0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,W0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function H0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Nf=["POST","PUT","PATCH","DELETE"];new Set(Nf);var q0=["GET",...Nf];new Set(q0);var mn=x.createContext(null);mn.displayName="DataRouter";var oa=x.createContext(null);oa.displayName="DataRouterState";x.createContext(!1);var Ef=x.createContext({isTransitioning:!1});Ef.displayName="ViewTransition";var K0=x.createContext(new Map);K0.displayName="Fetchers";var G0=x.createContext(null);G0.displayName="Await";var dt=x.createContext(null);dt.displayName="Navigation";var _s=x.createContext(null);_s.displayName="Location";var ht=x.createContext({outlet:null,matches:[],isDataRoute:!1});ht.displayName="Route";var nu=x.createContext(null);nu.displayName="RouteError";function J0(t,{relative:e}={}){se(gn(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=x.useContext(dt),{hash:s,pathname:i,search:a}=Ss(t,{relative:e}),l=i;return r!=="/"&&(l=i==="/"?r:kt([r,i])),n.createHref({pathname:l,search:a,hash:s})}function gn(){return x.useContext(_s)!=null}function tr(){return se(gn(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(_s).location}var Cf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rf(t){x.useContext(dt).static||x.useLayoutEffect(t)}function yn(){let{isDataRoute:t}=x.useContext(ht);return t?ly():Q0()}function Q0(){se(gn(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(mn),{basename:e,navigator:r}=x.useContext(dt),{matches:n}=x.useContext(ht),{pathname:s}=tr(),i=JSON.stringify(tu(n)),a=x.useRef(!1);return Rf(()=>{a.current=!0}),x.useCallback((u,c={})=>{if(ct(a.current,Cf),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=ru(u,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:kt([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,i,s,t])}x.createContext(null);function js(){let{matches:t}=x.useContext(ht),e=t[t.length-1];return e?e.params:{}}function Ss(t,{relative:e}={}){let{matches:r}=x.useContext(ht),{pathname:n}=tr(),s=JSON.stringify(tu(r));return x.useMemo(()=>ru(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function Y0(t,e){return Tf(t,e)}function Tf(t,e,r,n,s){var f;se(gn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=x.useContext(dt),{matches:a}=x.useContext(ht),l=a[a.length-1],u=l?l.params:{},c=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let m=h&&h.path||"";Pf(c,!h||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let p=tr(),y;if(e){let m=typeof e=="string"?pn(e):e;se(d==="/"||((f=m.pathname)==null?void 0:f.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${m.pathname}" was given in the \`location\` prop.`),y=m}else y=p;let v=y.pathname||"/",w=v;if(d!=="/"){let m=d.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(m.length).join("/")}let b=jf(t,{pathname:w});ct(h||b!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),ct(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=ry(b&&b.map(m=>Object.assign({},m,{params:Object.assign({},u,m.params),pathname:kt([d,i.encodeLocation?i.encodeLocation(m.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?d:kt([d,i.encodeLocation?i.encodeLocation(m.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:m.pathnameBase])})),a,r,n,s);return e&&g?x.createElement(_s.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},g):g}function X0(){let t=oy(),e=H0(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:i},"ErrorBoundary")," or"," ",x.createElement("code",{style:i},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),r?x.createElement("pre",{style:s},r):null,a)}var Z0=x.createElement(X0,null),ey=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?x.createElement(ht.Provider,{value:this.props.routeContext},x.createElement(nu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ty({routeContext:t,match:e,children:r}){let n=x.useContext(mn);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(ht.Provider,{value:t},r)}function ry(t,e=[],r=null,n=null,s=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=r==null?void 0:r.errors;if(a!=null){let c=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);se(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let l=!1,u=-1;if(r)for(let c=0;c<i.length;c++){let d=i[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:p}=r,y=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,d,h)=>{let p,y=!1,v=null,w=null;r&&(p=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||Z0,l&&(u<0&&h===0?(Pf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):u===h&&(y=!0,w=d.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,h+1)),g=()=>{let f;return p?f=v:y?f=w:d.route.Component?f=x.createElement(d.route.Component,null):d.route.element?f=d.route.element:f=c,x.createElement(ty,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:r!=null},children:f})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?x.createElement(ey,{location:r.location,revalidation:r.revalidation,component:v,error:p,children:g(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:n}):g()},null)}function su(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ny(t){let e=x.useContext(mn);return se(e,su(t)),e}function sy(t){let e=x.useContext(oa);return se(e,su(t)),e}function iy(t){let e=x.useContext(ht);return se(e,su(t)),e}function iu(t){let e=iy(t),r=e.matches[e.matches.length-1];return se(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function ay(){return iu("useRouteId")}function oy(){var n;let t=x.useContext(nu),e=sy("useRouteError"),r=iu("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function ly(){let{router:t}=ny("useNavigate"),e=iu("useNavigate"),r=x.useRef(!1);return Rf(()=>{r.current=!0}),x.useCallback(async(s,i={})=>{ct(r.current,Cf),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var Tc={};function Pf(t,e,r){!e&&!Tc[t]&&(Tc[t]=!0,ct(!1,r))}x.memo(uy);function uy({routes:t,future:e,state:r,unstable_onError:n}){return Tf(t,void 0,r,n,e)}function cy({to:t,replace:e,state:r,relative:n}){se(gn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=x.useContext(dt);ct(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=x.useContext(ht),{pathname:a}=tr(),l=yn(),u=ru(t,tu(i),a,n==="path"),c=JSON.stringify(u);return x.useEffect(()=>{l(JSON.parse(c),{replace:e,state:r,relative:n})},[l,c,n,e,r]),null}function pt(t){se(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dy({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){se(!gn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=x.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof r=="string"&&(r=pn(r));let{pathname:u="/",search:c="",hash:d="",state:h=null,key:p="default"}=r,y=x.useMemo(()=>{let v=Tt(u,a);return v==null?null:{location:{pathname:v,search:c,hash:d,state:h,key:p},navigationType:n}},[a,u,c,d,h,p,n]);return ct(y!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:x.createElement(dt.Provider,{value:l},x.createElement(_s.Provider,{children:e,value:y}))}function hy({children:t,location:e}){return Y0(Wo(t),e)}function Wo(t,e=[]){let r=[];return x.Children.forEach(t,(n,s)=>{if(!x.isValidElement(n))return;let i=[...e,s];if(n.type===x.Fragment){r.push.apply(r,Wo(n.props.children,i));return}se(n.type===pt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),se(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Wo(n.props.children,i)),r.push(a)}),r}var hi="get",fi="application/x-www-form-urlencoded";function la(t){return t!=null&&typeof t.tagName=="string"}function fy(t){return la(t)&&t.tagName.toLowerCase()==="button"}function py(t){return la(t)&&t.tagName.toLowerCase()==="form"}function my(t){return la(t)&&t.tagName.toLowerCase()==="input"}function gy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yy(t,e){return t.button===0&&(!e||e==="_self")&&!gy(t)}var Ws=null;function vy(){if(Ws===null)try{new FormData(document.createElement("form"),0),Ws=!1}catch{Ws=!0}return Ws}var xy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ma(t){return t!=null&&!xy.has(t)?(ct(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fi}"`),null):t}function wy(t,e){let r,n,s,i,a;if(py(t)){let l=t.getAttribute("action");n=l?Tt(l,e):null,r=t.getAttribute("method")||hi,s=Ma(t.getAttribute("enctype"))||fi,i=new FormData(t)}else if(fy(t)||my(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(n=u?Tt(u,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||hi,s=Ma(t.getAttribute("formenctype"))||Ma(l.getAttribute("enctype"))||fi,i=new FormData(l,t),!vy()){let{name:c,type:d,value:h}=t;if(d==="image"){let p=c?`${c}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else c&&i.append(c,h)}}else{if(la(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=hi,n=null,s=fi,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function au(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function by(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&Tt(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function _y(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jy(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Sy(t,e,r){let n=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await _y(i,r);return a.links?a.links():[]}return[]}));return Cy(n.flat(1).filter(jy).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Pc(t,e,r,n,s,i){let a=(u,c)=>r[c]?u.route.id!==r[c].route.id:!0,l=(u,c)=>{var d;return r[c].pathname!==u.pathname||((d=r[c].route.path)==null?void 0:d.endsWith("*"))&&r[c].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,c)=>a(u,c)||l(u,c)):i==="data"?e.filter((u,c)=>{var h;let d=n.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(a(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function ky(t,e,{includeHydrateFallback:r}={}){return Ny(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function Ny(t){return[...new Set(t)]}function Ey(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function Cy(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let i=JSON.stringify(Ey(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function Of(){let t=x.useContext(mn);return au(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Ry(){let t=x.useContext(oa);return au(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ou=x.createContext(void 0);ou.displayName="FrameworkContext";function Af(){let t=x.useContext(ou);return au(t,"You must render this element inside a <HydratedRouter> element"),t}function Ty(t,e){let r=x.useContext(ou),[n,s]=x.useState(!1),[i,a]=x.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=e,p=x.useRef(null);x.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let w=g=>{g.forEach(f=>{a(f.isIntersecting)})},b=new IntersectionObserver(w,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[t]),x.useEffect(()=>{if(n){let w=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(w)}}},[n]);let y=()=>{s(!0)},v=()=>{s(!1),a(!1)};return r?t!=="intent"?[i,p,{}]:[i,p,{onFocus:On(l,y),onBlur:On(u,v),onMouseEnter:On(c,y),onMouseLeave:On(d,v),onTouchStart:On(h,y)}]:[!1,p,{}]}function On(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function Py({page:t,...e}){let{router:r}=Of(),n=x.useMemo(()=>jf(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?x.createElement(Ay,{page:t,matches:n,...e}):null}function Oy(t){let{manifest:e,routeModules:r}=Af(),[n,s]=x.useState([]);return x.useEffect(()=>{let i=!1;return Sy(t,e,r).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,r]),n}function Ay({page:t,matches:e,...r}){let n=tr(),{manifest:s,routeModules:i}=Af(),{basename:a}=Of(),{loaderData:l,matches:u}=Ry(),c=x.useMemo(()=>Pc(t,e,u,s,n,"data"),[t,e,u,s,n]),d=x.useMemo(()=>Pc(t,e,u,s,n,"assets"),[t,e,u,s,n]),h=x.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let v=new Set,w=!1;if(e.forEach(g=>{var m;let f=s.routes[g.route.id];!f||!f.hasLoader||(!c.some(_=>_.route.id===g.route.id)&&g.route.id in l&&((m=i[g.route.id])!=null&&m.shouldRevalidate)||f.hasClientLoader?w=!0:v.add(g.route.id))}),v.size===0)return[];let b=by(t,a,"data");return w&&v.size>0&&b.searchParams.set("_routes",e.filter(g=>v.has(g.route.id)).map(g=>g.route.id).join(",")),[b.pathname+b.search]},[a,l,n,s,c,e,t,i]),p=x.useMemo(()=>ky(d,s),[d,s]),y=Oy(d);return x.createElement(x.Fragment,null,h.map(v=>x.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...r})),p.map(v=>x.createElement("link",{key:v,rel:"modulepreload",href:v,...r})),y.map(({key:v,link:w})=>x.createElement("link",{key:v,nonce:r.nonce,...w})))}function Iy(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var If=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{If&&(window.__reactRouterVersion="7.9.5")}catch{}function Ly({basename:t,children:e,window:r}){let n=x.useRef();n.current==null&&(n.current=_0({window:r,v5Compat:!0}));let s=n.current,[i,a]=x.useState({action:s.action,location:s.location}),l=x.useCallback(u=>{x.startTransition(()=>a(u))},[a]);return x.useLayoutEffect(()=>s.listen(l),[s,l]),x.createElement(dy,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var Lf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ua=x.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:l,target:u,to:c,preventScrollReset:d,viewTransition:h,...p},y){let{basename:v}=x.useContext(dt),w=typeof c=="string"&&Lf.test(c),b,g=!1;if(typeof c=="string"&&w&&(b=c,If))try{let C=new URL(window.location.href),k=c.startsWith("//")?new URL(C.protocol+c):new URL(c),B=Tt(k.pathname,v);k.origin===C.origin&&B!=null?c=B+k.search+k.hash:g=!0}catch{ct(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let f=J0(c,{relative:s}),[m,_,j]=Ty(n,p),S=By(c,{replace:a,state:l,target:u,preventScrollReset:d,relative:s,viewTransition:h});function N(C){e&&e(C),C.defaultPrevented||S(C)}let E=x.createElement("a",{...p,...j,href:b||f,onClick:g||i?e:N,ref:Iy(y,_),target:u,"data-discover":!w&&r==="render"?"true":void 0});return m&&!w?x.createElement(x.Fragment,null,E,x.createElement(Py,{page:f})):E});ua.displayName="Link";var $y=x.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:l,children:u,...c},d){let h=Ss(a,{relative:c.relative}),p=tr(),y=x.useContext(oa),{navigator:v,basename:w}=x.useContext(dt),b=y!=null&&Wy(h)&&l===!0,g=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,f=p.pathname,m=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(f=f.toLowerCase(),m=m?m.toLowerCase():null,g=g.toLowerCase()),m&&w&&(m=Tt(m,w)||m);const _=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let j=f===g||!s&&f.startsWith(g)&&f.charAt(_)==="/",S=m!=null&&(m===g||!s&&m.startsWith(g)&&m.charAt(g.length)==="/"),N={isActive:j,isPending:S,isTransitioning:b},E=j?e:void 0,C;typeof n=="function"?C=n(N):C=[n,j?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let k=typeof i=="function"?i(N):i;return x.createElement(ua,{...c,"aria-current":E,className:C,ref:d,style:k,to:a,viewTransition:l},typeof u=="function"?u(N):u)});$y.displayName="NavLink";var Uy=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:i,method:a=hi,action:l,onSubmit:u,relative:c,preventScrollReset:d,viewTransition:h,...p},y)=>{let v=zy(),w=Vy(l,{relative:c}),b=a.toLowerCase()==="get"?"get":"post",g=typeof l=="string"&&Lf.test(l),f=m=>{if(u&&u(m),m.defaultPrevented)return;m.preventDefault();let _=m.nativeEvent.submitter,j=(_==null?void 0:_.getAttribute("formmethod"))||a;v(_||m.currentTarget,{fetcherKey:e,method:j,navigate:r,replace:s,state:i,relative:c,preventScrollReset:d,viewTransition:h})};return x.createElement("form",{ref:y,method:b,action:w,onSubmit:n?u:f,...p,"data-discover":!g&&t==="render"?"true":void 0})});Uy.displayName="Form";function Dy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $f(t){let e=x.useContext(mn);return se(e,Dy(t)),e}function By(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:a}={}){let l=yn(),u=tr(),c=Ss(t,{relative:i});return x.useCallback(d=>{if(yy(d,e)){d.preventDefault();let h=r!==void 0?r:hs(u)===hs(c);l(t,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:a})}},[u,l,c,r,n,e,t,s,i,a])}var My=0,Fy=()=>`__${String(++My)}__`;function zy(){let{router:t}=$f("useSubmit"),{basename:e}=x.useContext(dt),r=ay();return x.useCallback(async(n,s={})=>{let{action:i,method:a,encType:l,formData:u,body:c}=wy(n,e);if(s.navigate===!1){let d=s.fetcherKey||Fy();await t.fetch(d,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||a,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||a,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function Vy(t,{relative:e}={}){let{basename:r}=x.useContext(dt),n=x.useContext(ht);se(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Ss(t||".",{relative:e})},a=tr();if(t==null){i.search=a.search;let l=new URLSearchParams(i.search),u=l.getAll("index");if(u.some(d=>d==="")){l.delete("index"),u.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:kt([r,i.pathname])),hs(i)}function Wy(t,{relative:e}={}){let r=x.useContext(Ef);se(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=$f("useViewTransitionState"),s=Ss(t,{relative:e});if(!r.isTransitioning)return!1;let i=Tt(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=Tt(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Bi(s.pathname,a)!=null||Bi(s.pathname,i)!=null}var Ho=function(t,e){return Ho=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Ho(t,e)};function Uf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ho(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Mi=function(){return Mi=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Mi.apply(this,arguments)};function vn(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Df(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(s<3?a(i):s>3?a(e,r,i):a(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function Bf(t,e){return function(r,n){e(r,n,t)}}function Mf(t,e,r,n,s,i){function a(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var l=n.kind,u=l==="getter"?"get":l==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,d=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h,p=!1,y=r.length-1;y>=0;y--){var v={};for(var w in n)v[w]=w==="access"?{}:n[w];for(var w in n.access)v.access[w]=n.access[w];v.addInitializer=function(g){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(g||null))};var b=(0,r[y])(l==="accessor"?{get:d.get,set:d.set}:d[u],v);if(l==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(h=a(b.get))&&(d.get=h),(h=a(b.set))&&(d.set=h),(h=a(b.init))&&s.unshift(h)}else(h=a(b))&&(l==="field"?s.unshift(h):d[u]=h)}c&&Object.defineProperty(c,n.name,d),p=!0}function Ff(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function zf(t){return typeof t=="symbol"?t:"".concat(t)}function Vf(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Wf(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function U(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{c(n.next(d))}catch(h){a(h)}}function u(d){try{c(n.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(t,e||[])).next())})}function Hf(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(c){return function(d){return u([c,d])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(r=0)),r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var ca=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function qf(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ca(e,t,r)}function Fi(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lu(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(l){a={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function Kf(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(lu(arguments[e]));return t}function Gf(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],a=0,l=i.length;a<l;a++,s++)n[s]=i[a];return n}function Jf(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function un(t){return this instanceof un?(this.v=t,this):new un(t)}function Qf(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(y){return function(v){return Promise.resolve(v).then(y,h)}}function l(y,v){n[y]&&(s[y]=function(w){return new Promise(function(b,g){i.push([y,w,b,g])>1||u(y,w)})},v&&(s[y]=v(s[y])))}function u(y,v){try{c(n[y](v))}catch(w){p(i[0][3],w)}}function c(y){y.value instanceof un?Promise.resolve(y.value.v).then(d,h):p(i[0][2],y)}function d(y){u("next",y)}function h(y){u("throw",y)}function p(y,v){y(v),i.shift(),i.length&&u(i[0][0],i[0][1])}}function Yf(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(a){return(r=!r)?{value:un(t[s](a)),done:!1}:i?i(a):a}:i}}function Xf(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Fi=="function"?Fi(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(a){return new Promise(function(l,u){a=t[i](a),s(l,u,a.done,a.value)})}}function s(i,a,l,u){Promise.resolve(u).then(function(c){i({value:c,done:l})},a)}}function Zf(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Hy=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},qo=function(t){return qo=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},qo(t)};function ep(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=qo(t),n=0;n<r.length;n++)r[n]!=="default"&&ca(e,t,r[n]);return Hy(e,t),e}function tp(t){return t&&t.__esModule?t:{default:t}}function rp(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function np(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function sp(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function ip(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var qy=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function ap(t){function e(i){t.error=t.hasError?new qy(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(a){return e(a),s()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function op(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,a){return n?e?".jsx":".js":s&&(!i||!a)?r:s+i+"."+a.toLowerCase()+"js"}):t}const Ky={__extends:Uf,__assign:Mi,__rest:vn,__decorate:Df,__param:Bf,__esDecorate:Mf,__runInitializers:Ff,__propKey:zf,__setFunctionName:Vf,__metadata:Wf,__awaiter:U,__generator:Hf,__createBinding:ca,__exportStar:qf,__values:Fi,__read:lu,__spread:Kf,__spreadArrays:Gf,__spreadArray:Jf,__await:un,__asyncGenerator:Qf,__asyncDelegator:Yf,__asyncValues:Xf,__makeTemplateObject:Zf,__importStar:ep,__importDefault:tp,__classPrivateFieldGet:rp,__classPrivateFieldSet:np,__classPrivateFieldIn:sp,__addDisposableResource:ip,__disposeResources:ap,__rewriteRelativeImportExtension:op},Gy=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:ip,get __assign(){return Mi},__asyncDelegator:Yf,__asyncGenerator:Qf,__asyncValues:Xf,__await:un,__awaiter:U,__classPrivateFieldGet:rp,__classPrivateFieldIn:sp,__classPrivateFieldSet:np,__createBinding:ca,__decorate:Df,__disposeResources:ap,__esDecorate:Mf,__exportStar:qf,__extends:Uf,__generator:Hf,__importDefault:tp,__importStar:ep,__makeTemplateObject:Zf,__metadata:Wf,__param:Bf,__propKey:zf,__read:lu,__rest:vn,__rewriteRelativeImportExtension:op,__runInitializers:Ff,__setFunctionName:Vf,__spread:Kf,__spreadArray:Jf,__spreadArrays:Gf,__values:Fi,default:Ky},Symbol.toStringTag,{value:"Module"})),Jy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class uu extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Qy extends uu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Oc extends uu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ac extends uu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ko;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ko||(Ko={}));class Yy{constructor(e,{headers:r={},customFetch:n,region:s=Ko.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Jy(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return U(this,arguments,void 0,function*(r,n={}){var s;let i,a;try{const{headers:l,method:u,body:c,signal:d,timeout:h}=n;let p={},{region:y}=n;y||(y=this.region);const v=new URL(`${this.url}/${r}`);y&&y!=="any"&&(p["x-region"]=y,v.searchParams.set("forceFunctionRegion",y));let w;c&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=c):typeof c=="string"?(p["Content-Type"]="text/plain",w=c):typeof FormData<"u"&&c instanceof FormData?w=c:(p["Content-Type"]="application/json",w=JSON.stringify(c)):w=c;let b=d;h&&(a=new AbortController,i=setTimeout(()=>a.abort(),h),d?(b=a.signal,d.addEventListener("abort",()=>a.abort())):b=a.signal);const g=yield this.fetch(v.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:w,signal:b}).catch(j=>{throw new Qy(j)}),f=g.headers.get("x-relay-error");if(f&&f==="true")throw new Oc(g);if(!g.ok)throw new Ac(g);let m=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return m==="application/json"?_=yield g.json():m==="application/octet-stream"||m==="application/pdf"?_=yield g.blob():m==="text/event-stream"?_=g:m==="multipart/form-data"?_=yield g.formData():_=yield g.text(),{data:_,error:null,response:g}}catch(l){return{data:null,error:l,response:l instanceof Ac||l instanceof Oc?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Re={};const xn=Jp(Gy);var Hs={},qs={},Ks={},Gs={},Js={},Qs={},Ic;function lp(){if(Ic)return Qs;Ic=1,Object.defineProperty(Qs,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Qs.default=t,Qs}var Lc;function up(){if(Lc)return Js;Lc=1,Object.defineProperty(Js,"__esModule",{value:!0});const e=xn.__importDefault(lp());class r{constructor(s){var i,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,d,h,p;let y=null,v=null,w=null,b=u.status,g=u.statusText;if(u.ok){if(this.method!=="HEAD"){const j=await u.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?v=j:v=JSON.parse(j))}const m=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");m&&_&&_.length>1&&(w=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(y={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,w=null,b=406,g="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const m=await u.text();try{y=JSON.parse(m),Array.isArray(y)&&u.status===404&&(v=[],y=null,b=200,g="OK")}catch{u.status===404&&m===""?(b=204,g="No Content"):y={message:m}}if(y&&this.isMaybeSingle&&(!((p=y==null?void 0:y.details)===null||p===void 0)&&p.includes("0 rows"))&&(y=null,b=200,g="OK"),y&&this.shouldThrowOnError)throw new e.default(y)}return{error:y,data:v,count:w,status:b,statusText:g}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,d,h;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(d=u==null?void 0:u.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=u==null?void 0:u.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,i)}returns(){return this}overrideTypes(){return this}}return Js.default=r,Js}var $c;function cp(){if($c)return Gs;$c=1,Object.defineProperty(Gs,"__esModule",{value:!0});const e=xn.__importDefault(up());class r extends e.default{select(s){let i=!1;const a=(s??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:l,referencedTable:u=l}={}){const c=u?`${u}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:l=a}={}){const u=typeof l>"u"?"offset":`${l}.offset`,c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:l=!1,wal:u=!1,format:c="text"}={}){var d;const h=[s?"analyze":null,i?"verbose":null,a?"settings":null,l?"buffers":null,u?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Gs.default=r,Gs}var Uc;function cu(){if(Uc)return Ks;Uc=1,Object.defineProperty(Ks,"__esModule",{value:!0});const e=xn.__importDefault(cp()),r=new RegExp("[,()]");class n extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const l=Array.from(new Set(a)).map(u=>typeof u=="string"&&r.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:l,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${c}fts${d}.${a}`),this}match(i){return Object.entries(i).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(i,a,l){return this.url.searchParams.append(i,`not.${a}.${l}`),this}or(i,{foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,a,l){return this.url.searchParams.append(i,`${a}.${l}`),this}}return Ks.default=n,Ks}var Dc;function dp(){if(Dc)return qs;Dc=1,Object.defineProperty(qs,"__esModule",{value:!0});const e=xn.__importDefault(cu());class r{constructor(s,{headers:i={},schema:a,fetch:l}){this.url=s,this.headers=new Headers(i),this.schema=a,this.fetch=l}select(s,i){const{head:a=!1,count:l}=i??{},u=a?"HEAD":"GET";let c=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:a=!0}={}){var l;const u="POST";if(i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:l,defaultToNull:u=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((p,y)=>p.concat(Object.keys(y)),[]);if(h.length>0){const p=[...new Set(h)].map(y=>`"${y}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:i}={}){var a;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var i;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return qs.default=r,qs}var Bc;function Xy(){if(Bc)return Hs;Bc=1,Object.defineProperty(Hs,"__esModule",{value:!0});const t=xn,e=t.__importDefault(dp()),r=t.__importDefault(cu());class n{constructor(i,{headers:a={},schema:l,fetch:u}={}){this.url=i,this.headers=new Headers(a),this.schemaName=l,this.fetch=u}from(i){const a=new URL(`${this.url}/${i}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:l=!1,get:u=!1,count:c}={}){var d;let h;const p=new URL(`${this.url}/rpc/${i}`);let y;l||u?(h=l?"HEAD":"GET",Object.entries(a).filter(([w,b])=>b!==void 0).map(([w,b])=>[w,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([w,b])=>{p.searchParams.append(w,b)})):(h="POST",y=a);const v=new Headers(this.headers);return c&&v.set("Prefer",`count=${c}`),new r.default({method:h,url:p,headers:v,schema:this.schemaName,body:y,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Hs.default=n,Hs}Object.defineProperty(Re,"__esModule",{value:!0});var hp=Re.PostgrestError=_p=Re.PostgrestBuilder=wp=Re.PostgrestTransformBuilder=vp=Re.PostgrestFilterBuilder=gp=Re.PostgrestQueryBuilder=pp=Re.PostgrestClient=void 0;const wn=xn,fp=wn.__importDefault(Xy());var pp=Re.PostgrestClient=fp.default;const mp=wn.__importDefault(dp());var gp=Re.PostgrestQueryBuilder=mp.default;const yp=wn.__importDefault(cu());var vp=Re.PostgrestFilterBuilder=yp.default;const xp=wn.__importDefault(cp());var wp=Re.PostgrestTransformBuilder=xp.default;const bp=wn.__importDefault(up());var _p=Re.PostgrestBuilder=bp.default;const jp=wn.__importDefault(lp());hp=Re.PostgrestError=jp.default;var Sp=Re.default={PostgrestClient:fp.default,PostgrestQueryBuilder:mp.default,PostgrestFilterBuilder:yp.default,PostgrestTransformBuilder:xp.default,PostgrestBuilder:bp.default,PostgrestError:jp.default};const Zy=Gp({__proto__:null,get PostgrestBuilder(){return _p},get PostgrestClient(){return pp},get PostgrestError(){return hp},get PostgrestFilterBuilder(){return vp},get PostgrestQueryBuilder(){return gp},get PostgrestTransformBuilder(){return wp},default:Sp},[Re]),{PostgrestClient:ev,PostgrestQueryBuilder:Ww,PostgrestFilterBuilder:Hw,PostgrestTransformBuilder:qw,PostgrestBuilder:Kw,PostgrestError:Gw}=Sp||Zy;class tv{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const rv="2.81.1",nv=`realtime-js/${rv}`,kp="1.0.0",sv="2.0.0",Mc=kp,Go=1e4,iv=1e3,av=100;var ur;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ur||(ur={}));var pe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(pe||(pe={}));var Ke;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ke||(Ke={}));var Jo;(function(t){t.websocket="websocket"})(Jo||(Jo={}));var cr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(cr||(cr={}));class ov{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,r){if(this._isArrayBuffer(e.payload))return r(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodePush(e){const{join_ref:r,ref:n,event:s,topic:i,payload:a}=e,l=this.META_LENGTH+r.length+n.length+i.length+s.length,u=new ArrayBuffer(this.HEADER_LENGTH+l);let c=new DataView(u),d=0;c.setUint8(d++,this.KINDS.push),c.setUint8(d++,r.length),c.setUint8(d++,n.length),c.setUint8(d++,i.length),c.setUint8(d++,s.length),Array.from(r,p=>c.setUint8(d++,p.charCodeAt(0))),Array.from(n,p=>c.setUint8(d++,p.charCodeAt(0))),Array.from(i,p=>c.setUint8(d++,p.charCodeAt(0))),Array.from(s,p=>c.setUint8(d++,p.charCodeAt(0)));var h=new Uint8Array(u.byteLength+a.byteLength);return h.set(new Uint8Array(u),0),h.set(new Uint8Array(a),u.byteLength),h.buffer}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const{join_ref:s,ref:i,topic:a}=e,l=e.payload.event,u=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0),c=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+i.length+a.length+l.length,d=new ArrayBuffer(this.HEADER_LENGTH+c);let h=new DataView(d),p=0;h.setUint8(p++,this.KINDS.userBroadcastPush),h.setUint8(p++,s.length),h.setUint8(p++,i.length),h.setUint8(p++,a.length),h.setUint8(p++,l.length),h.setUint8(p++,this.BINARY_ENCODING),Array.from(s,v=>h.setUint8(p++,v.charCodeAt(0))),Array.from(i,v=>h.setUint8(p++,v.charCodeAt(0))),Array.from(a,v=>h.setUint8(p++,v.charCodeAt(0))),Array.from(l,v=>h.setUint8(p++,v.charCodeAt(0)));var y=new Uint8Array(d.byteLength+u.byteLength);return y.set(new Uint8Array(d),0),y.set(new Uint8Array(u),d.byteLength),y.buffer}_encodeJsonUserBroadcastPush(e){var r,n;const{join_ref:s,ref:i,topic:a}=e,l=e.payload.event,u=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},d=new TextEncoder().encode(JSON.stringify(u)).buffer,h=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+i.length+a.length+l.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let y=new DataView(p),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,s.length),y.setUint8(v++,i.length),y.setUint8(v++,a.length),y.setUint8(v++,l.length),y.setUint8(v++,this.JSON_ENCODING),Array.from(s,b=>y.setUint8(v++,b.charCodeAt(0))),Array.from(i,b=>y.setUint8(v++,b.charCodeAt(0))),Array.from(a,b=>y.setUint8(v++,b.charCodeAt(0))),Array.from(l,b=>y.setUint8(v++,b.charCodeAt(0)));var w=new Uint8Array(p.byteLength+d.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(d),p.byteLength),w.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,i,a,l,u]=n;return r({join_ref:s,ref:i,topic:a,event:l,payload:u})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(e,r,s);case this.KINDS.reply:return this._decodeReply(e,r,s);case this.KINDS.broadcast:return this._decodeBroadcast(e,r,s);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodePush(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3);let l=this.HEADER_LENGTH+this.META_LENGTH-1;const u=n.decode(e.slice(l,l+s));l=l+s;const c=n.decode(e.slice(l,l+i));l=l+i;const d=n.decode(e.slice(l,l+a));l=l+a;const h=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{join_ref:u,ref:null,topic:c,event:d,payload:h}}_decodeReply(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),l=r.getUint8(4);let u=this.HEADER_LENGTH+this.META_LENGTH;const c=n.decode(e.slice(u,u+s));u=u+s;const d=n.decode(e.slice(u,u+i));u=u+i;const h=n.decode(e.slice(u,u+a));u=u+a;const p=n.decode(e.slice(u,u+l));u=u+l;const y=JSON.parse(n.decode(e.slice(u,e.byteLength))),v={status:p,response:y};return{join_ref:c,ref:d,topic:h,event:Ke.reply,payload:v}}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(e.slice(a,a+s));a=a+s;const u=n.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{join_ref:null,ref:null,topic:l,event:u,payload:c}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),l=r.getUint8(4);let u=this.HEADER_LENGTH+4;const c=n.decode(e.slice(u,u+s));u=u+s;const d=n.decode(e.slice(u,u+i));u=u+i;const h=n.decode(e.slice(u,u+a));u=u+a;const p=e.slice(u,e.byteLength),y=l===this.JSON_ENCODING?JSON.parse(n.decode(p)):p,v={type:this.BROADCAST,event:d,payload:y};return a>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST,payload:v}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class Np{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Z;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Z||(Z={}));const Fc=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=lv(a,t,e,s),i),{}):{}},lv=(t,e,r,n)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,a=r[t];return i&&!n.includes(i)?Ep(i,a):Qo(a)},Ep=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return hv(e,r)}switch(t){case Z.bool:return uv(e);case Z.float4:case Z.float8:case Z.int2:case Z.int4:case Z.int8:case Z.numeric:case Z.oid:return cv(e);case Z.json:case Z.jsonb:return dv(e);case Z.timestamp:return fv(e);case Z.abstime:case Z.date:case Z.daterange:case Z.int4range:case Z.int8range:case Z.money:case Z.reltime:case Z.text:case Z.time:case Z.timestamptz:case Z.timetz:case Z.tsrange:case Z.tstzrange:return Qo(e);default:return Qo(e)}},Qo=t=>t,uv=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},cv=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},dv=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},hv=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const a=t.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Ep(e,l))}return t},fv=t=>typeof t=="string"?t.replace(" ","T"):t,Cp=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Fa{constructor(e,r,n={},s=Go){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(zc||(zc={}));class Kn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Kn.syncState(this.state,s,i,a),this.pendingDiffs.forEach(u=>{this.state=Kn.syncDiff(this.state,u,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Kn.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),a=this.transformState(r),l={},u={};return this.map(i,(c,d)=>{a[c]||(u[c]=d)}),this.map(a,(c,d)=>{const h=i[c];if(h){const p=d.map(b=>b.presence_ref),y=h.map(b=>b.presence_ref),v=d.filter(b=>y.indexOf(b.presence_ref)<0),w=h.filter(b=>p.indexOf(b.presence_ref)<0);v.length>0&&(l[c]=v),w.length>0&&(u[c]=w)}else l[c]=d}),this.syncDiff(i,{joins:l,leaves:u},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,u)=>{var c;const d=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(u),d.length>0){const h=e[l].map(y=>y.presence_ref),p=d.filter(y=>h.indexOf(y.presence_ref)<0);e[l].unshift(...p)}n(l,d,u)}),this.map(a,(l,u)=>{let c=e[l];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=c,s(l,c,u),c.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Vc||(Vc={}));var Gn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Gn||(Gn={}));var wt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(wt||(wt={}));class du{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Fa(this,Ke.join,this.params,this.timeout),this.rejoinTimer=new Np(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pe.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ke.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Kn(this),this.broadcastEndpointURL=Cp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==pe.closed){const{config:{broadcast:a,presence:l,private:u}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Gn.PRESENCE]&&this.bindings[Gn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},p={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(wt.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(wt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket.setAuth(),y===void 0){e==null||e(wt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,g=[];for(let f=0;f<b;f++){const m=w[f],{filter:{event:_,schema:j,table:S,filter:N}}=m,E=y&&y[f];if(E&&E.event===_&&E.schema===j&&E.table===S&&E.filter===N)g.push(Object.assign(Object.assign({},m),{id:E.id}));else{this.unsubscribe(),this.state=pe.errored,e==null||e(wt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(wt.SUBSCRIBED);return}}).receive("error",y=>{this.state=pe.errored,e==null||e(wt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(wt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===pe.joined&&e===Gn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const c=await l.json();u=c.error||c.message||u}catch{}return Promise.reject(new Error(u))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,u;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ke.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Fa(this,Ke.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pe.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Fa(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>av){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const a=e.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=Ke;if(n&&[l,u,c,d].indexOf(a)>=0&&n!==this._joinRef())return;let p=this._onMessage(a,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var v,w,b;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(w=y.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(y=>y.callback(p,n)):(i=this.bindings[a])===null||i===void 0||i.filter(y=>{var v,w,b,g,f,m;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in y){const _=y.id,j=(v=y.filter)===null||v===void 0?void 0:v.event;return _&&((w=r.ids)===null||w===void 0?void 0:w.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(f=(g=y==null?void 0:y.filter)===null||g===void 0?void 0:g.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return _==="*"||_===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===a}).map(y=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:w,table:b,commit_timestamp:g,type:f,errors:m}=v;p=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:g,eventType:f,new:{},old:{},errors:m}),this._getPayloadRecords(v))}y.callback(p,n)})}_isClosed(){return this.state===pe.closed}_isJoined(){return this.state===pe.joined}_isJoining(){return this.state===pe.joining}_isLeaving(){return this.state===pe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&du.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ke.close,{},e)}_onError(e){this._on(Ke.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Fc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Fc(e.columns,e.old_record)),r}}const za=()=>{},Ys={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pv=[1e3,2e3,5e3,1e4],mv=1e4,gv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yv{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Go,this.transport=null,this.heartbeatIntervalMs=Ys.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=za,this.ref=0,this.reconnectTimer=null,this.vsn=Mc,this.logger=za,this.conn=null,this.sendBuffer=[],this.serializer=new ov,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Jo.websocket}`,this.httpEndpoint=Cp(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ur.connecting:return cr.Connecting;case ur.open:return cr.Open;case ur.closing:return cr.Closing;default:return cr.Closed}}isConnected(){return this.connectionState()===cr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new du(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,a=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(iv,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ys.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:a}=r,l=a?`(${a})`:"",u=i.status||"";this.log("receive",`${u} ${n} ${s} ${l}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ur.open||this.conn.readyState===ur.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ke.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([gv],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:nv};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ke.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Np(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ys.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,a,l,u,c,d,h,p,y;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Go,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Ys.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:za,this.vsn=(u=e==null?void 0:e.vsn)!==null&&u!==void 0?u:Mc,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:v=>pv[v-1]||mv,this.vsn){case kp:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(v,w)=>w(JSON.stringify(v)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(v,w)=>w(JSON.parse(v));break;case sv:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class hu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ie(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class vv extends hu{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Yo extends hu{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const fu=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),xv=()=>Response,Xo=t=>{if(Array.isArray(t))return t.map(r=>Xo(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Xo(n)}),e},wv=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Va=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},bv=(t,e,r)=>U(void 0,void 0,void 0,function*(){const n=yield xv();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new vv(Va(s),i,a))}).catch(s=>{e(new Yo(Va(s),s))}):e(new Yo(Va(t),t))}),_v=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(wv(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function ks(t,e,r,n,s,i){return U(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(r,_v(e,n,s,i)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>bv(u,l,n))})})}function fs(t,e,r,n){return U(this,void 0,void 0,function*(){return ks(t,"GET",e,r,n)})}function st(t,e,r,n,s){return U(this,void 0,void 0,function*(){return ks(t,"POST",e,n,s,r)})}function Zo(t,e,r,n,s){return U(this,void 0,void 0,function*(){return ks(t,"PUT",e,n,s,r)})}function jv(t,e,r,n){return U(this,void 0,void 0,function*(){return ks(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function pu(t,e,r,n,s){return U(this,void 0,void 0,function*(){return ks(t,"DELETE",e,n,s,r)})}class Sv{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return U(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ie(e))return{data:null,error:e};throw e}})}}var Rp;class kv{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[Rp]="BlobDownloadBuilder",this.promise=null}asStream(){return new Sv(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return U(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ie(e))return{data:null,error:e};throw e}})}}Rp=Symbol.toStringTag;const Nv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ev{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=fu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return U(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Wc),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),u&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(u))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const c=this._removeEmptyFolders(r),d=this._getFinalPath(c),h=yield(e=="PUT"?Zo:st)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ie(i))return{data:null,error:i};throw i}})}upload(e,r,n){return U(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return U(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let u;const c=Object.assign({upsert:Wc.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",c.cacheControl)):(u=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield Zo(this.fetch,l.toString(),u,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(ie(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,r){return U(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield st(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new hu("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}update(e,r,n){return U(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return U(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}copy(e,r,n){return U(this,void 0,void 0,function*(){try{return{data:{path:(yield st(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return U(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield st(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return U(this,void 0,void 0,function*(){try{const s=yield st(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"",l=this._getFinalPath(e),u=()=>fs(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new kv(u,this.shouldThrowOnError)}info(e){return U(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield fs(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Xo(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}exists(e){return U(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield jv(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n)&&n instanceof Yo){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});u!==""&&s.push(u);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}remove(e){return U(this,void 0,void 0,function*(){try{return{data:yield pu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}list(e,r,n){return U(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Nv),r),{prefix:e||""});return{data:yield st(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}listV2(e,r){return U(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield st(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Tp="2.81.1",Pp={"X-Client-Info":`storage-js/${Tp}`};class Cv{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Pp),r),this.fetch=fu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return U(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield fs(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}getBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}createBucket(e){return U(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield st(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return U(this,void 0,void 0,function*(){try{return{data:yield Zo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}emptyBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}deleteBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield pu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class Rv{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Pp),r),this.fetch=fu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}listBuckets(e){return U(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield fs(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}deleteBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield pu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}}const mu={"X-Client-Info":`storage-js/${Tp}`,"Content-Type":"application/json"};class Op extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Be(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Wa extends Op{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tv extends Op{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Hc;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Hc||(Hc={}));const gu=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Pv=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},qc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ov=(t,e,r)=>U(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";e(new Wa(qc(a),s,l))}).catch(()=>{const a=s+"",l=i.statusText||`HTTP ${s} error`;e(new Wa(l,s,a))});else{const a=s+"",l=i.statusText||`HTTP ${s} error`;e(new Wa(l,s,a))}}else e(new Tv(qc(t),t))}),Av=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(Pv(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function Iv(t,e,r,n,s,i){return U(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(r,Av(e,n,s,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;const c=u.headers.get("content-type");return!c||!c.includes("application/json")?{}:u.json()}).then(u=>a(u)).catch(u=>Ov(u,l,n))})})}function Me(t,e,r,n,s){return U(this,void 0,void 0,function*(){return Iv(t,"POST",e,n,s,r)})}class Lv{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mu),r),this.fetch=gu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return U(this,void 0,void 0,function*(){try{return{data:(yield Me(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}getIndex(e,r){return U(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}listIndexes(e){return U(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return U(this,void 0,void 0,function*(){try{return{data:(yield Me(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}}class $v{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mu),r),this.fetch=gu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return U(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Me(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}getVectors(e){return U(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}listVectors(e){return U(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Me(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}queryVectors(e){return U(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}deleteVectors(e){return U(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Me(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}}class Uv{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mu),r),this.fetch=gu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return U(this,void 0,void 0,function*(){try{return{data:(yield Me(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}getBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}listBuckets(){return U(this,arguments,void 0,function*(e={}){try{return{data:yield Me(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}deleteBucket(e){return U(this,void 0,void 0,function*(){try{return{data:(yield Me(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}}class Dv extends Uv{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new Bv(this.url,this.headers,e,this.fetch)}}class Bv extends Lv{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return U(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return U(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return U(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return U(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Mv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Mv extends $v{constructor(e,r,n,s,i){super(e,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return U(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return U(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return U(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return U(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return U(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Fv extends Cv{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new Ev(this.url,this.headers,e,this.fetch)}get vectors(){return new Dv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Rv(this.url+"/iceberg",this.headers,this.fetch)}}const zv="2.81.1";let Un="";typeof Deno<"u"?Un="deno":typeof document<"u"?Un="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Un="react-native":Un="node";const Vv={"X-Client-Info":`supabase-js-${Un}/${zv}`},Wv={headers:Vv},Hv={schema:"public"},qv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Kv={},Gv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Jv=()=>Headers,Qv=(t,e,r)=>{const n=Gv(r),s=Jv();return async(i,a)=>{var l;const u=(l=await e())!==null&&l!==void 0?l:t;let c=new s(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),n(i,Object.assign(Object.assign({},a),{headers:c}))}};function Yv(t){return t.endsWith("/")?t:t+"/"}function Xv(t,e){var r,n;const{db:s,auth:i,realtime:a,global:l}=t,{db:u,auth:c,realtime:d,global:h}=e,p={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function Zv(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Yv(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ap="2.81.1",Ir=30*1e3,el=3,Ha=el*Ir,ex="http://localhost:9999",tx="supabase.auth.token",rx={"X-Client-Info":`gotrue-js/${Ap}`},tl="X-Supabase-Api-Version",Ip={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sx=10*60*1e3;class ps extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function M(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class ix extends ps{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function ax(t){return M(t)&&t.name==="AuthApiError"}class dr extends ps{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class rr extends ps{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class tt extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ox(t){return M(t)&&t.name==="AuthSessionMissingError"}class Rr extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xs extends rr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Zs extends rr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lx(t){return M(t)&&t.name==="AuthImplicitGrantRedirectError"}class Kc extends rr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rl extends rr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function qa(t){return M(t)&&t.name==="AuthRetryableFetchError"}class Gc extends rr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class nl extends rr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jc=` 	
\r=`.split(""),ux=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Jc.length;e+=1)t[Jc[e].charCodeAt(0)]=-2;for(let e=0;e<zi.length;e+=1)t[zi[e].charCodeAt(0)]=e;return t})();function Qc(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(zi[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(zi[n]),e.queuedBits-=6}}function Lp(t,e,r){const n=ux[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Yc(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{hx(a,n,r)};for(let a=0;a<t.length;a+=1)Lp(t.charCodeAt(a),s,i);return e.join("")}function cx(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function dx(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}cx(n,e)}}function hx(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function en(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Lp(t.charCodeAt(s),r,n);return new Uint8Array(e)}function fx(t){const e=[];return dx(t,r=>e.push(r)),new Uint8Array(e)}function mr(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>Qc(s,r,n)),Qc(null,r,n),e.join("")}function px(t){return Math.round(Date.now()/1e3)+t}function mx(){return Symbol("auth-callback")}const xe=()=>typeof window<"u"&&typeof document<"u",sr={tested:!1,writable:!1},$p=()=>{if(!xe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sr.tested)return sr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),sr.tested=!0,sr.writable=!0}catch{sr.tested=!0,sr.writable=!1}return sr.writable};function gx(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const Up=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),yx=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Lr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ir=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},It=async(t,e)=>{await t.removeItem(e)};class da{constructor(){this.promise=new da.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}da.promiseConstructor=Promise;function Ka(t){const e=t.split(".");if(e.length!==3)throw new nl("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!nx.test(e[n]))throw new nl("JWT not in base64url format");return{header:JSON.parse(Yc(e[0])),payload:JSON.parse(Yc(e[1])),signature:en(e[2]),raw:{header:e[0],payload:e[1]}}}async function vx(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function xx(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function wx(t){return("0"+t.toString(16)).substr(-2)}function bx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,wx).join("")}async function _x(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function jx(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await _x(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Tr(t,e,r=!1){const n=bx();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Lr(t,`${e}-code-verifier`,s);const i=await jx(n);return[i,n===i?"plain":"s256"]}const Sx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kx(t){const e=t.headers.get(tl);if(!e||!e.match(Sx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Nx(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Ex(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Cx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pr(t){if(!Cx.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ga(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Rx(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function Xc(t){return JSON.parse(JSON.stringify(t))}const lr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Tx=[502,503,504];async function Zc(t){var e;if(!yx(t))throw new rl(lr(t),0);if(Tx.includes(t.status))throw new rl(lr(t),t.status);let r;try{r=await t.json()}catch(i){throw new dr(lr(i),i)}let n;const s=kx(t);if(s&&s.getTime()>=Ip["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Gc(lr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new tt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Gc(lr(r),t.status,r.weak_password.reasons);throw new ix(lr(r),t.status||500,n)}const Px=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function F(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[tl]||(i[tl]=Ip["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await Ox(t,e,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function Ox(t,e,r,n,s,i){const a=Px(e,n,s,i);let l;try{l=await t(r,Object.assign({},a))}catch(u){throw console.error(u),new rl(lr(u),0)}if(l.ok||await Zc(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(u){await Zc(u)}}function rt(t){var e;let r=null;Lx(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=px(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function ed(t){const e=rt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Bt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Ax(t){return{data:t,error:null}}function Ix(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,a=vn(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},u=Object.assign({},a);return{data:{properties:l,user:u},error:null}}function td(t){return t}function Lx(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ja=["global","local","others"];class $x{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Up(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Ja[0]){if(Ja.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ja.join(", ")}`);try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Bt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=vn(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Ix,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(M(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Bt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,a,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:td});if(d.error)throw d.error;const h=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=w}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(M(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Pr(e);try{return await F(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Bt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Pr(e);try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Bt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Pr(e);try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Bt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Pr(e.userId);try{const{data:r,error:n}=await F(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Pr(e.userId),Pr(e.id);try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,a,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await F(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:td});if(d.error)throw d.error;const h=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=w}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(M(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await F(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await F(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await F(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await F(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await F(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}}function rd(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Or={debug:!!(globalThis&&$p()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Dp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ux extends Dp{}async function Dx(t,e,r){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Or.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ux(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Or.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Bx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Bp(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Mx(t){return parseInt(t,16)}function Fx(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function zx(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:u,resources:c,scheme:d,uri:h,version:p}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const y=Bp(t.address),v=d?`${d}://${n}`:n,w=t.statement?`${t.statement}
`:"",b=`${v} wants you to sign in with your Ethereum account:
${y}

${w}`;let g=`URI: ${h}
Version: ${p}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),l&&(g+=`
Not Before: ${l.toISOString()}`),u&&(g+=`
Request ID: ${u}`),c){let f=`
Resources:`;for(const m of c){if(!m||typeof m!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${m}`);f+=`
- ${m}`}g+=f}return`${b}
${g}`}class de extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Vi extends de{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Vx({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new de({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new de({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new de({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new de({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new de({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new de({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new de({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new de({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Mp(a)){if(i.rp.id!==a)return new de({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new de({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new de({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new de({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new de({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Wx({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new de({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new de({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Mp(n)){if(r.rpId!==n)return new de({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new de({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new de({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new de({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Hx{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const qx=new Hx;function Kx(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=vn(t,["challenge","user","excludeCredentials"]),i=en(e).buffer,a=Object.assign(Object.assign({},r),{id:en(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const c=n[u];l.excludeCredentials[u]=Object.assign(Object.assign({},c),{id:en(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return l}function Gx(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=vn(t,["challenge","allowCredentials"]),s=en(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const l=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:en(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Jx(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:mr(new Uint8Array(t.response.attestationObject)),clientDataJSON:mr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Qx(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:mr(new Uint8Array(s.authenticatorData)),clientDataJSON:mr(new Uint8Array(s.clientDataJSON)),signature:mr(new Uint8Array(s.signature)),userHandle:s.userHandle?mr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Mp(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function nd(){var t,e;return!!(xe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Yx(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vi("Browser returned unexpected credential type",e)}:{data:null,error:new Vi("Empty credential response",e)}}catch(e){return{data:null,error:Vx({error:e,options:t})}}}async function Xx(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vi("Browser returned unexpected credential type",e)}:{data:null,error:new Vi("Empty credential response",e)}}catch(e){return{data:null,error:Wx({error:e,options:t})}}}const Zx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ew={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Wi(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))n[i]=a;else if(r(a))n[i]=a;else if(e(a)){const l=n[i];e(l)?n[i]=Wi(l,a):n[i]=Wi(a)}else n[i]=a}return n}function tw(t,e){return Wi(Zx,t,e||{})}function rw(t,e){return Wi(ew,t,e||{})}class nw{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:l};const u=s??qx.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=tw(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await Yx({publicKey:c,signal:u});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=rw(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await Xx(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:u}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return M(a)?{data:null,error:a}:{data:null,error:new dr("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ps("rpId is required for WebAuthn authentication")};try{if(!nd())return{data:null,error:new dr("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:u}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(a){return M(a)?{data:null,error:a}:{data:null,error:new dr("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ps("rpId is required for WebAuthn registration")};try{if(!nd())return{data:null,error:new dr("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:u,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:c}}catch(a){return M(a)?{data:null,error:a}:{data:null,error:new dr("Unexpected error in register",a)}}}}Bx();const sw={url:ex,storageKey:tx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function sd(t,e,r){return await r()}const Ar={};class ms{get jwks(){var e,r;return(r=(e=Ar[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ar[this.storageKey]=Object.assign(Object.assign({},Ar[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ar[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ar[this.storageKey]=Object.assign(Object.assign({},Ar[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},sw),e);if(this.storageKey=i.storageKey,this.instanceID=(r=ms.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ms.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&xe()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new $x({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Up(i.fetch),this.lock=i.lock||sd,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:xe()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Dx:this.lock=sd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new nw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:$p()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rd(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=rd(this.memoryStorage)),xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ap}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(xe()&&(r=gx(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),xe()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),lx(i)){const u=(e=i.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return M(r)?this._returnResult({error:r}):this._returnResult({error:new dr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:rt}),{data:a,error:l}=i;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const u=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(i){if(M(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:h,options:p}=e;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Tr(this.storage,this.storageKey)),i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:y,code_challenge_method:v},xform:rt})}else if("phone"in e){const{phone:d,password:h,options:p}=e;i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:rt})}else throw new Xs("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const u=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(i){if(M(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:a,options:l}=e;r=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ed})}else if("phone"in e){const{phone:i,password:a,options:l}=e;r=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ed})}else throw new Xs("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Rr;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,a,l,u,c,d,h,p;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:w,wallet:b,statement:g,options:f}=e;let m;if(xe())if(typeof b=="object")m=b;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")m=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=b}const _=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href),j=await m.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Bp(j[0]);let N=(n=f==null?void 0:f.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const C=await m.request({method:"eth_chainId"});N=Mx(C)}const E={domain:_.host,address:S,statement:g,uri:_.href,version:"1",chainId:N,nonce:(s=f==null?void 0:f.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=f==null?void 0:f.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=f==null?void 0:f.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=f==null?void 0:f.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(c=f==null?void 0:f.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=f==null?void 0:f.signInWithEthereum)===null||d===void 0?void 0:d.resources};y=zx(E),v=await m.request({method:"personal_sign",params:[Fx(y),S]})}try{const{data:w,error:b}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:v},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:rt});if(b)throw b;if(!w||!w.session||!w.user){const g=new Rr;return this._returnResult({data:{user:null,session:null},error:g})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:b})}catch(w){if(M(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var r,n,s,i,a,l,u,c,d,h,p,y;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:b,wallet:g,statement:f,options:m}=e;let _;if(xe())if(typeof g=="object")_=g;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const j=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),f?{statement:f}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)v=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),w=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(d=m==null?void 0:m.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=S}}try{const{data:b,error:g}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:mr(w)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:rt});if(g)throw g;if(!b||!b.session||!b.user){const f=new Rr;return this._returnResult({data:{user:null,session:null},error:f})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:g})}catch(b){if(M(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const r=await ir(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:rt});if(await It(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const l=new Rr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(M(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=e,l=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:rt}),{data:u,error:c}=l;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!u||!u.session||!u.user){const d=new Rr;return this._returnResult({data:{user:null,session:null},error:d})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:c})}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,i,a;try{if("email"in e){const{email:l,options:u}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Tr(this.storage,this.storageKey));const{error:h}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:l,options:u}=e,{data:c,error:d}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Xs("You must provide either an email or phone number.")}catch(l){if(M(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:rt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,c=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(s){if(M(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,i,a;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Tr(this.storage,this.storageKey));const c=await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:Ax});return!((i=c.data)===null||i===void 0)&&i.url&&xe()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(l){if(M(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new tt;const{error:s}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(M(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:a}=await F(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:a,error:l}=await F(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l})}throw new Xs("You must provide either an email or phone number and a type")}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ir(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Ha:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await ir(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Ga()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=Rx(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Bt}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tt}:await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Bt})})}catch(r){if(M(r))return ox(r)&&(await this._removeSession(),await It(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new tt;const a=s.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await Tr(this.storage,this.storageKey));const{data:c,error:d}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:a.access_token,xform:Bt});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(M(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new tt;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Ka(e.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)throw u;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(M(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:l}=r;if(l)throw l;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new tt;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!xe())throw new Zs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Zs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Kc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Kc("No code detected.");const{data:f,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:u,token_type:c}=e;if(!i||!l||!a||!c)throw new Zs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let p=d+h;u&&(p=parseInt(u));const y=p-d;y*1e3<=Ir&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const v=p-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,d);const{data:w,error:b}=await this._getUser(i);if(b)throw b;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:p,refresh_token:a,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(n){if(M(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await ir(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(ax(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await It(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=mx(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Tr(this.storage,this.storageKey,!0));try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(M(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,u,c,d;const{data:h,error:p}=i;if(p)throw p;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await F(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return xe()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(M(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:a,provider:l,token:u,access_token:c,nonce:d}=e,h=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:u,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:rt}),{data:p,error:y}=h;return y?this._returnResult({data:{user:null,session:null},error:y}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Rr}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:y}))}catch(s){if(M(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await F(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await xx(async s=>(s>0&&await vx(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rt})),(s,i)=>{const a=200*Math.pow(2,s);return i&&qa(i)&&Date.now()+a-n<Ir})}catch(n){if(this._debug(r,"error",n),M(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),xe()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ir(this.storage,this.storageKey);if(s&&this.userStorage){let a=await ir(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Lr(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Ga()}else if(s&&!s.user&&!s.user){const a=await ir(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await It(this.storage,this.storageKey+"-user"),await Lr(this.storage,this.storageKey,s)):s.user=Ga()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ha;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ha}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),qa(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new tt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new da;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new tt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),M(i)){const a={data:null,error:i};return qa(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(u){i.push(u)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Lr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Xc(s);await Lr(this.storage,this.storageKey,i)}else{const s=Xc(r);await Lr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await It(this.storage,this.storageKey),await It(this.storage,this.storageKey+"-code-verifier"),await It(this.storage,this.storageKey+"-user"),this.userStorage&&await It(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ir);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Ir);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ir}ms, refresh threshold is ${el} ticks`),s<=el&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Dp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Tr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await F(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:c}=await F(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&u.type==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Jx(e.webauthn.credential_response):Qx(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:u}=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Kx(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Gx(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Ka(n.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await F(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new tt})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new tt});const a=await F(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&xe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(M(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new tt});const a=await F(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&xe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(M(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+sx>s)return n;const{data:i,error:a}=await F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:y,error:v}=await this.getSession();if(v||!y.session)return this._returnResult({data:null,error:v});n=y.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:u}}=Ka(n);r!=null&&r.allowExpired||Nx(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:s,signature:a},error:null}}const d=Ex(s.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,fx(`${l}.${u}`)))throw new nl("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(M(n))return this._returnResult({data:null,error:n});throw n}}}ms.nextInstanceID={};const iw=ms;class aw extends iw{constructor(e){super(e)}}class ow{constructor(e,r,n){var s,i,a;this.supabaseUrl=e,this.supabaseKey=r;const l=Zv(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:Hv,realtime:Kv,auth:Object.assign(Object.assign({},qv),{storageKey:u}),global:Wv},d=Xv(n??{},c);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=Qv(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new ev(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Fv(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Yy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:a,flowType:l,lock:u,debug:c,throwOnError:d},h,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new aw({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),h),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:u,debug:c,throwOnError:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new yv(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lw=(t,e,r)=>new ow(t,e,r);function uw(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}uw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const cw="https://kcqqqhtfamwdiiatusge.supabase.co",dw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtjcXFxaHRmYW13ZGlpYXR1c2dlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4NTk4NDgsImV4cCI6MjA3ODQzNTg0OH0.EsbQzd6Leq9jmyWBoxLdQm5NNICoxVgeRBcb_LJIqgo",W=lw(cw,dw),Fp=x.createContext(void 0);function hw({children:t}){const[e,r]=x.useState(null),[n,s]=x.useState(null),[i,a]=x.useState(!0);x.useEffect(()=>{W.auth.getSession().then(({data:{session:d}})=>{r((d==null?void 0:d.user)??null),d!=null&&d.user?l(d.user.id):a(!1)});const{data:{subscription:c}}=W.auth.onAuthStateChange((d,h)=>{r((h==null?void 0:h.user)??null),h!=null&&h.user?l(h.user.id):(s(null),a(!1))});return()=>c.unsubscribe()},[]);const l=async c=>{try{const{data:d,error:h}=await W.from("admins").select("*").eq("id",c).maybeSingle();if(h)throw h;s(d)}catch(d){console.error("Error loading admin:",d)}finally{a(!1)}},u=async()=>{await W.auth.signOut(),r(null),s(null)};return o.jsx(Fp.Provider,{value:{user:e,admin:n,loading:i,signOut:u},children:t})}function bn(){const t=x.useContext(Fp);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const zp=x.createContext(void 0);function fw({children:t}){const[e,r]=x.useState(()=>{const s=localStorage.getItem("theme");return s==="dark"||!s&&window.matchMedia("(prefers-color-scheme: dark)").matches});x.useEffect(()=>{e?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[e]);const n=()=>r(!e);return o.jsx(zp.Provider,{value:{isDark:e,toggleTheme:n},children:t})}function pw(){const t=x.useContext(zp);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}function mw(){const t=yn(),[e,r]=x.useState(""),[n,s]=x.useState(""),[i,a]=x.useState(!1),[l,u]=x.useState(""),c=async d=>{d.preventDefault(),a(!0),u("");try{const{error:h}=await W.auth.signInWithPassword({email:e,password:n});if(h)throw h;t("/")}catch(h){u(h.message)}finally{a(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl p-8 w-full max-w-md",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6",children:"Admin Login"}),l&&o.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded",children:l}),o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),o.jsx("input",{type:"email",value:e,onChange:d=>r(d.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Password"}),o.jsx("input",{type:"password",value:n,onChange:d=>s(d.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",required:!0})]}),o.jsx("button",{type:"submit",disabled:i,className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-slate-400 transition-colors",children:i?"Signing in...":"Sign In"})]}),o.jsxs("p",{className:"mt-4 text-center text-sm text-slate-600 dark:text-slate-400",children:["Don't have an account?"," ",o.jsx(ua,{to:"/signup",className:"text-blue-600 hover:text-blue-700",children:"Sign up"})]})]})})}function gw(){const t=yn(),[e,r]=x.useState(""),[n,s]=x.useState(""),[i,a]=x.useState(""),[l,u]=x.useState(!1),[c,d]=x.useState(""),h=async p=>{p.preventDefault(),u(!0),d("");try{const{data:y,error:v}=await W.auth.signUp({email:e,password:n});if(v)throw v;if(y.user){const{error:w}=await W.from("admins").insert({id:y.user.id,email:e,name:i});if(w)throw w}t("/")}catch(y){d(y.message)}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl p-8 w-full max-w-md",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6",children:"Create Admin Account"}),c&&o.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded",children:c}),o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Name"}),o.jsx("input",{type:"text",value:i,onChange:p=>a(p.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),o.jsx("input",{type:"email",value:e,onChange:p=>r(p.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Password"}),o.jsx("input",{type:"password",value:n,onChange:p=>s(p.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white",required:!0,minLength:6})]}),o.jsx("button",{type:"submit",disabled:l,className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-slate-400 transition-colors",children:l?"Creating account...":"Sign Up"})]}),o.jsxs("p",{className:"mt-4 text-center text-sm text-slate-600 dark:text-slate-400",children:["Already have an account?"," ",o.jsx(ua,{to:"/login",className:"text-blue-600 hover:text-blue-700",children:"Sign in"})]})]})})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(t,e)=>{const r=x.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:u,...c},d)=>x.createElement("svg",{ref:d,...yw,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${vw(t)}`,l].join(" "),...c},[...e.map(([h,p])=>x.createElement(h,p)),...Array.isArray(u)?u:[u]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=J("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=J("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=J("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=J("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=J("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=J("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=J("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=J("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=J("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=J("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=J("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=J("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=J("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Cw({hideHeader:t}){const{admin:e}=bn(),[r,n]=x.useState([]),[s,i]=x.useState(null),[a,l]=x.useState([]),[u,c]=x.useState(!0),[d,h]=x.useState(!1),[p,y]=x.useState(""),[v,w]=x.useState(""),[b,g]=x.useState(null);x.useEffect(()=>{f()},[]),x.useEffect(()=>{s&&m()},[s]);const f=async()=>{try{const{data:k,error:B}=await W.from("leaderboards").select("*").order("created_at",{ascending:!1});if(B)throw B;n(k||[]),k&&k.length>0&&!s&&i(k[0].id)}catch(k){console.error("Error loading leaderboards:",k),g({type:"error",text:"Failed to load leaderboards"})}finally{c(!1)}},m=async()=>{if(s)try{const{data:k,error:B}=await W.from("interview_rounds").select("*").eq("leaderboard_id",s).order("score",{ascending:!1});if(B)throw B;l(k||[])}catch(k){console.error("Error loading rounds:",k)}},_=async()=>{if(!p.trim()){g({type:"error",text:"Please enter a leaderboard name"});return}try{const{data:k,error:B}=await W.from("leaderboards").insert({name:p.trim(),description:v.trim(),created_by:e==null?void 0:e.id}).select().single();if(B)throw B;g({type:"success",text:"Leaderboard created successfully!"}),h(!1),y(""),w(""),await f(),i(k.id)}catch(k){console.error("Error creating leaderboard:",k),g({type:"error",text:"Failed to create leaderboard"})}},j=k=>{const B=`${window.location.origin}/leaderboard/${k}`;navigator.clipboard.writeText(B),g({type:"success",text:"Public URL copied to clipboard!"})},S=k=>{const B=`${window.location.origin}/leaderboard/${k}`;window.open(B,"_blank")},E=(()=>{if(a.length===0)return{avg:0,highest:0,total:0};const k=a.map(A=>A.score),B=k.reduce((A,H)=>A+H,0)/k.length,L=Math.max(...k);return{avg:B,highest:L,total:a.length}})(),C=r.find(k=>k.id===s);return u?o.jsx("div",{className:"flex justify-center items-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"space-y-6",children:[!t&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Interview Leaderboard"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track and manage interview performance"})]}),o.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(gs,{className:"w-4 h-4"}),"New Leaderboard"]})]}),b&&o.jsx("div",{className:`p-4 rounded-lg ${b.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:b.text}),d&&o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Leaderboard"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leaderboard Name"}),o.jsx("input",{type:"text",value:p,onChange:k=>y(k.target.value),placeholder:"e.g., Q1 2025 Interviews",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),o.jsx("textarea",{value:v,onChange:k=>w(k.target.value),placeholder:"Add description...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[o.jsx(Hp,{className:"w-4 h-4"}),"Create"]}),o.jsxs("button",{onClick:()=>{h(!1),y(""),w("")},className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[o.jsx(al,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"lg:col-span-1 space-y-2",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Leaderboards"}),r.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No leaderboards yet"}):r.map(k=>o.jsxs("button",{onClick:()=>i(k.id),className:`w-full text-left px-4 py-3 rounded-lg border-2 transition-colors ${s===k.id?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[o.jsx("div",{className:"font-medium text-sm",children:k.name}),k.description&&o.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:k.description})]},k.id))]}),o.jsx("div",{className:"lg:col-span-3 space-y-6",children:C?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:C.name}),C.description&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.description})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>j(C.public_id),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",title:"Copy public URL",children:o.jsx(Sr,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>S(C.public_id),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",title:"Open public view",children:o.jsx(kr,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Candidates"}),o.jsx("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:E.total})]}),o.jsx(Ne,{className:"w-8 h-8 text-blue-600 opacity-50"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Average Score"}),o.jsx("p",{className:"text-2xl font-bold text-green-900 mt-1",children:E.avg.toFixed(1)})]}),o.jsx(_n,{className:"w-8 h-8 text-green-600 opacity-50"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-yellow-600 font-medium",children:"Highest Score"}),o.jsx("p",{className:"text-2xl font-bold text-yellow-900 mt-1",children:E.highest})]}),o.jsx(pi,{className:"w-8 h-8 text-yellow-600 opacity-50"})]})})]})]}),o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsx("h4",{className:"font-semibold text-gray-900",children:"Rankings"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rank"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Candidate"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Score"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Round"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Interviewer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:a.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:[o.jsx(pi,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),o.jsx("p",{children:"No interview records yet"})]})}):a.map((k,B)=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-2",children:[B<3&&o.jsx(kw,{className:`w-4 h-4 ${B===0?"text-yellow-500":B===1?"text-gray-400":"text-orange-600"} fill-current`}),o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["#",B+1]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:o.jsx("span",{className:"text-sm font-medium text-blue-700",children:k.student_name.charAt(0).toUpperCase()})}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:k.student_name})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${k.score>=80?"bg-green-100 text-green-800":k.score>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[k.score,"/100"]})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:["Round ",k.round_number]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:k.interviewer_name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(k.interview_date).toLocaleDateString()})]},k.id))})]})})]})]}):o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-12 text-center",children:[o.jsx(pi,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),o.jsx("p",{className:"text-gray-500",children:"Select a leaderboard to view rankings"})]})})]})]})}function Rw(){const{admin:t}=bn(),[e,r]=x.useState([]),[n,s]=x.useState(null),[i,a]=x.useState([]),[l,u]=x.useState(!0),[c,d]=x.useState(!1),[h,p]=x.useState(""),[y,v]=x.useState(""),[w,b]=x.useState(null);x.useEffect(()=>{g()},[]),x.useEffect(()=>{n&&f()},[n]);const g=async()=>{try{const{data:C,error:k}=await W.from("activeness_boards").select("*").order("created_at",{ascending:!1});if(k)throw k;r(C||[]),C&&C.length>0&&!n&&s(C[0].id)}catch(C){console.error("Error loading boards:",C),b({type:"error",text:"Failed to load activeness boards"})}finally{u(!1)}},f=async()=>{if(n)try{const{data:C,error:k}=await W.from("module_scores").select("*").eq("board_id",n).order("activeness_score",{ascending:!1});if(k)throw k;a(C||[])}catch(C){console.error("Error loading scores:",C)}},m=async()=>{if(!h.trim()){b({type:"error",text:"Please enter a board name"});return}try{const{data:C,error:k}=await W.from("activeness_boards").insert({name:h.trim(),description:y.trim(),created_by:t==null?void 0:t.id}).select().single();if(k)throw k;b({type:"success",text:"Activeness board created successfully!"}),d(!1),p(""),v(""),await g(),s(C.id)}catch(C){console.error("Error creating board:",C),b({type:"error",text:"Failed to create activeness board"})}},_=C=>{const k=`${window.location.origin}/activeness/${C}`;navigator.clipboard.writeText(k),b({type:"success",text:"Public URL copied to clipboard!"})},j=C=>{const k=`${window.location.origin}/activeness/${C}`;window.open(k,"_blank")},N=(()=>{if(i.length===0)return{avg:0,highest:0,total:0,totalModules:0};const C=i.reduce((A,H)=>A+H.activeness_score,0)/i.length,k=Math.max(...i.map(A=>A.activeness_score)),B=new Set(i.map(A=>A.student_name)).size,L=new Set(i.map(A=>A.module_number)).size;return{avg:C,highest:k,total:B,totalModules:L}})(),E=e.find(C=>C.id===n);return l?o.jsx("div",{className:"flex justify-center items-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Zoom Activeness Board"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track student participation and engagement"})]}),o.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[o.jsx(gs,{className:"w-4 h-4"}),"New Board"]})]}),w&&o.jsx("div",{className:`p-4 rounded-lg ${w.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:w.text}),c&&o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Activeness Board"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Board Name"}),o.jsx("input",{type:"text",value:h,onChange:C=>p(C.target.value),placeholder:"e.g., Module 5 - AWS Basics",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),o.jsx("textarea",{value:y,onChange:C=>v(C.target.value),placeholder:"Add description...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[o.jsx(gs,{className:"w-4 h-4"}),"Create"]}),o.jsx("button",{onClick:()=>{d(!1),p(""),v("")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Cancel"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"lg:col-span-1 space-y-2",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Boards"}),e.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No boards yet"}):e.map(C=>o.jsxs("button",{onClick:()=>s(C.id),className:`w-full text-left px-4 py-3 rounded-lg border-2 transition-colors ${n===C.id?"border-green-500 bg-green-50 text-green-900":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[o.jsx("div",{className:"font-medium text-sm",children:C.name}),C.description&&o.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:C.description})]},C.id))]}),o.jsx("div",{className:"lg:col-span-3 space-y-6",children:E?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:E.name}),E.description&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:E.description})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>_(E.public_id),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",title:"Copy public URL",children:o.jsx(Sr,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>j(E.public_id),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",title:"Open public view",children:o.jsx(kr,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Students"}),o.jsx("p",{className:"text-2xl font-bold text-green-900 mt-1",children:N.total})]}),o.jsx(Ne,{className:"w-8 h-8 text-green-600 opacity-50"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Modules"}),o.jsx("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:N.totalModules})]}),o.jsx(Wp,{className:"w-8 h-8 text-blue-600 opacity-50"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Avg Score"}),o.jsxs("p",{className:"text-2xl font-bold text-purple-900 mt-1",children:[N.avg.toFixed(1),"/10"]})]}),o.jsx(_n,{className:"w-8 h-8 text-purple-600 opacity-50"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-yellow-600 font-medium",children:"Highest"}),o.jsxs("p",{className:"text-2xl font-bold text-yellow-900 mt-1",children:[N.highest,"/10"]})]}),o.jsx(xw,{className:"w-8 h-8 text-yellow-600 opacity-50"})]})})]})]}),o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsx("h4",{className:"font-semibold text-gray-900",children:"Activeness Scores"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rank"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Module"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Score"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Notes"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:i.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:[o.jsx(sl,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),o.jsx("p",{children:"No activeness records yet"})]})}):i.map((C,k)=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["#",k+1]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:o.jsx("span",{className:"text-sm font-medium text-green-700",children:C.student_name.charAt(0).toUpperCase()})}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:C.student_name})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:["Module ",C.module_number]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full ${C.activeness_score>=8?"bg-green-500":C.activeness_score>=5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${C.activeness_score/10*100}%`}})}),o.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[C.activeness_score,"/10"]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(C.recorded_date).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate",children:C.notes||"-"})]},C.id))})]})})]})]}):o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-12 text-center",children:[o.jsx(sl,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),o.jsx("p",{className:"text-gray-500",children:"Select a board to view activeness scores"})]})})]})]})}function Tw(){const{user:t}=bn(),[e,r]=x.useState([]),[n,s]=x.useState([]),[i,a]=x.useState(!0),[l,u]=x.useState(!1),[c,d]=x.useState(!1),[h,p]=x.useState(""),[y,v]=x.useState(null),[w,b]=x.useState(""),[g,f]=x.useState(null);x.useEffect(()=>{m(),_()},[]);const m=async()=>{try{const{data:R,error:z}=await W.from("attendance_sessions").select("*").order("session_date",{ascending:!1}).limit(10);if(z)throw z;r(R||[])}catch(R){console.error("Error loading sessions:",R)}finally{a(!1)}},_=async()=>{try{const{data:R,error:z}=await W.from("batches").select("*").eq("is_active",!0).order("name",{ascending:!0});if(z)throw z;s(R||[]),R&&R.length>0&&!h&&p(R[0].id)}catch(R){console.error("Error loading batches:",R)}},j=async()=>{if(!h){f({type:"error",text:"Please select a batch"});return}u(!0),f(null);try{const R=n.find(X=>X.id===h);if(!R){f({type:"error",text:"Selected batch not found"});return}const z=new Date().toISOString().split("T")[0],O=`attend-${h.substring(0,8)}-${z}`,D=new Date;D.setHours(23,59,59,999);const V=`${R.name} - ${new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`,{error:Q}=await W.from("attendance_sessions").insert({session_date:z,session_code:O,session_name:V,batch_name:R.name,batch_id:h,is_active:!0,expires_at:D.toISOString(),created_by:t==null?void 0:t.id});if(Q)if(Q.code==="23505")f({type:"error",text:"Attendance session for this batch today already exists!"});else throw Q;else f({type:"success",text:"Attendance session created successfully!"}),d(!1),await m()}catch(R){console.error("Error creating session:",R),f({type:"error",text:"Failed to create attendance session"})}finally{u(!1)}},S=R=>{v(R.id),b(R.session_name)},N=()=>{v(null),b("")},E=async R=>{if(!w.trim()){f({type:"error",text:"Session name cannot be empty"});return}try{const{error:z}=await W.from("attendance_sessions").update({session_name:w.trim()}).eq("id",R);if(z)throw z;f({type:"success",text:" Session name updated successfully!"}),v(null),b(""),await m()}catch(z){console.error("Error updating session name:",z),f({type:"error",text:"Failed to update session name"})}},C=async(R,z)=>{try{const{error:O}=await W.from("attendance_sessions").update({is_active:!z}).eq("id",R);if(O)throw O;f({type:"success",text:`Session ${z?"deactivated":"activated"} successfully!`}),await m()}catch(O){console.error("Error updating session:",O),f({type:"error",text:"Failed to update session status"})}},k=R=>{const z=`${window.location.origin}/attend/${R}`;navigator.clipboard.writeText(z),f({type:"success",text:"Attendance URL copied to clipboard!"})},B=R=>{const z=`${window.location.origin}/attend/${R}`;window.open(z,"_blank")},L=R=>new Date(R).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),A=R=>new Date(R).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),H=R=>new Date(R)<new Date;if(i)return o.jsx("div",{className:"flex justify-center items-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const T=e.find(R=>R.session_date===new Date().toISOString().split("T")[0]);return o.jsxs("div",{className:"space-y-6",children:[g&&o.jsx("div",{className:`p-4 rounded-lg ${g.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:g.text}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Attendance Session"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create and manage daily attendance tracking"})]}),o.jsxs("button",{onClick:()=>d(!c),disabled:l||!!T,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[o.jsx(gs,{className:"w-4 h-4"}),T?"Session Exists":"Create Today's Session"]})]}),c&&!T&&o.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Select Batch for Attendance"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch"}),n.length===0?o.jsx("div",{className:"text-sm text-gray-500 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:"No active batches available. Please create a batch first in the Batches tab."}):o.jsx("select",{value:h,onChange:R=>p(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:n.map(R=>o.jsxs("option",{value:R.id,children:[R.name," ",R.description&&`- ${R.description}`]},R.id))}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select which batch this attendance session is for"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:j,disabled:l||n.length===0,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors",children:l?"Creating...":"Create Session"}),o.jsx("button",{onClick:()=>{d(!1)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]}),T&&o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y===T.id?o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx("input",{type:"text",value:w,onChange:R=>b(R.target.value),className:"flex-1 px-3 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",autoFocus:!0}),o.jsx("button",{onClick:()=>E(T.id),className:"p-1 text-green-600 hover:bg-green-100 rounded",children:o.jsx(id,{className:"w-4 h-4"})}),o.jsx("button",{onClick:N,className:"p-1 text-red-600 hover:bg-red-100 rounded",children:o.jsx(al,{className:"w-4 h-4"})})]}):o.jsxs(o.Fragment,{children:[o.jsx(jr,{className:"w-5 h-5 text-blue-600"}),o.jsx("span",{className:"font-medium text-gray-900",children:T.session_name}),o.jsx("button",{onClick:()=>S(T),className:"p-1 text-gray-600 hover:bg-blue-100 rounded",title:"Edit session name",children:o.jsx(ad,{className:"w-4 h-4"})})]}),T.is_active&&!H(T.expires_at)?o.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full flex items-center gap-1",children:[o.jsx(il,{className:"w-3 h-3"}),"Active"]}):o.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs font-medium rounded-full flex items-center gap-1",children:[o.jsx(qp,{className:"w-3 h-3"}),"Inactive"]})]}),o.jsx("div",{className:"text-sm text-gray-600 mb-1",children:L(T.session_date)}),o.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[o.jsx("span",{className:"font-medium",children:"Batch:"})," ",T.batch_name||"Default Batch"]}),o.jsxs("div",{className:"text-sm text-gray-600 mb-3 flex items-center gap-2",children:[o.jsx(Ns,{className:"w-4 h-4"}),"Expires: ",A(T.expires_at)]}),o.jsxs("div",{className:"bg-white border border-gray-200 rounded p-3 mb-3",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Attendance URL:"}),o.jsxs("code",{className:"text-sm text-blue-600 break-all",children:[window.location.origin,"/attend/",T.session_code]})]})]})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>k(T.session_code),className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 text-gray-700 rounded hover:bg-gray-50 transition-colors text-sm",children:[o.jsx(Sr,{className:"w-4 h-4"}),"Copy URL"]}),o.jsxs("button",{onClick:()=>B(T.session_code),className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 text-gray-700 rounded hover:bg-gray-50 transition-colors text-sm",children:[o.jsx(kr,{className:"w-4 h-4"}),"Open"]}),o.jsxs("button",{onClick:()=>C(T.id,T.is_active),className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 text-gray-700 rounded hover:bg-gray-50 transition-colors text-sm",children:[o.jsx(ha,{className:"w-4 h-4"}),T.is_active?"Deactivate":"Activate"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Sessions"})}),o.jsx("div",{className:"divide-y divide-gray-200",children:e.length===0?o.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:"No attendance sessions created yet"}):e.map(R=>o.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[y===R.id?o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx("input",{type:"text",value:w,onChange:z=>b(z.target.value),className:"flex-1 px-3 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",autoFocus:!0}),o.jsx("button",{onClick:()=>E(R.id),className:"p-1 text-green-600 hover:bg-green-100 rounded",children:o.jsx(id,{className:"w-4 h-4"})}),o.jsx("button",{onClick:N,className:"p-1 text-red-600 hover:bg-red-100 rounded",children:o.jsx(al,{className:"w-4 h-4"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"font-medium text-gray-900",children:R.session_name}),o.jsx("button",{onClick:()=>S(R),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",title:"Edit session name",children:o.jsx(ad,{className:"w-4 h-4"})})]}),R.is_active&&!H(R.expires_at)?o.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:"Active"}):o.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-800 text-xs font-medium rounded-full",children:H(R.expires_at)?"Expired":"Inactive"})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[L(R.session_date),"  Code: ",o.jsx("code",{className:"text-xs bg-gray-100 px-2 py-0.5 rounded",children:R.session_code})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>k(R.session_code),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors",title:"Copy URL",children:o.jsx(Sr,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>B(R.session_code),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors",title:"Open URL",children:o.jsx(kr,{className:"w-4 h-4"})})]})]})},R.id))})]})]})}function Pw({onDateSelect:t,selectedDate:e}){const[r,n]=x.useState(new Date),[s,i]=x.useState({}),[a,l]=x.useState(!0);x.useEffect(()=>{u()},[r]);const u=async()=>{l(!0);try{const g=new Date(r.getFullYear(),r.getMonth(),1),f=new Date(r.getFullYear(),r.getMonth()+1,0),m=g.toISOString().split("T")[0],_=f.toISOString().split("T")[0],{data:j,error:S}=await W.from("attendance_sessions").select("id, session_date, session_name, batch_name, public_id").gte("session_date",m).lte("session_date",_);if(S)throw S;const N={};for(const E of j||[]){const{data:C,error:k}=await W.from("attendance_records").select("id").eq("session_id",E.id);if(k)throw k;const B=(C==null?void 0:C.length)||0;N[E.session_date]={date:E.session_date,count:B,percentage:B>0?100:0,sessionId:E.id,sessionName:E.session_name,batchName:E.batch_name||"Default Batch",publicId:E.public_id}}i(N)}catch(g){console.error("Error loading month attendance:",g)}finally{l(!1)}},c=()=>{const g=r.getFullYear(),f=r.getMonth(),m=new Date(g,f,1),j=new Date(g,f+1,0).getDate(),S=m.getDay(),N=[];for(let E=0;E<S;E++)N.push(null);for(let E=1;E<=j;E++)N.push(E);return N},d=g=>{const f=r.getFullYear(),m=String(r.getMonth()+1).padStart(2,"0"),_=String(g).padStart(2,"0");return`${f}-${m}-${_}`},h=g=>g>=70?"bg-green-500":g>=50?"bg-yellow-500":"bg-red-500",p=()=>{n(new Date(r.getFullYear(),r.getMonth()-1))},y=()=>{n(new Date(r.getFullYear(),r.getMonth()+1))},v=r.toLocaleDateString("en-US",{month:"long",year:"numeric"}),w=c(),b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jr,{className:"w-5 h-5 text-blue-600"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Attendance Calendar"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(ww,{className:"w-5 h-5 text-gray-600"})}),o.jsx("span",{className:"text-sm font-medium text-gray-900 min-w-[140px] text-center",children:v}),o.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(bw,{className:"w-5 h-5 text-gray-600"})})]})]}),a?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[b.map(g=>o.jsx("div",{className:"text-center text-xs font-semibold text-gray-500 py-2",children:g},g)),w.map((g,f)=>{if(g===null)return o.jsx("div",{className:"aspect-square"},`empty-${f}`);const m=d(g),_=s[m],j=m===e,S=m===new Date().toISOString().split("T")[0];return o.jsx("button",{onClick:()=>_&&t(m),disabled:!_,className:`aspect-square rounded-lg border-2 transition-all relative ${j?"border-blue-500 bg-blue-50":S?"border-blue-300 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${_?"cursor-pointer":"cursor-default opacity-40"}`,children:o.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-1 relative group",children:[o.jsx("span",{className:`text-xs font-medium ${j?"text-blue-700":"text-gray-700"}`,children:g}),_&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-2xl font-bold text-gray-900 mt-0.5",children:_.count}),o.jsx("span",{className:"text-xs text-gray-500 truncate w-full text-center px-0.5",title:_.batchName,children:_.batchName}),o.jsx("div",{className:`absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 rounded-full ${h(_.percentage)}`}),_.publicId&&o.jsx("div",{className:"absolute inset-0 bg-blue-600 bg-opacity-0 group-hover:bg-opacity-10 transition-all rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100",children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:N=>{N.stopPropagation();const E=`${window.location.origin}/attendance/view/${_.publicId}`;navigator.clipboard.writeText(E),alert("Public URL copied!")},className:"p-1 bg-white rounded shadow-sm hover:bg-gray-100",title:"Copy public URL",children:o.jsx(Sr,{className:"w-3 h-3 text-blue-600"})}),o.jsx("button",{onClick:N=>{N.stopPropagation();const E=`${window.location.origin}/attendance/view/${_.publicId}`;window.open(E,"_blank")},className:"p-1 bg-white rounded shadow-sm hover:bg-gray-100",title:"Open public view",children:o.jsx(kr,{className:"w-3 h-3 text-blue-600"})})]})})]})]})},m)})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),o.jsx("span",{className:"text-gray-600",children:"High (70%)"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),o.jsx("span",{className:"text-gray-600",children:"Medium (50-69%)"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-gray-600",children:"Low (<50%)"})]})]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Numbers show present count  Hover to share URL"})]})})]})}function Ow(){const[t,e]=x.useState([]),[r,n]=x.useState([]),[s,i]=x.useState("all"),[a,l]=x.useState(new Date().toISOString().split("T")[0]),[u,c]=x.useState(null),[d,h]=x.useState(!0),[p,y]=x.useState(!1),[v,w]=x.useState(""),[b,g]=x.useState(!1);x.useEffect(()=>{f(),m()},[]),x.useEffect(()=>{m()},[s]),x.useEffect(()=>{a&&_()},[a]),x.useEffect(()=>{let L;return b&&(L=setInterval(()=>{_()},3e4)),()=>{L&&clearInterval(L)}},[b,a]);const f=async()=>{try{const{data:L,error:A}=await W.from("batches").select("id, name").eq("is_active",!0).order("name",{ascending:!0});if(A)throw A;n(L||[])}catch(L){console.error("Error loading batches:",L)}},m=async()=>{try{let L=W.from("attendance_sessions").select("*").order("session_date",{ascending:!1});s&&s!=="all"&&(L=L.eq("batch_id",s));const{data:A,error:H}=await L;if(H)throw H;e(A||[]),A&&A.length>0&&!a&&l(A[0].session_date)}catch(L){console.error("Error loading sessions:",L)}finally{h(!1)}},_=async()=>{y(!0);try{const L=t.find(z=>z.session_date===a);if(!L){c(null),y(!1);return}const{data:A,error:H}=await W.from("attendance_records").select("*").eq("session_id",L.id).order("marked_at",{ascending:!0});if(H)throw H;const T=(A==null?void 0:A.length)||0,R=T>0?100:0;c({date:a,sessionName:L.session_name,batchName:L.batch_name||"Default Batch",total_present:T,attendance_percentage:R,records:A||[]})}catch(L){console.error("Error loading daily stats:",L),c(null)}finally{y(!1)}},j=()=>{if(!u||u.records.length===0)return;const L=["Date","Session Name","Student Name","Status","Time"],A=u.records.map(O=>[a,u.sessionName,O.student_name,O.status,new Date(O.marked_at).toLocaleTimeString()]),H=[L.join(","),...A.map(O=>O.map(D=>`"${D}"`).join(","))].join(`
`),T=new Blob([H],{type:"text/csv"}),R=window.URL.createObjectURL(T),z=document.createElement("a");z.href=R,z.download=`attendance-${a}.csv`,document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(R)},S=L=>new Date(L).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),N=L=>new Date(L).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),E=L=>{const A=`${window.location.origin}/attendance/view/${L}`;navigator.clipboard.writeText(A),alert("Public attendance URL copied to clipboard!")},C=L=>{const A=`${window.location.origin}/attendance/view/${L}`;window.open(A,"_blank")},k=(u==null?void 0:u.records.filter(L=>L.student_name.toLowerCase().includes(v.toLowerCase())))||[],B=t.find(L=>L.session_date===a);return d?o.jsx("div",{className:"flex justify-center items-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Daily Attendance Dashboard"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View and manage attendance records"})]}),r.length>0&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Filter by Batch"}),o.jsxs("select",{value:s,onChange:L=>i(L.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"all",children:"All Batches"}),r.map(L=>o.jsx("option",{value:L.id,children:L.name},L.id))]})]})]}),o.jsxs("div",{className:"flex gap-3",children:[B&&B.public_id&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>E(B.public_id),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Copy public URL",children:[o.jsx(Sr,{className:"w-4 h-4"}),"Copy Public URL"]}),o.jsxs("button",{onClick:()=>C(B.public_id),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",title:"Open public view",children:[o.jsx(kr,{className:"w-4 h-4"}),"View Public"]})]}),o.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[o.jsx("input",{type:"checkbox",checked:b,onChange:L=>g(L.target.checked),className:"rounded border-gray-300"}),"Auto-refresh (30s)"]}),o.jsxs("button",{onClick:_,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:bg-gray-50 transition-colors",children:[o.jsx(ha,{className:`w-4 h-4 ${p?"animate-spin":""}`}),"Refresh"]})]})]}),u?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Present"}),o.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-1",children:u.total_present})]}),o.jsx("div",{className:"w-12 h-12 bg-blue-200 rounded-full flex items-center justify-center",children:o.jsx(cn,{className:"w-6 h-6 text-blue-700"})})]})}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Attendance Rate"}),o.jsxs("p",{className:"text-3xl font-bold text-green-900 mt-1",children:[u.attendance_percentage.toFixed(0),"%"]})]}),o.jsx("div",{className:"w-12 h-12 bg-green-200 rounded-full flex items-center justify-center",children:o.jsx(_n,{className:"w-6 h-6 text-green-700"})})]})}),o.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Session"}),o.jsx("p",{className:"text-sm font-bold text-purple-900 mt-1 line-clamp-2",children:u.sessionName}),o.jsx("p",{className:"text-xs text-purple-700 mt-0.5",children:S(u.date)}),o.jsxs("p",{className:"text-xs text-purple-600 mt-0.5",children:["Batch: ",u.batchName]})]}),o.jsx("div",{className:"w-12 h-12 bg-purple-200 rounded-full flex items-center justify-center",children:o.jsx(Ne,{className:"w-6 h-6 text-purple-700"})})]})})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Attendance Records"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_w,{className:"w-4 h-4 text-gray-500"}),o.jsx("input",{type:"text",value:v,onChange:L=>w(L.target.value),placeholder:"Search by name...",className:"px-3 py-1 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),u.records.length>0&&o.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[o.jsx(yu,{className:"w-4 h-4"}),"Export CSV"]})]}),o.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-500",children:[o.jsx(Ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),o.jsx("p",{children:v?"No records match your search":"No attendance records for this date"})]})}):k.map((L,A)=>o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A+1}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:o.jsx("span",{className:"text-sm font-medium text-blue-700",children:L.student_name.charAt(0).toUpperCase()})}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:L.student_name})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[o.jsx(cn,{className:"w-3 h-3 mr-1"}),"Present"]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N(L.marked_at)})]},L.id))})]})})})]}):o.jsxs("div",{className:"text-center py-12 text-gray-500",children:[o.jsx(Ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),o.jsx("p",{children:"Select a date to view attendance records"})]})]}),o.jsx(Pw,{selectedDate:a,onDateSelect:l})]})}function Aw(){const{admin:t}=bn(),[e,r]=x.useState([]),[n,s]=x.useState(null),[i,a]=x.useState([]),[l,u]=x.useState(!0),[c,d]=x.useState(!1),[h,p]=x.useState(!1),[y,v]=x.useState(""),[w,b]=x.useState(""),[g,f]=x.useState(""),[m,_]=x.useState(""),[j,S]=x.useState(null);x.useEffect(()=>{N()},[]),x.useEffect(()=>{n&&E()},[n]);const N=async()=>{try{const{data:T,error:R}=await W.from("batches").select("*").order("created_at",{ascending:!1});if(R)throw R;r(T||[]),T&&T.length>0&&!n&&s(T[0].id)}catch(T){console.error("Error loading batches:",T),S({type:"error",text:"Failed to load batches"})}finally{u(!1)}},E=async()=>{if(n)try{const{data:T,error:R}=await W.from("batch_students").select("*").eq("batch_id",n).order("student_name",{ascending:!0});if(R)throw R;a(T||[])}catch(T){console.error("Error loading students:",T)}},C=async()=>{if(!y.trim()){S({type:"error",text:"Please enter a batch name"});return}try{const{data:T,error:R}=await W.from("batches").insert({name:y.trim(),description:w.trim(),is_active:!0,created_by:t==null?void 0:t.id}).select().single();if(R)throw R;S({type:"success",text:"Batch created successfully!"}),d(!1),v(""),b(""),await N(),s(T.id)}catch(T){console.error("Error creating batch:",T),S({type:"error",text:"Failed to create batch"})}},k=async()=>{if(!g.trim()){S({type:"error",text:"Please enter student name"});return}if(!n){S({type:"error",text:"Please select a batch first"});return}try{const{error:T}=await W.from("batch_students").insert({batch_id:n,student_name:g.trim(),student_email:m.trim()});if(T){if(T.code==="23505")S({type:"error",text:"Student already exists in this batch"});else throw T;return}S({type:"success",text:"Student added successfully!"}),p(!1),f(""),_(""),await E()}catch(T){console.error("Error adding student:",T),S({type:"error",text:"Failed to add student"})}},B=async T=>{if(confirm("Are you sure you want to remove this student from the batch?"))try{const{error:R}=await W.from("batch_students").delete().eq("id",T);if(R)throw R;S({type:"success",text:"Student removed successfully!"}),await E()}catch(R){console.error("Error deleting student:",R),S({type:"error",text:"Failed to remove student"})}},L=async(T,R)=>{try{const{error:z}=await W.from("batches").update({is_active:!R}).eq("id",T);if(z)throw z;S({type:"success",text:`Batch ${R?"deactivated":"activated"} successfully!`}),await N()}catch(z){console.error("Error updating batch:",z),S({type:"error",text:"Failed to update batch status"})}},A=async T=>{if(confirm("Are you sure you want to delete this batch? All students in this batch will also be removed."))try{const{error:R}=await W.from("batches").delete().eq("id",T);if(R)throw R;S({type:"success",text:"Batch deleted successfully!"}),s(null),await N()}catch(R){console.error("Error deleting batch:",R),S({type:"error",text:"Failed to delete batch"})}},H=e.find(T=>T.id===n);return l?o.jsx("div",{className:"flex justify-center items-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Batch Management"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create and manage student batches for attendance tracking"})]}),o.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(gs,{className:"w-4 h-4"}),"New Batch"]})]}),j&&o.jsx("div",{className:`p-4 rounded-lg ${j.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:j.text}),c&&o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Batch"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch Name"}),o.jsx("input",{type:"text",value:y,onChange:T=>v(T.target.value),placeholder:"e.g., Batch A, Morning Batch, AWS DevOps",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),o.jsx("textarea",{value:w,onChange:T=>b(T.target.value),placeholder:"Add description...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[o.jsx(Hp,{className:"w-4 h-4"}),"Create"]}),o.jsx("button",{onClick:()=>{d(!1),v(""),b("")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Cancel"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"lg:col-span-1 space-y-2",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Batches"}),e.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No batches yet"}):e.map(T=>o.jsxs("div",{className:`border-2 rounded-lg p-3 transition-colors ${n===T.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("button",{onClick:()=>s(T.id),className:"flex-1 text-left",children:[o.jsx("div",{className:"font-medium text-sm text-gray-900",children:T.name}),T.description&&o.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:T.description})]}),o.jsx("div",{className:"flex gap-1",children:o.jsx("button",{onClick:()=>L(T.id,T.is_active),className:`px-2 py-1 text-xs rounded ${T.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,title:T.is_active?"Deactivate":"Activate",children:T.is_active?"Active":"Inactive"})})]}),o.jsx("button",{onClick:()=>A(T.id),className:"text-xs text-red-600 hover:text-red-800",children:"Delete"})]},T.id))]}),o.jsx("div",{className:"lg:col-span-3 space-y-6",children:H?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:H.name}),H.description&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:H.description})]}),o.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[o.jsx(ld,{className:"w-4 h-4"}),"Add Student"]})]}),o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Students"}),o.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-1",children:i.length})]}),o.jsx(Ne,{className:"w-12 h-12 text-blue-600 opacity-50"})]})})]}),h&&o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Add Student to ",H.name]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Name"}),o.jsx("input",{type:"text",value:g,onChange:T=>f(T.target.value),placeholder:"e.g., John Doe",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),o.jsx("input",{type:"email",value:m,onChange:T=>_(T.target.value),placeholder:"student@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[o.jsx(ld,{className:"w-4 h-4"}),"Add"]}),o.jsx("button",{onClick:()=>{p(!1),f(""),_("")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Cancel"})]})]})]}),o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsxs("h4",{className:"font-semibold text-gray-900",children:["Students (",i.length,")"]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"#"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:i.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-500",children:[o.jsx(Ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),o.jsx("p",{children:"No students added yet"})]})}):i.map((T,R)=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R+1}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:o.jsx("span",{className:"text-sm font-medium text-blue-700",children:T.student_name.charAt(0).toUpperCase()})}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:T.student_name})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:T.student_email||"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>B(T.id),className:"text-red-600 hover:text-red-800",children:o.jsx(Ew,{className:"w-4 h-4"})})})]},T.id))})]})})]})]}):o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-12 text-center",children:[o.jsx(Ne,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),o.jsx("p",{className:"text-gray-500",children:"Select a batch to manage students"})]})})]})]})}function Iw(){const[t,e]=x.useState([]),[r,n]=x.useState(""),[s,i]=x.useState([]),[a,l]=x.useState(null),[u,c]=x.useState([]),[d,h]=x.useState(!0),[p,y]=x.useState(!1),[v,w]=x.useState(""),[b,g]=x.useState("percentage"),[f,m]=x.useState("desc"),[_,j]=x.useState(null);x.useEffect(()=>{S()},[]),x.useEffect(()=>{r&&(N(),E())},[r]);const S=async()=>{try{const{data:I,error:K}=await W.from("batches").select("*").eq("is_active",!0).order("name",{ascending:!0});if(K)throw K;e(I||[]),I&&I.length>0&&!r&&n(I[0].id)}catch(I){console.error("Error loading batches:",I)}finally{h(!1)}},N=async()=>{if(r){h(!0);try{const{data:I,error:K}=await W.rpc("get_batch_attendance_stats",{p_batch_id:r});if(K)throw K;i(I||[]);const{data:fe,error:qe}=await W.rpc("get_batch_overview",{p_batch_id:r});if(qe)throw qe;l(fe&&fe.length>0?fe[0]:null)}catch(I){console.error("Error loading batch stats:",I)}finally{h(!1)}}},E=async()=>{if(r)try{const{data:I,error:K}=await W.from("batch_public_urls").select("*").eq("batch_id",r).order("created_at",{ascending:!1});if(K)throw K;c(I||[])}catch(I){console.error("Error loading public URLs:",I)}},C=async()=>{if(r){y(!0),j(null);try{const{data:{user:I}}=await W.auth.getUser();if(!I){j({type:"error",text:"User not authenticated"});return}const K=`batch-${r.substring(0,8)}-${Date.now()}`,{error:fe}=await W.from("batch_public_urls").insert({batch_id:r,public_id:K,is_active:!0,expires_at:null,created_by:I.id});if(fe)throw console.error("Insert error:",fe),fe;j({type:"success",text:"Public URL generated successfully!"}),await E()}catch(I){console.error("Error generating public URL:",I),j({type:"error",text:`Failed to generate public URL: ${I.message||"Unknown error"}`})}finally{y(!1)}}},k=I=>{const K=`${window.location.origin}/batch-stats/${I}`;navigator.clipboard.writeText(K),j({type:"success",text:"Public URL copied to clipboard!"})},B=I=>{const K=`${window.location.origin}/batch-stats/${I}`;window.open(K,"_blank")},L=async I=>{if(confirm("Are you sure you want to revoke this public URL?"))try{const{error:K}=await W.from("batch_public_urls").update({is_active:!1}).eq("id",I);if(K)throw K;j({type:"success",text:"Public URL revoked successfully!"}),await E()}catch(K){console.error("Error revoking public URL:",K),j({type:"error",text:"Failed to revoke public URL"})}},A=()=>{if(!a||s.length===0)return;const I=["Student Name","Email","Total Sessions","Sessions Present","Sessions Absent","Attendance %"],K=s.map(Ot=>[Ot.student_name,Ot.student_email||"-",Ot.total_sessions,Ot.sessions_present,Ot.sessions_absent,`${Ot.attendance_percentage}%`]),fe=[`Batch: ${a.batch_name}`,`Total Students: ${a.total_students}`,`Total Sessions: ${a.total_sessions}`,`Average Attendance: ${a.average_attendance_percentage.toFixed(2)}%`,"",I.join(","),...K.map(Ot=>Ot.map(Kp=>`"${Kp}"`).join(","))].join(`
`),qe=new Blob([fe],{type:"text/csv"}),nr=window.URL.createObjectURL(qe),jn=document.createElement("a");jn.href=nr,jn.download=`${a.batch_name}-attendance-stats.csv`,document.body.appendChild(jn),jn.click(),document.body.removeChild(jn),window.URL.revokeObjectURL(nr)},H=I=>I>=75?"text-green-700 bg-green-100":I>=50?"text-yellow-700 bg-yellow-100":"text-red-700 bg-red-100",T=I=>I>=75?"bg-green-500":I>=50?"bg-yellow-500":"bg-red-500",R=I=>I?new Date(I).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",z=I=>I?new Date(I).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",O=I=>I?new Date(I)<new Date:!1,V=[...s.filter(I=>I.student_name.toLowerCase().includes(v.toLowerCase()))].sort((I,K)=>{let fe=0;return b==="name"?fe=I.student_name.localeCompare(K.student_name):b==="percentage"?fe=I.attendance_percentage-K.attendance_percentage:b==="present"&&(fe=I.sessions_present-K.sessions_present),f==="asc"?fe:-fe}),Q=I=>{b===I?m(f==="asc"?"desc":"asc"):(g(I),m("desc"))};if(d&&t.length===0)return o.jsx("div",{className:"flex justify-center items-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(t.length===0)return o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[o.jsx(Vp,{className:"w-12 h-12 mx-auto mb-3 text-yellow-600"}),o.jsx("p",{className:"text-gray-700",children:"No active batches available. Please create a batch first in the Batches tab."})]});const X=u.find(I=>I.is_active&&!O(I.expires_at));return o.jsxs("div",{className:"space-y-6",children:[_&&o.jsx("div",{className:`p-4 rounded-lg ${_.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:_.text}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Batch Attendance Statistics"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View detailed attendance statistics for each batch"})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsx("select",{value:r,onChange:I=>n(I.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:t.map(I=>o.jsx("option",{value:I.id,children:I.name},I.id))})})]}),a&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Students"}),o.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-1",children:a.total_students})]}),o.jsx(Ne,{className:"w-10 h-10 text-blue-600 opacity-50"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Sessions"}),o.jsx("p",{className:"text-3xl font-bold text-green-900 mt-1",children:a.total_sessions})]}),o.jsx(jr,{className:"w-10 h-10 text-green-600 opacity-50"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Avg Attendance"}),o.jsxs("p",{className:"text-3xl font-bold text-purple-900 mt-1",children:[a.average_attendance_percentage.toFixed(1),"%"]})]}),o.jsx(_n,{className:"w-10 h-10 text-purple-600 opacity-50"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Last Session"}),o.jsx("p",{className:"text-sm font-bold text-orange-900 mt-1",children:R(a.last_session_date)})]}),o.jsx(Ns,{className:"w-10 h-10 text-orange-600 opacity-50"})]})})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[o.jsx(od,{className:"w-5 h-5 text-blue-600 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Public Shareable URL"}),o.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Generate a permanent public URL to share batch attendance statistics. URL remains active until manually revoked."}),X?o.jsxs("div",{className:"bg-white border border-blue-200 rounded p-3 mb-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Active URL (Permanent):"}),o.jsxs("span",{className:"text-xs text-gray-600",children:["Created: ",z(X.created_at)]})]}),o.jsxs("code",{className:"text-sm text-blue-600 break-all block mb-2",children:[window.location.origin,"/batch-stats/",X.public_id]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>k(X.public_id),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:[o.jsx(Sr,{className:"w-3 h-3"}),"Copy"]}),o.jsxs("button",{onClick:()=>B(X.public_id),className:"flex items-center gap-2 px-3 py-1.5 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:[o.jsx(kr,{className:"w-3 h-3"}),"Open"]}),o.jsx("button",{onClick:()=>L(X.id),className:"flex items-center gap-2 px-3 py-1.5 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Revoke"})]})]}):o.jsxs("button",{onClick:C,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors",children:[o.jsx(od,{className:"w-4 h-4"}),p?"Generating...":"Generate Public URL"]})]})]})})}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"text",value:v,onChange:I=>w(I.target.value),placeholder:"Search students...",className:"px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),o.jsxs("span",{className:"text-sm text-gray-600",children:[V.length," student",V.length!==1?"s":""]})]}),s.length>0&&o.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[o.jsx(yu,{className:"w-4 h-4"}),"Export CSV"]})]}),o.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),o.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Q("name"),children:["Student Name ",b==="name"&&(f==="asc"?"":"")]}),o.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Q("present"),children:["Sessions Present ",b==="present"&&(f==="asc"?"":"")]}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions Absent"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sessions"}),o.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Q("percentage"),children:["Attendance % ",b==="percentage"&&(f==="asc"?"":"")]})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})}):V.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:[o.jsx(Ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),o.jsx("p",{children:v?"No students match your search":"No attendance data available yet"})]})}):V.map((I,K)=>o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K+1}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:o.jsx("span",{className:"text-sm font-medium text-blue-700",children:I.student_name.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.student_name}),I.student_email&&o.jsx("div",{className:"text-xs text-gray-500",children:I.student_email})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"text-sm font-semibold text-green-700",children:I.sessions_present})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"text-sm font-semibold text-red-700",children:I.sessions_absent})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.total_sessions}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 min-w-[80px]",children:o.jsx("div",{className:`h-2 rounded-full ${T(I.attendance_percentage)}`,style:{width:`${I.attendance_percentage}%`}})}),o.jsxs("span",{className:`text-sm font-semibold px-2 py-1 rounded ${H(I.attendance_percentage)}`,children:[I.attendance_percentage.toFixed(1),"%"]})]})})]},I.student_name))})]})})})]})]})}function Lw(){const{admin:t,signOut:e}=bn(),{isDark:r,toggleTheme:n}=pw(),[s,i]=x.useState("interviews");return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",children:[o.jsx("header",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Admin Dashboard"}),o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Welcome, ",t==null?void 0:t.name]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",title:r?"Light mode":"Dark mode",children:r?o.jsx(Nw,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}):o.jsx(Sw,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})}),o.jsxs("button",{onClick:()=>e(),className:"flex items-center gap-2 px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:[o.jsx(jw,{className:"w-5 h-5"}),"Sign Out"]})]})]}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsxs("button",{onClick:()=>i("interviews"),className:`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all ${s==="interviews"?"bg-blue-600 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[o.jsx(pi,{className:"w-5 h-5"}),"Interviews"]}),o.jsxs("button",{onClick:()=>i("activeness"),className:`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all ${s==="activeness"?"bg-green-600 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[o.jsx(sl,{className:"w-5 h-5"}),"Activeness"]}),o.jsxs("button",{onClick:()=>i("batches"),className:`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all ${s==="batches"?"bg-orange-600 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[o.jsx(Ne,{className:"w-5 h-5"}),"Batches"]}),o.jsxs("button",{onClick:()=>i("attendance"),className:`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all ${s==="attendance"?"bg-purple-600 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[o.jsx(cn,{className:"w-5 h-5"}),"Attendance"]}),o.jsxs("button",{onClick:()=>i("batchstats"),className:`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all ${s==="batchstats"?"bg-teal-600 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[o.jsx(Wp,{className:"w-5 h-5"}),"Batch Stats"]})]})]})}),o.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s==="interviews"?o.jsx(Cw,{hideHeader:!0}):s==="activeness"?o.jsx(Rw,{}):s==="batches"?o.jsx(Aw,{}):s==="batchstats"?o.jsx(Iw,{}):o.jsxs("div",{className:"space-y-8",children:[o.jsx(Tw,{}),o.jsx(Ow,{})]})})]})}function $w(){const t=yn();return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl p-8 w-full max-w-md text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-4",children:"Admin Setup"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Setup wizard for initial configuration"}),o.jsx("button",{onClick:()=>t("/login"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Login"})]})})}function Uw(){const{publicId:t}=js();return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-8",children:"Interview Leaderboard"}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("p",{className:"text-slate-600",children:["Public leaderboard view for ID: ",t]})})]})})}function Dw(){const{publicId:t}=js();return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-50 p-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-8",children:"Activeness Board"}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("p",{className:"text-slate-600",children:["Public activeness board view for ID: ",t]})})]})})}function Bw(){const{sessionCode:t}=js(),e=yn(),[r,n]=x.useState(null),[s,i]=x.useState(""),[a,l]=x.useState(!0),[u,c]=x.useState(!1),[d,h]=x.useState(null),[p,y]=x.useState(!1);x.useEffect(()=>{v()},[t]);const v=async()=>{if(!t){h({type:"error",text:"Invalid attendance URL"}),l(!1);return}try{const{data:f,error:m}=await W.from("attendance_sessions").select("*").eq("session_code",t).maybeSingle();if(m)throw m;f?f.is_active?n(f):h({type:"error",text:"This attendance session is no longer active"}):h({type:"error",text:"Attendance session not found"})}catch(f){console.error("Error loading session:",f),h({type:"error",text:"Failed to load attendance session"})}finally{l(!1)}},w=async f=>{if(f.preventDefault(),!s.trim()){h({type:"error",text:"Please enter your name"});return}if(r){c(!0),h(null);try{const{error:m}=await W.from("attendance_records").insert({session_id:r.id,student_name:s.trim(),status:"present",marked_at:new Date().toISOString()});if(m)if(m.code==="23505")h({type:"error",text:" You have already marked attendance for today. Duplicate submissions are not allowed."}),y(!0);else throw m;else{const _=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});h({type:"success",text:` Attendance marked successfully for ${s} on ${b(r.session_date)} at ${_}`}),y(!0),i("")}}catch(m){console.error("Error marking attendance:",m),h({type:"error",text:"Failed to mark attendance. Please try again."})}finally{c(!1)}}},b=f=>new Date(f).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),g=f=>new Date(f).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return a?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):!r||(d==null?void 0:d.type)==="error"?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(qp,{className:"w-8 h-8 text-red-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Session Unavailable"}),o.jsx("p",{className:"text-gray-600 mb-6",children:d==null?void 0:d.text}),o.jsx("button",{onClick:()=>e("/"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Home"})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(cn,{className:"w-8 h-8 text-blue-600"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mark Attendance"}),o.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600",children:[o.jsx(jr,{className:"w-4 h-4"}),o.jsx("span",{children:b(r.session_date)})]}),o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500 mt-1",children:[o.jsx(Ns,{className:"w-4 h-4"}),o.jsxs("span",{children:["Expires at ",g(r.expires_at)]})]})]}),d&&o.jsx("div",{className:`mb-6 p-4 rounded-lg ${d.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:o.jsx("p",{className:"text-sm",children:d.text})}),p?o.jsxs("div",{className:"text-center py-6",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(il,{className:"w-8 h-8 text-green-600"})}),o.jsx("p",{className:"text-gray-600",children:"Your attendance has been recorded. You may close this window."})]}):o.jsxs("form",{onSubmit:w,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"studentName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter Your Name"}),o.jsx("input",{type:"text",id:"studentName",value:s,onChange:f=>i(f.target.value),placeholder:"John Doe",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:u,autoFocus:!0}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please enter your full name as registered"})]}),o.jsx("button",{type:"submit",disabled:u||!s.trim(),className:"w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium flex items-center justify-center gap-2",children:u?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),o.jsx("span",{children:"Marking..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(il,{className:"w-5 h-5"}),o.jsx("span",{children:"Mark Present"})]})})]}),o.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 text-center",children:o.jsx("p",{className:"text-sm text-gray-500",children:"Having trouble? Contact your administrator"})})]})})}function Mw(){const{publicId:t}=js(),[e,r]=x.useState(null),[n,s]=x.useState([]),[i,a]=x.useState(!0),[l,u]=x.useState(!1),[c,d]=x.useState(!0),[h,p]=x.useState(null);x.useEffect(()=>{y()},[t]),x.useEffect(()=>{let f;return c&&e&&(f=setInterval(()=>{y(!0)},3e4)),()=>{f&&clearInterval(f)}},[c,e]);const y=async(f=!1)=>{if(!t){p("Invalid attendance link"),a(!1);return}f?u(!0):a(!0);try{const{data:m,error:_}=await W.from("attendance_sessions").select("*").eq("public_id",t).maybeSingle();if(_)throw _;if(!m){p("Attendance session not found"),a(!1);return}m.is_active||p("This attendance session is no longer active"),r(m);const{data:j,error:S}=await W.from("attendance_records").select("*").eq("session_id",m.id).order("marked_at",{ascending:!0});if(S)throw S;s(j||[])}catch(m){console.error("Error loading attendance:",m),p("Failed to load attendance data")}finally{a(!1),u(!1)}},v=f=>new Date(f).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),w=f=>new Date(f).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});if(i)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading attendance data..."})]})});if(h&&!e)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Ne,{className:"w-8 h-8 text-red-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oops!"}),o.jsx("p",{className:"text-gray-600",children:h})]})});const b=n.length,g=b>0?100:0;return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50",children:o.jsx("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-8 text-white",children:o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:e==null?void 0:e.session_name}),o.jsxs("div",{className:"flex items-center gap-2 text-blue-100",children:[o.jsx(jr,{className:"w-4 h-4"}),o.jsx("span",{children:e&&v(e.session_date)})]})]}),o.jsx("div",{className:"text-right",children:h?o.jsx("span",{className:"px-3 py-1 bg-red-500 text-white text-sm font-medium rounded-full",children:"Inactive"}):o.jsxs("span",{className:"px-3 py-1 bg-green-500 text-white text-sm font-medium rounded-full flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"Live"]})})]})}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Batch Attendance Overview"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[o.jsx("input",{type:"checkbox",checked:c,onChange:f=>d(f.target.checked),className:"rounded border-gray-300"}),"Auto-refresh"]}),o.jsxs("button",{onClick:()=>y(!0),disabled:l,className:"flex items-center gap-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:[o.jsx(ha,{className:`w-4 h-4 ${l?"animate-spin":""}`}),"Refresh"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-600 font-medium mb-1",children:"Total Present"}),o.jsx("p",{className:"text-4xl font-bold text-blue-900",children:b})]}),o.jsx("div",{className:"w-14 h-14 bg-blue-200 rounded-full flex items-center justify-center",children:o.jsx(cn,{className:"w-7 h-7 text-blue-700"})})]})}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-600 font-medium mb-1",children:"Attendance Rate"}),o.jsxs("p",{className:"text-4xl font-bold text-green-900",children:[g.toFixed(0),"%"]})]}),o.jsx("div",{className:"w-14 h-14 bg-green-200 rounded-full flex items-center justify-center",children:o.jsx(_n,{className:"w-7 h-7 text-green-700"})})]})}),o.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-purple-600 font-medium mb-1",children:"Last Updated"}),o.jsx("p",{className:"text-lg font-bold text-purple-900",children:n.length>0?w(n[n.length-1].marked_at):"N/A"})]}),o.jsx("div",{className:"w-14 h-14 bg-purple-200 rounded-full flex items-center justify-center",children:o.jsx(Ns,{className:"w-7 h-7 text-purple-700"})})]})})]}),o.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[o.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:o.jsxs("h3",{className:"font-semibold text-gray-900",children:["Present Students (",b,")"]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:4,className:"px-6 py-12 text-center",children:[o.jsx(Ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),o.jsx("p",{className:"text-gray-500",children:"No students have marked attendance yet"}),o.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"This page updates automatically every 30 seconds"})]})}):n.map((f,m)=>o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m+1}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mr-3 shadow-sm",children:o.jsx("span",{className:"text-sm font-bold text-white",children:f.student_name.charAt(0).toUpperCase()})}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:f.student_name})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("span",{className:"px-3 py-1 inline-flex items-center gap-1 text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[o.jsx(cn,{className:"w-3 h-3"}),"Present"]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w(f.marked_at)})]},f.id))})]})})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:o.jsx(jr,{className:"w-4 h-4 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Public Attendance View"}),o.jsxs("p",{className:"text-sm text-blue-700",children:["This page shows real-time attendance for ",e==null?void 0:e.session_name,". Students can see who's present in the class. Data auto-refreshes every 30 seconds when enabled."]})]})]})})]})]})})})}function Fw(){const{publicId:t}=js(),[e,r]=x.useState([]),[n,s]=x.useState(null),[i,a]=x.useState(null),[l,u]=x.useState(!0),[c,d]=x.useState(!1),[h,p]=x.useState(!0),[y,v]=x.useState(null),[w,b]=x.useState(""),[g,f]=x.useState("percentage"),[m,_]=x.useState("desc");x.useEffect(()=>{j()},[t]),x.useEffect(()=>{let A;return h&&i&&(A=setInterval(()=>{j(!0)},6e4)),()=>{A&&clearInterval(A)}},[h,i]);const j=async(A=!1)=>{if(!t){v("Invalid batch statistics link"),u(!1);return}A?d(!0):u(!0);try{const{data:H,error:T}=await W.from("batch_public_urls").select("batch_id, is_active, expires_at").eq("public_id",t).maybeSingle();if(T)throw T;if(!H){v("Batch statistics link not found"),u(!1);return}if(!H.is_active){v("This batch statistics link has been revoked"),u(!1);return}if(H.expires_at&&new Date(H.expires_at)<new Date){v("This batch statistics link has expired"),u(!1);return}a(H.batch_id);const{data:R,error:z}=await W.rpc("get_batch_attendance_stats",{p_batch_id:H.batch_id});if(z)throw z;r(R||[]);const{data:O,error:D}=await W.rpc("get_batch_overview",{p_batch_id:H.batch_id});if(D)throw D;s(O&&O.length>0?O[0]:null),await W.from("batch_public_urls").update({last_accessed_at:new Date().toISOString()}).eq("public_id",t),v(null)}catch(H){console.error("Error loading batch stats:",H),v("Failed to load batch statistics")}finally{u(!1),d(!1)}},S=()=>{if(!n||e.length===0)return;const A=["Student Name","Email","Total Sessions","Sessions Present","Sessions Absent","Attendance %"],H=e.map(D=>[D.student_name,D.student_email||"-",D.total_sessions,D.sessions_present,D.sessions_absent,`${D.attendance_percentage}%`]),T=[`Batch: ${n.batch_name}`,`Total Students: ${n.total_students}`,`Total Sessions: ${n.total_sessions}`,`Average Attendance: ${n.average_attendance_percentage.toFixed(2)}%`,"",A.join(","),...H.map(D=>D.map(V=>`"${V}"`).join(","))].join(`
`),R=new Blob([T],{type:"text/csv"}),z=window.URL.createObjectURL(R),O=document.createElement("a");O.href=z,O.download=`${n.batch_name}-attendance-stats.csv`,document.body.appendChild(O),O.click(),document.body.removeChild(O),window.URL.revokeObjectURL(z)},N=A=>A>=75?"text-green-700 bg-green-100":A>=50?"text-yellow-700 bg-yellow-100":"text-red-700 bg-red-100",E=A=>A>=75?"bg-green-500":A>=50?"bg-yellow-500":"bg-red-500",C=A=>A?new Date(A).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"N/A",B=[...e.filter(A=>A.student_name.toLowerCase().includes(w.toLowerCase()))].sort((A,H)=>{let T=0;return g==="name"?T=A.student_name.localeCompare(H.student_name):g==="percentage"?T=A.attendance_percentage-H.attendance_percentage:g==="present"&&(T=A.sessions_present-H.sessions_present),m==="asc"?T:-T}),L=A=>{g===A?_(m==="asc"?"desc":"asc"):(f(A),_("desc"))};return l?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading batch statistics..."})]})}):y?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Vp,{className:"w-8 h-8 text-red-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Error"}),o.jsx("p",{className:"text-gray-600",children:y})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50",children:o.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-8 text-white",children:o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:n==null?void 0:n.batch_name}),(n==null?void 0:n.batch_description)&&o.jsx("p",{className:"text-blue-100",children:n.batch_description})]}),o.jsx("div",{className:"text-right",children:o.jsxs("span",{className:"px-3 py-1 bg-white bg-opacity-20 text-white text-sm font-medium rounded-full flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Live Statistics"]})})]})}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Batch Attendance Overview"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[o.jsx("input",{type:"checkbox",checked:h,onChange:A=>p(A.target.checked),className:"rounded border-gray-300"}),"Auto-refresh"]}),o.jsxs("button",{onClick:()=>j(!0),disabled:c,className:"flex items-center gap-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:[o.jsx(ha,{className:`w-4 h-4 ${c?"animate-spin":""}`}),"Refresh"]})]})]}),n&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-600 font-medium mb-1",children:"Total Students"}),o.jsx("p",{className:"text-4xl font-bold text-blue-900",children:n.total_students})]}),o.jsx(Ne,{className:"w-12 h-12 text-blue-600 opacity-50"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-600 font-medium mb-1",children:"Total Sessions"}),o.jsx("p",{className:"text-4xl font-bold text-green-900",children:n.total_sessions})]}),o.jsx(jr,{className:"w-12 h-12 text-green-600 opacity-50"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-purple-600 font-medium mb-1",children:"Avg Attendance"}),o.jsxs("p",{className:"text-4xl font-bold text-purple-900",children:[n.average_attendance_percentage.toFixed(1),"%"]})]}),o.jsx(_n,{className:"w-12 h-12 text-purple-600 opacity-50"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-orange-600 font-medium mb-1",children:"Last Session"}),o.jsx("p",{className:"text-sm font-bold text-orange-900",children:C(n.last_session_date)})]}),o.jsx(Ns,{className:"w-12 h-12 text-orange-600 opacity-50"})]})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"text",value:w,onChange:A=>b(A.target.value),placeholder:"Search students...",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),o.jsxs("span",{className:"text-sm text-gray-600",children:[B.length," student",B.length!==1?"s":""]})]}),e.length>0&&o.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[o.jsx(yu,{className:"w-4 h-4"}),"Export CSV"]})]}),o.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[o.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:o.jsx("h3",{className:"font-semibold text-gray-900",children:"Student Attendance Statistics"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),o.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>L("name"),children:["Student Name ",g==="name"&&(m==="asc"?"":"")]}),o.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>L("present"),children:["Sessions Present ",g==="present"&&(m==="asc"?"":"")]}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions Absent"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sessions"}),o.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>L("percentage"),children:["Attendance % ",g==="percentage"&&(m==="asc"?"":"")]})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center",children:[o.jsx(Ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),o.jsx("p",{className:"text-gray-500",children:w?"No students match your search":"No attendance data available yet"})]})}):B.map((A,H)=>o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H+1}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mr-3 shadow-sm",children:o.jsx("span",{className:"text-sm font-bold text-white",children:A.student_name.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.student_name}),A.student_email&&o.jsx("div",{className:"text-xs text-gray-500",children:A.student_email})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"text-base font-bold text-green-700",children:A.sessions_present})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"text-base font-bold text-red-700",children:A.sessions_absent})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.total_sessions}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3 min-w-[100px]",children:o.jsx("div",{className:`h-3 rounded-full transition-all ${E(A.attendance_percentage)}`,style:{width:`${A.attendance_percentage}%`}})}),o.jsxs("span",{className:`text-base font-bold px-3 py-1 rounded ${N(A.attendance_percentage)}`,children:[A.attendance_percentage.toFixed(1),"%"]})]})})]},A.student_name))})]})})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:o.jsx(Ne,{className:"w-4 h-4 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Public Batch Statistics"}),o.jsxs("p",{className:"text-sm text-blue-700",children:["This page shows real-time attendance statistics for all students in ",n==null?void 0:n.batch_name,". Data auto-refreshes every minute when enabled. This view is read-only and accessible via a secure, time-limited link."]})]})]})})]})]})})})}function zw({children:t}){const{user:e,loading:r}=bn();return r?o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:o.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Loading..."})}):e?o.jsx(o.Fragment,{children:t}):o.jsx(cy,{to:"/login"})}function Vw(){return o.jsx(Ly,{children:o.jsx(fw,{children:o.jsx(hw,{children:o.jsxs(hy,{children:[o.jsx(pt,{path:"/login",element:o.jsx(mw,{})}),o.jsx(pt,{path:"/signup",element:o.jsx(gw,{})}),o.jsx(pt,{path:"/setup",element:o.jsx($w,{})}),o.jsx(pt,{path:"/public/:publicId",element:o.jsx(Uw,{})}),o.jsx(pt,{path:"/activeness/:publicId",element:o.jsx(Dw,{})}),o.jsx(pt,{path:"/attend/:sessionCode",element:o.jsx(Bw,{})}),o.jsx(pt,{path:"/attendance/view/:publicId",element:o.jsx(Mw,{})}),o.jsx(pt,{path:"/batch-stats/:publicId",element:o.jsx(Fw,{})}),o.jsx(pt,{path:"/",element:o.jsx(zw,{children:o.jsx(Lw,{})})})]})})})})}_f(document.getElementById("root")).render(o.jsx(x.StrictMode,{children:o.jsx(Vw,{})}));
